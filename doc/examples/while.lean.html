<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<title>gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while.lean</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Lean4 v4.0.0-unknown. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+↑</kbd> <kbd>Ctrl+↓</kbd> to navigate, <kbd>Ctrl+🖱️</kbd> to focus. On Mac, use <kbd>⌘</kbd> instead of <kbd>Ctrl</kbd>.<br>Hover-Settings: Show types:<input id="toggleswitch" type="checkbox" onClick="toggleShowTypes(this);"> Show goals:<input id="toggleswitch" type="checkbox" onClick="toggleShowGoals(this);" checked><br></div><div class="document">


<pre class="alectryon-io type-info-hidden highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp"><div class="alectryon-token"><span class="k">abbrev</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>String</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>String</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">inductive</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>int</var><b>: </b><span>Int → _root_.Val</span></span></div></blockquote></div></small></div>int</div><div class="alectryon-token">  (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Int</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Int</div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>bool</var><b>: </b><span>Bool → _root_.Val</span></span></div></blockquote></div></small></div>bool</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bool</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Bool</div><div class="alectryon-token">)
  </div><div class="alectryon-token"><span class="k">deriving</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>DecidableEq</var><b>: </b><span>Sort u → Sort (max 1 u)</span></span></div></blockquote></div></small></div>DecidableEq</div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Repr</var><b>: </b><span>Type u → Type u</span></span></div></blockquote></div></small></div>Repr</div><div class="alectryon-token">

</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>instance</var><b>: </b><span>Coe Bool Val</span></span></div></blockquote></div></small></div><span class="kd">instance</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Coe</var><b>: </b><span>Type → Type → Type</span></span></div></blockquote></div></small></div>Coe</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bool</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  coe </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>instance</var><b>: </b><span>Coe Int Val</span></span></div></blockquote></div></small></div><span class="kd">instance</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Coe</var><b>: </b><span>Type → Type → Type</span></span></div></blockquote></div></small></div>Coe</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Int</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  coe </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>instance</var><b>: </b><span>{n : Nat} → OfNat Val n</span></span></div></blockquote></div></small></div><span class="kd">instance</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>OfNat</var><b>: </b><span>Type → Nat → Type</span></span></div></blockquote></div></small></div>OfNat</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>n</var><b>: </b><span>Nat</span></span></div></blockquote></div></small></div><span class="nv">n</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  ofNat := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>n</var><b>: </b><span>Nat</span></span></div></blockquote></div></small></div><span class="nv">n</span></div><div class="alectryon-token">

</div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk0"><div class="alectryon-token"><span class="k">#check</span></div></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">Val.bool true : Val</blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>true</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>true</div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">)

</div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk1"><div class="alectryon-token"><span class="k">#check</span></div></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message"><span class="mi">0</span> : Val</blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>0</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="mi">0</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">)

</div><div class="alectryon-token"><span class="kd">inductive</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>BinOp</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>BinOp</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eq</var><b>: </b><span>_root_.BinOp</span></span></div></blockquote></div></small></div>eq</div><div class="alectryon-token"> <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>and</var><b>: </b><span>_root_.BinOp</span></span></div></blockquote></div></small></div>and</div><div class="alectryon-token"> <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>lt</var><b>: </b><span>_root_.BinOp</span></span></div></blockquote></div></small></div>lt</div><div class="alectryon-token"> <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>add</var><b>: </b><span>_root_.BinOp</span></span></div></blockquote></div></small></div>add</div><div class="alectryon-token"> <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>sub</var><b>: </b><span>_root_.BinOp</span></span></div></blockquote></div></small></div>sub</div><div class="alectryon-token">
  </div><div class="alectryon-token"><span class="k">deriving</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Repr</var><b>: </b><span>Type u → Type u</span></span></div></blockquote></div></small></div>Repr</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">inductive</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>UnaryOp</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>UnaryOp</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>not</var><b>: </b><span>_root_.UnaryOp</span></span></div></blockquote></div></small></div>not</div><div class="alectryon-token">
  </div><div class="alectryon-token"><span class="k">deriving</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Repr</var><b>: </b><span>Type u → Type u</span></span></div></blockquote></div></small></div>Repr</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">inductive</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>val</var><b>: </b><span>Val → _root_.Expr</span></span></div></blockquote></div></small></div>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>var</var><b>: </b><span>Var → _root_.Expr</span></span></div></blockquote></div></small></div>var</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>bin</var><b>: </b><span>_root_.Expr → BinOp → _root_.Expr → _root_.Expr</span></span></div></blockquote></div></small></div>bin</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>lhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">lhs</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Sort _tmp_ind_univ_param</span></span></div></blockquote></div></small></div><span class="nv">Expr</span></div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>BinOp</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>BinOp</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>rhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">rhs</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Sort _tmp_ind_univ_param</span></span></div></blockquote></div></small></div><span class="nv">Expr</span></div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>una</var><b>: </b><span>UnaryOp → _root_.Expr → _root_.Expr</span></span></div></blockquote></div></small></div>una</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>UnaryOp</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>UnaryOp</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>arg</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">arg</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Sort _tmp_ind_univ_param</span></span></div></blockquote></div></small></div><span class="nv">Expr</span></div><div class="alectryon-token">)
  </div><div class="alectryon-token"><span class="k">deriving</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Repr</var><b>: </b><span>Type u → Type u</span></span></div></blockquote></div></small></div>Repr</div><div class="alectryon-token">

</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>instance</var><b>: </b><span>Coe Val Expr</span></span></div></blockquote></div></small></div><span class="kd">instance</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Coe</var><b>: </b><span>Type → Type → Type</span></span></div></blockquote></div></small></div>Coe</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  coe </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>instance</var><b>: </b><span>Coe Var Expr</span></span></div></blockquote></div></small></div><span class="kd">instance</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Coe</var><b>: </b><span>Type → Type → Type</span></span></div></blockquote></div></small></div>Coe</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  coe </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.var</var><b>: </b><span>Var → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>var</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>instance</var><b>: </b><span>{n : Nat} → OfNat Expr n</span></span></div></blockquote></div></small></div><span class="kd">instance</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>OfNat</var><b>: </b><span>Type → Nat → Type</span></span></div></blockquote></div></small></div>OfNat</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>n</var><b>: </b><span>Nat</span></span></div></blockquote></div></small></div><span class="nv">n</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  ofNat := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>n</var><b>: </b><span>Nat</span></span></div></blockquote></div></small></div><span class="nv">n</span></div><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>BinOp.eval</var><b>: </b><span>BinOp → Val → Val → Option Val</span></span></div></blockquote></div></small></div>BinOp.eval</div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>BinOp</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>BinOp</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Option</var><b>: </b><span>Type → Type</span></span></div></blockquote></div></small></div>Option</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.eq</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>eq</div><div class="alectryon-token">,  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₁</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₁</span></div><div class="alectryon-token">,        </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₂</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₂</span></div><div class="alectryon-token">      <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₁</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₁</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₂</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₂</span></div><div class="alectryon-token">))
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.and</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>and</div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b₁</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b₂</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b₂</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b₁</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b₁</span></div><div class="alectryon-token"> <span class="bp">&amp;&amp;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b₂</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b₂</span></div><div class="alectryon-token">))
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.lt</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>lt</div><div class="alectryon-token">,  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₁</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₁</span></div><div class="alectryon-token">,  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₂</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₂</span></div><div class="alectryon-token">  <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₁</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₁</span></div><div class="alectryon-token"> <span class="bp">&lt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₂</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₂</span></div><div class="alectryon-token">))
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.add</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>add</div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₁</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₁</span></div><div class="alectryon-token">,  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₂</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₂</span></div><div class="alectryon-token">  <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₁</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₁</span></div><div class="alectryon-token"> <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₂</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₂</span></div><div class="alectryon-token">))
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.sub</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>sub</div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₁</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₁</span></div><div class="alectryon-token">,  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₂</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₂</span></div><div class="alectryon-token">  <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₁</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₁</span></div><div class="alectryon-token"> <span class="bp">-</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₂</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₂</span></div><div class="alectryon-token">))
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">,    </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">,        </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">        <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>none</var><b>: </b><span>{α : Type} → Option α</span></span></div></blockquote></div></small></div>none</div><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>UnaryOp.eval</var><b>: </b><span>UnaryOp → Val → Option Val</span></span></div></blockquote></div></small></div>UnaryOp.eval</div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>UnaryOp</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>UnaryOp</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Option</var><b>: </b><span>Type → Type</span></span></div></blockquote></div></small></div>Option</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.not</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>not</div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> <span class="bp">!</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">,    </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">       <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>none</var><b>: </b><span>{α : Type} → Option α</span></span></div></blockquote></div></small></div>none</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">inductive</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Stmt</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>skip</var><b>: </b><span>_root_.Stmt</span></span></div></blockquote></div></small></div>skip</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assign</var><b>: </b><span>Var → Expr → _root_.Stmt</span></span></div></blockquote></div></small></div>assign</div><div class="alectryon-token">   (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>seq</var><b>: </b><span>_root_.Stmt → _root_.Stmt → _root_.Stmt</span></span></div></blockquote></div></small></div>seq</div><div class="alectryon-token">      (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt</var><b>: </b><span>Sort _tmp_ind_univ_param</span></span></div></blockquote></div></small></div><span class="nv">Stmt</span></div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ite</var><b>: </b><span>Expr → _root_.Stmt → _root_.Stmt → _root_.Stmt</span></span></div></blockquote></div></small></div>ite</div><div class="alectryon-token">      (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">t</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt</var><b>: </b><span>Sort _tmp_ind_univ_param</span></span></div></blockquote></div></small></div><span class="nv">Stmt</span></div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>«while»</var><b>: </b><span>Expr → _root_.Stmt → _root_.Stmt</span></span></div></blockquote></div></small></div><span class="bp">«</span>while<span class="bp">»</span></div><div class="alectryon-token">  (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt</var><b>: </b><span>Sort _tmp_ind_univ_param</span></span></div></blockquote></div></small></div><span class="nv">Stmt</span></div><div class="alectryon-token">)
  </div><div class="alectryon-token"><span class="k">deriving</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Repr</var><b>: </b><span>Type u → Type u</span></span></div></blockquote></div></small></div>Repr</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">infix</span></div><div class="alectryon-token">:<span class="mi">150</span> <span class="s2">&quot; ::= &quot;</span> <span class="bp">=&gt;</span> Stmt.assign
</div><div class="alectryon-token"><span class="kd">infixr</span></div><div class="alectryon-token">:<span class="mi">130</span> <span class="s2">&quot;;; &quot;</span>   <span class="bp">=&gt;</span> Stmt.seq

</div><div class="alectryon-token"><span class="k">syntax</span></div><div class="alectryon-token"> <span class="s2">&quot;`[Expr|&quot;</span> term <span class="s2">&quot;]&quot;</span> : term

</div><div class="alectryon-token"><span class="k">macro_rules</span></div><div class="alectryon-token">
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|</span>true])      <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>`((true : Expr))</var><b>: </b><span>Lean.MacroM Lean.Syntax</span></span></div></blockquote></div></small></div><span class="bp">`</span>((true : Expr))</div><div class="alectryon-token">
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|</span>false])     <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>`((false : Expr))</var><b>: </b><span>Lean.MacroM Lean.Syntax</span></span></div></blockquote></div></small></div><span class="bp">`</span>((false : Expr))</div><div class="alectryon-token">
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>n</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">n</span></div><div class="alectryon-token">:numLit]) <span class="bp">=&gt;</span> <span class="bp">`</span>((<span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>n</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">n</span></div><div class="alectryon-token"> : Expr))
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">:ident])  <span class="bp">=&gt;</span> <span class="bp">`</span>((<span class="bp">$</span>(</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Lean.quote</var><b>: </b><span>{α : Type} → [self : Lean.Quote α] → α → Lean.Syntax</span></span></div></blockquote></div></small></div><span class="k">Lean.quote</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"><span class="k">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>getId</var><b>: </b><span>Lean.Syntax → Lean.Name</span></span></div></blockquote></div></small></div><span class="k">getId</span></div><div class="alectryon-token"><span class="k">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>toString</var><b>: </b><span>Lean.Name → optParam Bool true → String</span></span></div></blockquote></div></small></div><span class="k">toString</span></div><div class="alectryon-token">) : Expr))
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">=</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">])   <span class="bp">=&gt;</span> <span class="bp">`</span>(Expr.bin <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">] BinOp.eq <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">])
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">&amp;&amp;</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">])  <span class="bp">=&gt;</span> <span class="bp">`</span>(Expr.bin <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">] BinOp.and <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">])
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">&lt;</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">])   <span class="bp">=&gt;</span> <span class="bp">`</span>(Expr.bin <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">] BinOp.lt <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">])
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">+</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">])   <span class="bp">=&gt;</span> <span class="bp">`</span>(Expr.bin <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">] BinOp.add <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">])
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">-</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">])   <span class="bp">=&gt;</span> <span class="bp">`</span>(Expr.bin <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">] BinOp.sub <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">])
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|!$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">])       <span class="bp">=&gt;</span> <span class="bp">`</span>(Expr.una UnaryOp.not <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">])
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|</span>(<span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">)])      <span class="bp">=&gt;</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">])</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="k">declare_syntax_cat</span></div><div class="alectryon-token"> stmt

</div><div class="alectryon-token"><span class="k">syntax</span></div><div class="alectryon-token"> ident <span class="s2">&quot; := &quot;</span> term <span class="s2">&quot;;&quot;</span>: stmt
</div><div class="alectryon-token"><span class="k">syntax</span></div><div class="alectryon-token"> <span class="s2">&quot;if &quot;</span> <span class="s2">&quot;(&quot;</span> term <span class="s2">&quot;)&quot;</span> <span class="s2">&quot; {</span><span class="se">\n</span><span class="s2">&quot;</span> stmt<span class="bp">*</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">}&quot;</span> (<span class="s2">&quot; else &quot;</span> <span class="s2">&quot;{</span><span class="se">\n</span><span class="s2">&quot;</span> stmt<span class="bp">*</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">}&quot;</span>)<span class="bp">?</span> : stmt
</div><div class="alectryon-token"><span class="k">syntax</span></div><div class="alectryon-token"> <span class="s2">&quot;while &quot;</span> <span class="s2">&quot;(&quot;</span> term <span class="s2">&quot;)&quot;</span> <span class="s2">&quot;{</span><span class="se">\n</span><span class="s2">&quot;</span> stmt<span class="bp">*</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">}&quot;</span> : stmt

</div><div class="alectryon-token"><span class="k">syntax</span></div><div class="alectryon-token"> <span class="s2">&quot;`[Stmt|&quot;</span> stmt<span class="bp">*</span> <span class="s2">&quot;]&quot;</span> : term

</div><div class="alectryon-token"><span class="k">macro_rules</span></div><div class="alectryon-token">
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Stmt<span class="bp">|</span> ]) <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>`(Stmt.skip)</var><b>: </b><span>Lean.MacroM Lean.Syntax</span></span></div></blockquote></div></small></div><span class="bp">`</span>(Stmt.skip)</div><div class="alectryon-token">
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Stmt<span class="bp">|</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">:ident := <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token">:term<span class="bp">;</span>]) <span class="bp">=&gt;</span> <span class="bp">`</span>(Stmt.assign <span class="bp">$</span>(</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Lean.quote</var><b>: </b><span>{α : Type} → [self : Lean.Quote α] → α → Lean.Syntax</span></span></div></blockquote></div></small></div><span class="k">Lean.quote</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"><span class="k">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>getId</var><b>: </b><span>Lean.Syntax → Lean.Name</span></span></div></blockquote></div></small></div><span class="k">getId</span></div><div class="alectryon-token"><span class="k">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>toString</var><b>: </b><span>Lean.Name → optParam Bool true → String</span></span></div></blockquote></div></small></div><span class="k">toString</span></div><div class="alectryon-token">) <span class="bp">`</span>[Expr<span class="bp">|</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token">:term])
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Stmt<span class="bp">|</span> </div><div class="alectryon-token"><span class="k">if</span></div><div class="alectryon-token"> (<span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token">) { <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ts</var><b>: </b><span>Array Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">ts</span></div><div class="alectryon-token"><span class="bp">*</span> } </div><div class="alectryon-token"><span class="k">else</span></div><div class="alectryon-token"> { <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>es</var><b>: </b><span>Array Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">es</span></div><div class="alectryon-token"><span class="bp">*</span> }]) <span class="bp">=&gt;</span> <span class="bp">`</span>(Stmt.ite <span class="bp">`</span>[Expr<span class="bp">|</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token">] <span class="bp">`</span>[Stmt<span class="bp">|</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ts</var><b>: </b><span>Array Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">ts</span></div><div class="alectryon-token"><span class="bp">*</span>] <span class="bp">`</span>[Stmt<span class="bp">|</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>es</var><b>: </b><span>Array Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">es</span></div><div class="alectryon-token"><span class="bp">*</span>])
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Stmt<span class="bp">|</span> </div><div class="alectryon-token"><span class="k">if</span></div><div class="alectryon-token"> (<span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token">) { <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ts</var><b>: </b><span>Array Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">ts</span></div><div class="alectryon-token"><span class="bp">*</span> }]) <span class="bp">=&gt;</span> <span class="bp">`</span>(Stmt.ite <span class="bp">`</span>[Expr<span class="bp">|</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token">] <span class="bp">`</span>[Stmt<span class="bp">|</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ts</var><b>: </b><span>Array Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">ts</span></div><div class="alectryon-token"><span class="bp">*</span>] Stmt.skip)
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Stmt<span class="bp">|</span> </div><div class="alectryon-token"><span class="k">while</span></div><div class="alectryon-token"> (<span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token">) { <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Array Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"><span class="bp">*</span> }]) <span class="bp">=&gt;</span> <span class="bp">`</span>(Stmt.while <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token">] <span class="bp">`</span>[Stmt<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Array Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"><span class="bp">*</span>])
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Stmt<span class="bp">|</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ss</var><b>: </b><span>Array Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">ss</span></div><div class="alectryon-token"><span class="bp">*</span>]) <span class="bp">=&gt;</span> <span class="bp">`</span>(Stmt.seq <span class="bp">`</span>[Stmt<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token">] <span class="bp">`</span>[Stmt<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ss</var><b>: </b><span>Array Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">ss</span></div><div class="alectryon-token"><span class="bp">*</span>])</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>example1</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>example1</div><div class="alectryon-token"> := <span class="bp">`</span>[Stmt<span class="bp">|</span>
  x := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>8</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">8</span></div><div class="alectryon-token"><span class="bp">;</span>
  y := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>10</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">10</span></div><div class="alectryon-token"><span class="bp">;</span>
  </div><div class="alectryon-token"><span class="k">if</span></div><div class="alectryon-token"> (x <span class="bp">&lt;</span> y) {
    x := x <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>1</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">1</span></div><div class="alectryon-token"><span class="bp">;</span>
  } </div><div class="alectryon-token"><span class="k">else</span></div><div class="alectryon-token"> {
    y := y <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>3</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">3</span></div><div class="alectryon-token"><span class="bp">;</span>
  }
]

</div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk2"><div class="alectryon-token"><span class="k">#reduce</span></div></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message"><span class="s2">&quot;x&quot;</span> ::= Expr.val (Val.int (Int.ofNat <span class="mi">8</span>))<span class="bp">;;</span>
  <span class="s2">&quot;y&quot;</span> ::= Expr.val (Val.int (Int.ofNat <span class="mi">10</span>))<span class="bp">;;</span>
    Stmt.ite (Expr.bin (Expr.var <span class="s2">&quot;x&quot;</span>) BinOp.lt (Expr.var <span class="s2">&quot;y&quot;</span>))
      (<span class="s2">&quot;x&quot;</span> ::= Expr.bin (Expr.var <span class="s2">&quot;x&quot;</span>) BinOp.add (Expr.val (Val.int (Int.ofNat <span class="mi">1</span>))))
      (<span class="s2">&quot;y&quot;</span> ::= Expr.bin (Expr.var <span class="s2">&quot;y&quot;</span>) BinOp.add (Expr.val (Val.int (Int.ofNat <span class="mi">3</span>))))</blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>example1</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>example1</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>example2</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>example2</div><div class="alectryon-token"> := <span class="bp">`</span>[Stmt<span class="bp">|</span>
  x := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>8</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">8</span></div><div class="alectryon-token"><span class="bp">;</span>
  </div><div class="alectryon-token"><span class="k">if</span></div><div class="alectryon-token"> (x <span class="bp">&lt;</span> y) {
    x := x <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>1</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">1</span></div><div class="alectryon-token"><span class="bp">;</span>
  } </div><div class="alectryon-token"><span class="k">else</span></div><div class="alectryon-token"> {
    y := y <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>3</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">3</span></div><div class="alectryon-token"><span class="bp">;</span>
    x := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>9</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">9</span></div><div class="alectryon-token"><span class="bp">;</span>
  }
  y := x<span class="bp">;</span>]

</div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk3"><div class="alectryon-token"><span class="k">#eval</span></div></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">Stmt.seq
  (Stmt.assign <span class="s2">&quot;x&quot;</span> (Expr.val (Val.int <span class="mi">8</span>)))
  (Stmt.seq
    (Stmt.ite
      (Expr.bin (Expr.var <span class="s2">&quot;x&quot;</span>) (BinOp.lt) (Expr.var <span class="s2">&quot;y&quot;</span>))
      (Stmt.assign <span class="s2">&quot;x&quot;</span> (Expr.bin (Expr.var <span class="s2">&quot;x&quot;</span>) (BinOp.add) (Expr.val (Val.int <span class="mi">1</span>))))
      (Stmt.seq
        (Stmt.assign <span class="s2">&quot;y&quot;</span> (Expr.bin (Expr.var <span class="s2">&quot;y&quot;</span>) (BinOp.add) (Expr.val (Val.int <span class="mi">3</span>))))
        (Stmt.assign <span class="s2">&quot;x&quot;</span> (Expr.val (Val.int <span class="mi">9</span>)))))
    (Stmt.assign <span class="s2">&quot;y&quot;</span> (Expr.var <span class="s2">&quot;x&quot;</span>)))
</blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>example2</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>example2</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="k">abbrev</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>List</var><b>: </b><span>Type → Type</span></span></div></blockquote></div></small></div>List</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token"> <span class="bp">×</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">)

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.update</var><b>: </b><span>State → Var → Val → State</span></span></div></blockquote></div></small></div>State.update</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token"> :=
  </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
  <span class="bp">|</span> [] <span class="bp">=&gt;</span> [(</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">)]
  <span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>w</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">w</span></div><div class="alectryon-token">)::</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">if</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">then</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">)::</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">else</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>w</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">w</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>update</var><b>: </b><span>State → Var → Val → State</span></span></div></blockquote></div></small></div><span class="nv">update</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.get</var><b>: </b><span>State → Var → Val</span></span></div></blockquote></div></small></div>State.get</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token"> :=
  </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
  <span class="bp">|</span> [] <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>0</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="mi">0</span></div><div class="alectryon-token">
  <span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">if</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">then</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">else</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>get</var><b>: </b><span>State → Var → Val</span></span></div></blockquote></div></small></div><span class="nv">get</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.get_update_self</var><b>: </b><span>∀ (s : State) (x : Var) (v : Val), get (update s x v) x = v</span></span></div></blockquote></div></small></div>State.get_update_self</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">) : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>update</var><b>: </b><span>State → Var → Val → State</span></span></div></blockquote></div></small></div>update</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>get</var><b>: </b><span>State → Var → Val</span></span></div></blockquote></div></small></div><span class="na">get</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk4"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">get (update s x v) x <span class="bp">=</span> v</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk5"><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
  <span class="bp">|</span> [] <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">get (update s x v) x <span class="bp">=</span> v</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk6"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk7"><div class="alectryon-token"><span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>w</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">w</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">get (update s x v) x <span class="bp">=</span> v</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk8"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">get (<span class="k">if</span> x <span class="bp">=</span> y <span class="k">then</span> (x, v) :: s <span class="k">else</span> (y, w) :: update s x v) x <span class="bp">=</span> v</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk9"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">get ((x, v) :: s) x <span class="bp">=</span> v</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chka" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chka"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">get ((y, w) :: update s x v) x <span class="bp">=</span> v</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chkb"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">get (<span class="k">if</span> x <span class="bp">=</span> y <span class="k">then</span> (x, v) :: s <span class="k">else</span> (y, w) :: update s x v) x <span class="bp">=</span> v</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chkc"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chkd"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>get_update_self</var><b>: </b><span>∀ (s : State) (x : Var) (v : Val), get (update s x v) x = v</span></span></div></blockquote></div></small></div><span class="nv">get_update_self</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.get_update</var><b>: </b><span>∀ {z : Var} (s : State) (x y : Var) (v : Val), z ≠ x → get (update s x v) z = get s z</span></span></div></blockquote></div></small></div>State.get_update</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>z ≠ x</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>z</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">z</span></div><div class="alectryon-token"> <span class="bp">≠</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">) : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>update</var><b>: </b><span>State → Var → Val → State</span></span></div></blockquote></div></small></div>update</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>get</var><b>: </b><span>State → Var → Val</span></span></div></blockquote></div></small></div><span class="na">get</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>z</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">z</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>get</var><b>: </b><span>State → Var → Val</span></span></div></blockquote></div></small></div>get</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>z</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">z</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chke"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>z <span class="bp">≠</span> x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">get (update s x v) z <span class="bp">=</span> get s z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chkf"><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
  <span class="bp">|</span> [] <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>z <span class="bp">≠</span> x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">get (update s x v) z <span class="bp">=</span> get s z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk10"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>z ≠ x</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk11"><div class="alectryon-token"><span class="k">done</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk12"><div class="alectryon-token"><span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>w</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">w</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>z <span class="bp">≠</span> x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">get (update s x v) z <span class="bp">=</span> get s z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk13"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z, x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>z <span class="bp">≠</span> x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">get (<span class="k">if</span> x <span class="bp">=</span> y <span class="k">then</span> (x, v) :: s <span class="k">else</span> (y, w) :: update s x v) z <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> w <span class="k">else</span> get s z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk14"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z, x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>z <span class="bp">≠</span> x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">get ((x, v) :: s) z <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> w <span class="k">else</span> get s z</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk15" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z, x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>z <span class="bp">≠</span> x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk15"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">get ((y, w) :: update s x v) z <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> w <span class="k">else</span> get s z</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk16"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z, x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>z <span class="bp">≠</span> x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">get (<span class="k">if</span> x <span class="bp">=</span> y <span class="k">then</span> (x, v) :: s <span class="k">else</span> (y, w) :: update s x v) z <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> w <span class="k">else</span> get s z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk17"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z, x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>z <span class="bp">≠</span> x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">(<span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> w <span class="k">else</span> get (update s x v) z) <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> w <span class="k">else</span> get s z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk18"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> hc <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z, x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>z <span class="bp">≠</span> x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">(<span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> v <span class="k">else</span> get s z) <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> w <span class="k">else</span> get s z</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk19" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z, x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>z <span class="bp">≠</span> x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk19"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">(<span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> w <span class="k">else</span> get (update s x v) z) <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> w <span class="k">else</span> get s z</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk1a"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z, x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>z <span class="bp">≠</span> x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>hc</var><span class="hyp-type"><b>: </b><span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">v <span class="bp">=</span> w</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk1b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z, x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>z <span class="bp">≠</span> x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>hc</var><span class="hyp-type"><b>: </b><span>x <span class="bp">=</span> y</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk1b"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">get s z <span class="bp">=</span> get s z</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk1c"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z, x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>z <span class="bp">≠</span> x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>hc</var><span class="hyp-type"><b>: </b><span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> v <span class="k">else</span> get s z) <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> w <span class="k">else</span> get s z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk1d"><div class="alectryon-token"><span class="k">simp_all</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk1e"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z, x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>z <span class="bp">≠</span> x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">(<span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> w <span class="k">else</span> get (update s x v) z) <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> w <span class="k">else</span> get s z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk1f"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z, x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>z <span class="bp">≠</span> x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">w <span class="bp">=</span> w</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk20" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z, x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>z <span class="bp">≠</span> x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk20"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">get (update s x v) z <span class="bp">=</span> get s z</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk21"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z, x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>z <span class="bp">≠</span> x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">w <span class="bp">=</span> w</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk22" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z, x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>z <span class="bp">≠</span> x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk22"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">get (update s x v) z <span class="bp">=</span> get s z</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk23"><div class="alectryon-token"><span class="k">rfl</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk24"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z, x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>z <span class="bp">≠</span> x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">get (update s x v) z <span class="bp">=</span> get s z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk25"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>get_update</var><b>: </b><span>∀ {z : Var} (s : State) (x y : Var) (v : Val), z ≠ x → get (update s x v) z = get s z</span></span></div></blockquote></div></small></div><span class="nv">get_update</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>z ≠ x</span></span></div></blockquote></div></small></div><span class="nv">h</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

</div><div class="alectryon-token"><span class="k">syntax</span></div><div class="alectryon-token"> ident <span class="s2">&quot; ↦ &quot;</span> term : term

</div><div class="alectryon-token"><span class="k">macro_rules</span></div><div class="alectryon-token">
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>id</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">id</span></div><div class="alectryon-token">:ident <span class="bp">↦</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">:term) <span class="bp">=&gt;</span> <span class="bp">`</span>((<span class="bp">$</span>(</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Lean.quote</var><b>: </b><span>{α : Type} → [self : Lean.Quote α] → α → Lean.Syntax</span></span></div></blockquote></div></small></div><span class="k">Lean.quote</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>id</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">id</span></div><div class="alectryon-token"><span class="k">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>getId</var><b>: </b><span>Lean.Syntax → Lean.Name</span></span></div></blockquote></div></small></div><span class="k">getId</span></div><div class="alectryon-token"><span class="k">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>toString</var><b>: </b><span>Lean.Name → optParam Bool true → String</span></span></div></blockquote></div></small></div><span class="k">toString</span></div><div class="alectryon-token">), <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">:term))</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="k">syntax</span></div><div class="alectryon-token"> <span class="s2">&quot;⟪&quot;</span> (ident <span class="s2">&quot; ↦ &quot;</span> term),<span class="bp">*</span> <span class="s2">&quot;⟫&quot;</span> : term

</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>example</var><b>: </b><span>State.get [(&quot;x&quot;, Val.int 10), (&quot;y&quot;, Val.int 20)] &quot;x&quot; = Val.int 10</span></span></div></blockquote></div></small></div><span class="kd">example</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.get</var><b>: </b><span>State → Var → Val</span></span></div></blockquote></div></small></div>State.get</div><div class="alectryon-token"> [x <span class="bp">↦</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>10</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="mi">10</span></div><div class="alectryon-token">, y <span class="bp">↦</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>20</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="mi">20</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;x&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;x&quot;</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>10</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="mi">10</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>rfl</var><b>: </b><span>∀ {α : Type} {a : α}, a = a</span></span></div></blockquote></div></small></div>rfl</div><div class="alectryon-token">

</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>example</var><b>: </b><span>State.get [(&quot;x&quot;, 10), (&quot;y&quot;, 20)] &quot;x&quot; = 10</span></span></div></blockquote></div></small></div><span class="kd">example</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.get</var><b>: </b><span>State → Var → Val</span></span></div></blockquote></div></small></div>State.get</div><div class="alectryon-token"> [x <span class="bp">↦</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>10</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="mi">10</span></div><div class="alectryon-token">, y <span class="bp">↦</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>20</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="mi">20</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;x&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;x&quot;</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>10</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="mi">10</span></div><div class="alectryon-token">     := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>rfl</var><b>: </b><span>∀ {α : Type} {a : α}, a = a</span></span></div></blockquote></div></small></div>rfl</div><div class="alectryon-token">
</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>example</var><b>: </b><span>State.get [(&quot;x&quot;, 10), (&quot;y&quot;, Val.bool true)] &quot;y&quot; = Val.bool true</span></span></div></blockquote></div></small></div><span class="kd">example</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.get</var><b>: </b><span>State → Var → Val</span></span></div></blockquote></div></small></div>State.get</div><div class="alectryon-token"> [x <span class="bp">↦</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>10</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="mi">10</span></div><div class="alectryon-token">, y <span class="bp">↦</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>true</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>true</div><div class="alectryon-token">] </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;y&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;y&quot;</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>true</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>true</div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>rfl</var><b>: </b><span>∀ {α : Type} {a : α}, a = a</span></span></div></blockquote></div></small></div>rfl</div><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div>Expr.eval</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Option</var><b>: </b><span>Type → Type</span></span></div></blockquote></div></small></div>Option</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div>val</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">   <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>var</var><b>: </b><span>Var → Expr</span></span></div></blockquote></div></small></div>var</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">   <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>get</var><b>: </b><span>State → Var → Val</span></span></div></blockquote></div></small></div>get</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>bin</var><b>: </b><span>Expr → BinOp → Expr → Expr</span></span></div></blockquote></div></small></div>bin</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>lhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">lhs</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>rhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">rhs</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>lhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">lhs</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div><span class="nv">eval</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>rhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">rhs</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div><span class="nv">eval</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₁</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₂</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₂</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>BinOp → Val → Val → Option Val</span></span></div></blockquote></div></small></div>eval</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₁</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₂</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₂</span></div><div class="alectryon-token">  <span class="c1">-- BinOp.eval : BinOp → Val → Val → Option Val</span>
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Option Val</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">,       </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Option Val</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">       <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>none</var><b>: </b><span>{α : Type} → Option α</span></span></div></blockquote></div></small></div>none</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>una</var><b>: </b><span>UnaryOp → Expr → Expr</span></span></div></blockquote></div></small></div>una</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>arg</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">arg</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>arg</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">arg</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div><span class="nv">eval</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type ?u.19984} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>UnaryOp → Val → Option Val</span></span></div></blockquote></div></small></div>eval</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Option Val</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">      <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>none</var><b>: </b><span>{α : Type} → Option α</span></span></div></blockquote></div></small></div>none</div><div class="alectryon-token">


<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>evalTrue</var><b>: </b><span>Expr → State → Prop</span></span></div></blockquote></div></small></div>evalTrue</div><div class="alectryon-token">  (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Prop</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="kt">Prop</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div>eval</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div>Val.bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>true</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>true</div><div class="alectryon-token">)
<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>evalFalse</var><b>: </b><span>Expr → State → Prop</span></span></div></blockquote></div></small></div>evalFalse</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Prop</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="kt">Prop</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div>eval</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div>Val.bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>false</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>false</div><div class="alectryon-token">)

</div><div class="alectryon-token"><span class="kn">section</span></div><div class="alectryon-token">
</div><div class="alectryon-token"><span class="kd">set_option</span></div><div class="alectryon-token"> hygiene </div><div class="alectryon-token"><span class="k">false</span></div><div class="alectryon-token"> <span class="c1">-- HACK: allow forward reference in notation</span>
</div><div class="alectryon-token"><span class="kn">local</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="kd">notation</span></div><div class="alectryon-token">:<span class="mi">60</span> <span class="s2">&quot;(&quot;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="s2">&quot;, &quot;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> <span class="s2">&quot;)&quot;</span>  <span class="s2">&quot; ⇓ &quot;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token">:<span class="mi">60</span> <span class="bp">=&gt;</span> Bigstep </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">inductive</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep</var><b>: </b><span>State → Stmt → State → Prop</span></span></div></blockquote></div></small></div>Bigstep</div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Stmt</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Prop</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="kt">Prop</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>skip</var><b>: </b><span>∀ {σ : State}, _root_.Bigstep σ Stmt.skip σ</span></span></div></blockquote></div></small></div>skip</div><div class="alectryon-token">       : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.skip</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="bp">.</span>skip</div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assign</var><b>: </b><span>∀ {v : Val} {σ : State} {x : Var} {e : Expr}, Expr.eval σ e = some v → _root_.Bigstep σ (x ::= e) (State.update σ x v)</span></span></div></blockquote></div></small></div>assign</div><div class="alectryon-token">     : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div>eval</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">,  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> ::= </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>update</var><b>: </b><span>State → Var → Val → State</span></span></div></blockquote></div></small></div>update</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>seq</var><b>: </b><span>∀ {σ₁ : State} {s₁ : Stmt} {σ₂ : State} {s₂ : Stmt} {σ₃ : State},
  _root_.Bigstep σ₁ s₁ σ₂ → _root_.Bigstep σ₂ s₂ σ₃ → _root_.Bigstep σ₁ (s₁;; s₂) σ₃</span></span></div></blockquote></div></small></div>seq</div><div class="alectryon-token">        : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₃</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₃</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁</span></div><div class="alectryon-token"> <span class="bp">;;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₃</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₃</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ifTrue</var><b>: </b><span>∀ {c : Expr} {σ₁ : State} {t : Stmt} {σ₂ : State} {e : Stmt},
  evalTrue c σ₁ → _root_.Bigstep σ₁ t σ₂ → _root_.Bigstep σ₁ (Stmt.ite c t e) σ₂</span></span></div></blockquote></div></small></div>ifTrue</div><div class="alectryon-token">     : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>evalTrue</var><b>: </b><span>Expr → State → Prop</span></span></div></blockquote></div></small></div>evalTrue</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">t</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.ite</var><b>: </b><span>Expr → Stmt → Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="bp">.</span>ite</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">t</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ifFalse</var><b>: </b><span>∀ {c : Expr} {σ₁ : State} {e : Stmt} {σ₂ : State} {t : Stmt},
  evalFalse c σ₁ → _root_.Bigstep σ₁ e σ₂ → _root_.Bigstep σ₁ (Stmt.ite c t e) σ₂</span></span></div></blockquote></div></small></div>ifFalse</div><div class="alectryon-token">    : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>evalFalse</var><b>: </b><span>Expr → State → Prop</span></span></div></blockquote></div></small></div>evalFalse</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.ite</var><b>: </b><span>Expr → Stmt → Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="bp">.</span>ite</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">t</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>whileTrue</var><b>: </b><span>∀ {c : Expr} {σ₁ : State} {b : Stmt} {σ₂ σ₃ : State},
  evalTrue c σ₁ → _root_.Bigstep σ₁ b σ₂ → _root_.Bigstep σ₂ (Stmt.while c b) σ₃ → _root_.Bigstep σ₁ (Stmt.while c b) σ₃</span></span></div></blockquote></div></small></div>whileTrue</div><div class="alectryon-token">  : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>evalTrue</var><b>: </b><span>Expr → State → Prop</span></span></div></blockquote></div></small></div>evalTrue</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.«while»</var><b>: </b><span>Expr → Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="bp">.«</span>while<span class="bp">»</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₃</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₃</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.«while»</var><b>: </b><span>Expr → Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="bp">.«</span>while<span class="bp">»</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₃</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₃</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>whileFalse</var><b>: </b><span>∀ {c : Expr} {σ : State} {b : Stmt}, evalFalse c σ → _root_.Bigstep σ (Stmt.while c b) σ</span></span></div></blockquote></div></small></div>whileFalse</div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>evalFalse</var><b>: </b><span>Expr → State → Prop</span></span></div></blockquote></div></small></div>evalFalse</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.«while»</var><b>: </b><span>Expr → Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="bp">.«</span>while<span class="bp">»</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">end</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">notation</span></div><div class="alectryon-token">:<span class="mi">60</span> <span class="s2">&quot;(&quot;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="s2">&quot;, &quot;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> <span class="s2">&quot;)&quot;</span>  <span class="s2">&quot; ⇓ &quot;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token">:<span class="mi">60</span> <span class="bp">=&gt;</span> Bigstep </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token">

<span class="c">/-</span><span class="cm"> This proof can be automated using forward reasoning. -/</span>
</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstem.det</var><b>: </b><span>∀ {σ : State} {s : Stmt} {σ₁ σ₂ : State}, (σ, s) ⇓ σ₁ → (σ, s) ⇓ σ₂ → σ₁ = σ₂</span></span></div></blockquote></div></small></div>Bigstem.det</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₁</var><b>: </b><span>(σ, s) ⇓ σ₁</span></span></div></blockquote></div></small></div><span class="nv">h₁</span></div><div class="alectryon-token"> : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>(σ, s) ⇓ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div><div class="alectryon-token"> : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk26"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁, σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ, s) <span class="bp">⇓</span> σ₁</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ, s) <span class="bp">⇓</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ₁ <span class="bp">=</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk27"><div class="alectryon-token"><span class="k">induction</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₁</var><b>: </b><span>(σ, s) ⇓ σ₁</span></span></div></blockquote></div></small></div><span class="nv">h₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">generalizing</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁, σ✝, σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ<span class="bp">✝</span>, Stmt.skip) <span class="bp">⇓</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">skip</span></span><div class="goal-conclusion">σ<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk28" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>a✝</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ<span class="bp">✝</span>, x<span class="bp">✝</span> ::= e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk28"><hr><span class="goal-name">assign</span></label><div class="goal-conclusion">State.update σ<span class="bp">✝</span> x<span class="bp">✝</span> v<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk29" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁, σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s₁✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s₂✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, s₁<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>a✝</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>a_ih✝</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₂<span class="bp">✝</span>, s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, s₁<span class="bp">✝;;</span> s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk29"><hr><span class="goal-name">seq</span></label><div class="goal-conclusion">σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk2a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>a✝</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>a_ih✝</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, Stmt.ite c<span class="bp">✝</span> t<span class="bp">✝</span> e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk2a"><hr><span class="goal-name">ifTrue</span></label><div class="goal-conclusion">σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk2b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>a✝</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>a_ih✝</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, Stmt.ite c<span class="bp">✝</span> t<span class="bp">✝</span> e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk2b"><hr><span class="goal-name">ifFalse</span></label><div class="goal-conclusion">σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk2c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>a✝</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, Stmt.while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>a_ih✝</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₂<span class="bp">✝</span>, Stmt.while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, Stmt.while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk2c"><hr><span class="goal-name">whileTrue</span></label><div class="goal-conclusion">σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk2d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>a✝</var><span class="hyp-type"><b>: </b><span>evalFalse c<span class="bp">✝</span> σ<span class="bp">✝</span></span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ<span class="bp">✝</span>, Stmt.while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk2d"><hr><span class="goal-name">whileFalse</span></label><div class="goal-conclusion">σ<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk2e"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁, σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ, s) <span class="bp">⇓</span> σ₁</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ, s) <span class="bp">⇓</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ₁ <span class="bp">=</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk2f"><div class="alectryon-token"><span class="k">cases</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>(σ₁✝, s₁✝;; s₂✝) ⇓ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁, σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">skip.skip</span></span><div class="goal-conclusion">σ<span class="bp">✝</span> <span class="bp">=</span> σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk30"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>a✝</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>a_ih✝</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, Stmt.ite c<span class="bp">✝</span> t<span class="bp">✝</span> e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse</span></span><div class="goal-conclusion">σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk31"><div class="alectryon-token"><span class="k">simp_all</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>a✝³</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>a_ih✝</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>a✝</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifTrue.ifTrue</span></span><div class="goal-conclusion">σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk32"><div class="alectryon-token"><span class="k">case</span></div><div class="alectryon-token"> seq ih₁ ih₂ h₁ h₂ <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁, σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s₁✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝¹</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s₂✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₃✝, σ₂, σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>a✝</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝¹</span>, s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₁<span class="bp">✝</span>, s₁<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₂<span class="bp">✝¹</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₂<span class="bp">✝¹</span>, s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, s₁<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk33"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₁</var><b>: </b><span>∀ {σ₂ : State}, (σ₁✝, s₁✝) ⇓ σ₂ → σ₂✝¹ = σ₂</span></span></div></blockquote></div></small></div><span class="nv">ih₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₁</var><b>: </b><span>(σ₁✝, s₁✝) ⇓ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">h₁</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₂</var><b>: </b><span>∀ {σ₂ : State}, (σ₂✝¹, s₂✝) ⇓ σ₂ → σ₃✝ = σ₂</span></span></div></blockquote></div></small></div><span class="nv">ih₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁, σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s₁✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝¹</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s₂✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₃✝, σ₂, σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>a✝</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝¹</span>, s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₁<span class="bp">✝</span>, s₁<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₂<span class="bp">✝¹</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, s₁<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₂<span class="bp">✝</span>, s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk34"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₂</var><b>: </b><span>∀ {σ₂ : State}, (σ₂✝, s₂✝) ⇓ σ₂ → σ₃✝ = σ₂</span></span></div></blockquote></div></small></div><span class="nv">ih₂</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>(σ₂✝, s₂✝) ⇓ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk35"><div class="alectryon-token"><span class="k">case</span></div><div class="alectryon-token"> ifTrue ih _ h <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk36"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>∀ {σ₂ : State}, (σ₁✝, t✝) ⇓ σ₂ → σ₂✝ = σ₂</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>(σ₁✝, t✝) ⇓ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk37"><div class="alectryon-token"><span class="k">case</span></div><div class="alectryon-token"> ifFalse ih _ h <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk38"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>∀ {σ₂ : State}, (σ₁✝, e✝) ⇓ σ₂ → σ₂✝ = σ₂</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>(σ₁✝, e✝) ⇓ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk39"><div class="alectryon-token"><span class="k">case</span></div><div class="alectryon-token"> whileTrue ih₁ ih₂ _ h₁ h₂ <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝¹, σ₃✝, σ₂, σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝¹</span>, Stmt.while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₂<span class="bp">✝¹</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₂<span class="bp">✝¹</span>, Stmt.while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, Stmt.while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk3a"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₁</var><b>: </b><span>∀ {σ₂ : State}, (σ₁✝, b✝) ⇓ σ₂ → σ₂✝¹ = σ₂</span></span></div></blockquote></div></small></div><span class="nv">ih₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₁</var><b>: </b><span>(σ₁✝, b✝) ⇓ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">h₁</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₂</var><b>: </b><span>∀ {σ₂ : State}, (σ₂✝¹, Stmt.while c✝ b✝) ⇓ σ₂ → σ₃✝ = σ₂</span></span></div></blockquote></div></small></div><span class="nv">ih₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝¹, σ₃✝, σ₂, σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝¹</span>, Stmt.while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₂<span class="bp">✝¹</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, Stmt.while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₂<span class="bp">✝</span>, Stmt.while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk3b"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₂</var><b>: </b><span>∀ {σ₂ : State}, (σ₂✝, Stmt.while c✝ b✝) ⇓ σ₂ → σ₃✝ = σ₂</span></span></div></blockquote></div></small></div><span class="nv">ih₂</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>(σ₂✝, Stmt.while c✝ b✝) ⇓ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

</div><div class="alectryon-token"><span class="k">abbrev</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>EvalM</var><b>: </b><span>Type → Type</span></span></div></blockquote></div></small></div>EvalM</div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ExceptT</var><b>: </b><span>Type → (Type → Type) → Type → Type</span></span></div></blockquote></div></small></div>ExceptT</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>String</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>String</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>StateM</var><b>: </b><span>Type → Type → Type</span></span></div></blockquote></div></small></div>StateM</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">)

</div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>evalExpr</var><b>: </b><span>Expr → EvalM Val</span></span></div></blockquote></div></small></div>evalExpr</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>EvalM</var><b>: </b><span>Type → Type</span></span></div></blockquote></div></small></div>EvalM</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token"> := </div><div class="alectryon-token"><span class="k">do</span></div><div class="alectryon-token">
  </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div>eval</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(← get)</var><b>: </b><span>State</span></span></div></blockquote></div></small></div>(<span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>get</var><b>: </b><span>{σ : Type} → {m : Type → Type} → [self : MonadState σ m] → m σ</span></span></div></blockquote></div></small></div><span class="nv">get</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(← get)</var><b>: </b><span>State</span></span></div></blockquote></div></small></div>)</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type ?u.29452} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">return</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>none</var><b>: </b><span>{α : Type ?u.29328} → Option α</span></span></div></blockquote></div></small></div>none</div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>throw</var><b>: </b><span>{ε : Type} → {m : Type → Type} → [self : MonadExcept ε m] → {α : Type} → ε → m α</span></span></div></blockquote></div></small></div>throw</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;failed to evaluate&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;failed to evaluate&quot;</span></div><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt.eval</var><b>: </b><span>Stmt → optParam Nat 100 → EvalM Unit</span></span></div></blockquote></div></small></div>Stmt.eval</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>stmt</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">stmt</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Stmt</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fuel</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="nv">fuel</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Nat</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Nat</div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>100</var><b>: </b><span>Nat</span></span></div></blockquote></div></small></div><span class="mi">100</span></div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>EvalM</var><b>: </b><span>Type → Type</span></span></div></blockquote></div></small></div>EvalM</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Unit</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Unit</div><div class="alectryon-token"> := </div><div class="alectryon-token"><span class="k">do</span></div><div class="alectryon-token">
  </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fuel</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="nv">fuel</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>0</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="mi">0</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>throw</var><b>: </b><span>{ε : Type} → {m : Type → Type} → [self : MonadExcept ε m] → {α : Type} → ε → m α</span></span></div></blockquote></div></small></div>throw</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;out of fuel&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;out of fuel&quot;</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fuel</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="nv">fuel</span></div><div class="alectryon-token"><span class="bp">+</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>1</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="mi">1</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span>
    </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>stmt</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">stmt</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>skip</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>skip</div><div class="alectryon-token">        <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">return</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>()</var><b>: </b><span>Unit</span></span></div></blockquote></div></small></div>()</div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assign</var><b>: </b><span>Var → Expr → Stmt</span></span></div></blockquote></div></small></div>assign</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token">  <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">let</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> <span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>evalExpr</var><b>: </b><span>Expr → EvalM Val</span></span></div></blockquote></div></small></div>evalExpr</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>modify</var><b>: </b><span>{σ : Type} → {m : Type → Type} → [inst : MonadState σ m] → (σ → σ) → m PUnit</span></span></div></blockquote></div></small></div>modify</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">fun</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>update</var><b>: </b><span>State → Var → Val → State</span></span></div></blockquote></div></small></div>update</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>seq</var><b>: </b><span>Stmt → Stmt → Stmt</span></span></div></blockquote></div></small></div>seq</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂</span></div><div class="alectryon-token">   <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>Stmt → optParam Nat 100 → EvalM Unit</span></span></div></blockquote></div></small></div><span class="nv">eval</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fuel</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="nv">fuel</span></div><div class="alectryon-token"><span class="bp">;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>Stmt → optParam Nat 100 → EvalM Unit</span></span></div></blockquote></div></small></div><span class="nv">eval</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fuel</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="nv">fuel</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ite</var><b>: </b><span>Expr → Stmt → Stmt → Stmt</span></span></div></blockquote></div></small></div>ite</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">t</span></div><div class="alectryon-token">   <span class="bp">=&gt;</span>
      </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(← evalExpr c)</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div>(<span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>evalExpr</var><b>: </b><span>Expr → EvalM Val</span></span></div></blockquote></div></small></div><span class="nv">evalExpr</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(← evalExpr c)</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(← evalExpr c)</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div>)</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
      <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>true</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>true</div><div class="alectryon-token">  <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>Stmt → optParam Nat 100 → EvalM Unit</span></span></div></blockquote></div></small></div><span class="nv">eval</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fuel</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="nv">fuel</span></div><div class="alectryon-token">
      <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>false</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>false</div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">t</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>Stmt → optParam Nat 100 → EvalM Unit</span></span></div></blockquote></div></small></div><span class="nv">eval</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fuel</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="nv">fuel</span></div><div class="alectryon-token">
      <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>throw</var><b>: </b><span>{ε : Type} → {m : Type → Type} → [self : MonadExcept ε m] → {α : Type} → ε → m α</span></span></div></blockquote></div></small></div>throw</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;Boolean expected&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;Boolean expected&quot;</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>«while»</var><b>: </b><span>Expr → Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="bp">«</span>while<span class="bp">»</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span>
      </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(← evalExpr c)</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div>(<span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>evalExpr</var><b>: </b><span>Expr → EvalM Val</span></span></div></blockquote></div></small></div><span class="nv">evalExpr</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(← evalExpr c)</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(← evalExpr c)</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div>)</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
      <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>true</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>true</div><div class="alectryon-token">  <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>Stmt → optParam Nat 100 → EvalM Unit</span></span></div></blockquote></div></small></div><span class="nv">eval</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fuel</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="nv">fuel</span></div><div class="alectryon-token"><span class="bp">;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>stmt</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">stmt</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>Stmt → optParam Nat 100 → EvalM Unit</span></span></div></blockquote></div></small></div><span class="nv">eval</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fuel</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="nv">fuel</span></div><div class="alectryon-token">
      <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>false</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>false</div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">return</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>()</var><b>: </b><span>Unit</span></span></div></blockquote></div></small></div>()</div><div class="alectryon-token">
      <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>throw</var><b>: </b><span>{ε : Type} → {m : Type → Type} → [self : MonadExcept ε m] → {α : Type} → ε → m α</span></span></div></blockquote></div></small></div>throw</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;Boolean expected&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;Boolean expected&quot;</span></div><div class="alectryon-token">

</div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk3c"><div class="alectryon-token"><span class="k">#eval</span></div></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">(Except.ok (), [(<span class="s2">&quot;x&quot;</span>, Val.int <span class="mi">8</span>), (<span class="s2">&quot;y&quot;</span>, Val.int <span class="mi">5</span>)])
</blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> <span class="bp">`</span>[Stmt<span class="bp">|</span> x := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>3</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">3</span></div><div class="alectryon-token"><span class="bp">;</span> y := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>5</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">5</span></div><div class="alectryon-token"><span class="bp">;</span> x := x <span class="bp">+</span> y<span class="bp">;</span>]<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>Stmt → optParam Nat 100 → EvalM Unit</span></span></div></blockquote></div></small></div><span class="na">eval</span></div><div class="alectryon-token"> <span class="bp">|&gt;.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>run</var><b>: </b><span>{ε : Type} → {m : Type → Type} → {α : Type} → ExceptT ε m α → m (Except ε α)</span></span></div></blockquote></div></small></div>run</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>{}</var><b>: </b><span>State</span></span></div></blockquote></div></small></div>{}</div><div class="alectryon-token">
</div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk3d"><div class="alectryon-token"><span class="k">#eval</span></div></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">(Except.error <span class="s2">&quot;out of fuel&quot;</span>, [(<span class="s2">&quot;x&quot;</span>, Val.int <span class="mi">98</span>)])
</blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> <span class="bp">`</span>[Stmt<span class="bp">|</span> x := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>0</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">0</span></div><div class="alectryon-token"><span class="bp">;</span> </div><div class="alectryon-token"><span class="k">while</span></div><div class="alectryon-token"> (true) { x := x <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>1</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">1</span></div><div class="alectryon-token"><span class="bp">;</span> }]<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>Stmt → optParam Nat 100 → EvalM Unit</span></span></div></blockquote></div></small></div><span class="na">eval</span></div><div class="alectryon-token"> <span class="bp">|&gt;.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>run</var><b>: </b><span>{ε : Type} → {m : Type → Type} → {α : Type} → ExceptT ε m α → m (Except ε α)</span></span></div></blockquote></div></small></div>run</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>{}</var><b>: </b><span>State</span></span></div></blockquote></div></small></div>{}</div><div class="alectryon-token">

</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>instance</var><b>: </b><span>Repr State</span></span></div></blockquote></div></small></div><span class="kd">instance</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Repr</var><b>: </b><span>Type → Type</span></span></div></blockquote></div></small></div>Repr</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  reprPrec </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>n</var><b>: </b><span>Nat</span></span></div></blockquote></div></small></div><span class="nv">n</span></div><div class="alectryon-token"> :=
    </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>n</var><b>: </b><span>Nat</span></span></div></blockquote></div></small></div><span class="nv">n</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
    <span class="bp">|</span> [], </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Nat</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;[]&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;[]&quot;</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>as</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">as</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Nat</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token"> <span class="bp">=&gt;</span>
      </div><div class="alectryon-token"><span class="k">let</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fs</var><b>: </b><span>List Std.Format</span></span></div></blockquote></div></small></div><span class="nv">fs</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>as</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">as</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>map</var><b>: </b><span>{α β : Type} → (α → β) → List α → List β</span></span></div></blockquote></div></small></div>map</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">fun</span></div><div class="alectryon-token">
        <span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">)  <span class="bp">=&gt;</span> </div><div class="alectryon-token">f<span class="bp">!</span></div><div class="alectryon-token"><span class="s2">&quot;{</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">} <span class="bp">↦</span> {</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">}<span class="s2">&quot;</span>
<span class="s2">        | (</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) <span class="bp">=&gt;</span> </div><div class="alectryon-token">f<span class="bp">!</span></div><div class="alectryon-token"><span class="s2">&quot;{</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">} <span class="bp">↦</span> {</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">}<span class="s2">&quot;</span>
      </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Std.Format.bracket</var><b>: </b><span>String → Std.Format → String → Std.Format</span></span></div></blockquote></div></small></div>Std.Format.bracket</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;[&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;[&quot;</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Std.Format.joinSep</var><b>: </b><span>{α : Type} → [inst : Std.ToFormat α] → List α → Std.Format → Std.Format</span></span></div></blockquote></div></small></div>Std.Format.joinSep</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fs</var><b>: </b><span>List Std.Format</span></span></div></blockquote></div></small></div><span class="nv">fs</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;,&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;,&quot;</span></div><div class="alectryon-token"> <span class="bp">++</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Std.Format.line</var><b>: </b><span>Std.Format</span></span></div></blockquote></div></small></div>Std.Format.line</div><div class="alectryon-token">)) </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;]&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;]&quot;</span></div><div class="alectryon-token">

</div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk3e"><div class="alectryon-token"><span class="k">#eval</span></div></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">(Except.ok (), [x <span class="bp">↦</span> <span class="mi">8</span>, y <span class="bp">↦</span> <span class="mi">5</span>])
</blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> <span class="bp">`</span>[Stmt<span class="bp">|</span> x := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>3</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">3</span></div><div class="alectryon-token"><span class="bp">;</span> y := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>5</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">5</span></div><div class="alectryon-token"><span class="bp">;</span> x := x <span class="bp">+</span> y<span class="bp">;</span> ]<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>Stmt → optParam Nat 100 → EvalM Unit</span></span></div></blockquote></div></small></div><span class="na">eval</span></div><div class="alectryon-token"> <span class="bp">|&gt;.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>run</var><b>: </b><span>{ε : Type} → {m : Type → Type} → {α : Type} → ExceptT ε m α → m (Except ε α)</span></span></div></blockquote></div></small></div>run</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>{}</var><b>: </b><span>State</span></span></div></blockquote></div></small></div>{}</div><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>BinOp.simplify</var><b>: </b><span>BinOp → Expr → Expr → Expr</span></span></div></blockquote></div></small></div>BinOp.simplify</div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>BinOp</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>BinOp</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.eq</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>eq</div><div class="alectryon-token">,  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₁</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₁</span></div><div class="alectryon-token">,  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token">  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₂</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₂</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₁</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₁</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₂</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₂</span></div><div class="alectryon-token">))
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.and</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>and</div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token">), </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">) <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token"> <span class="bp">&amp;&amp;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">))
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.lt</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>lt</div><div class="alectryon-token">,  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token">),  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">)  <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token"> <span class="bp">&lt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">))
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.add</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>add</div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token">), </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">) <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token"> <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">))
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.sub</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>sub</div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token">), </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">) <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token"> <span class="bp">-</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">))
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bin</var><b>: </b><span>Expr → BinOp → Expr → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>bin</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>UnaryOp.simplify</var><b>: </b><span>UnaryOp → Expr → Expr</span></span></div></blockquote></div></small></div>UnaryOp.simplify</div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>UnaryOp</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>UnaryOp</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.not</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>not</div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">) <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> <span class="bp">!</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.una</var><b>: </b><span>UnaryOp → Expr → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>una</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.simplify</var><b>: </b><span>Expr → Expr</span></span></div></blockquote></div></small></div>Expr.simplify</div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>bin</var><b>: </b><span>Expr → BinOp → Expr → Expr</span></span></div></blockquote></div></small></div>bin</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>lhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">lhs</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>rhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">rhs</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>BinOp → Expr → Expr → Expr</span></span></div></blockquote></div></small></div>simplify</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>lhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">lhs</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Expr → Expr</span></span></div></blockquote></div></small></div><span class="nv">simplify</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>rhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">rhs</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Expr → Expr</span></span></div></blockquote></div></small></div><span class="nv">simplify</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>una</var><b>: </b><span>UnaryOp → Expr → Expr</span></span></div></blockquote></div></small></div>una</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>arg</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">arg</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>UnaryOp → Expr → Expr</span></span></div></blockquote></div></small></div>simplify</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>arg</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">arg</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Expr → Expr</span></span></div></blockquote></div></small></div><span class="nv">simplify</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.eval_simplify</var><b>: </b><span>∀ {σ : State} (e : Expr), eval σ (simplify e) = eval σ e</span></span></div></blockquote></div></small></div>Expr.eval_simplify</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Expr → Expr</span></span></div></blockquote></div></small></div>simplify</div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div>eval</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div>eval</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk3f"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eval σ (simplify e) <span class="bp">=</span> eval σ e</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk40"><div class="alectryon-token"><span class="k">induction</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eval σ (simplify e) <span class="bp">=</span> eval σ e</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk41"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk42"><div class="alectryon-token"><span class="bp">|</span> bin lhs op rhs ih_lhs ih_rhs <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>lhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>BinOp</span></span></span><br><span><var>rhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_lhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify lhs) <span class="bp">=</span> eval σ lhs</span></span></span><br><span><var>ih_rhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify rhs) <span class="bp">=</span> eval σ rhs</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">bin</span></span><div class="goal-conclusion">eval σ
    (<span class="k">match</span> op, simplify lhs, simplify rhs <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, val v₁, val v₂ <span class="bp">=&gt;</span> val (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, val (Val.bool a), val (Val.bool b) <span class="bp">=&gt;</span> val (Val.bool (a <span class="bp">&amp;&amp;</span> b))
    <span class="bp">|</span> BinOp.lt, val (Val.int a), val (Val.int b) <span class="bp">=&gt;</span> val (Val.bool (decide (a <span class="bp">&lt;</span> b)))
    <span class="bp">|</span> BinOp.add, val (Val.int a), val (Val.int b) <span class="bp">=&gt;</span> val (Val.int (a <span class="bp">+</span> b))
    <span class="bp">|</span> BinOp.sub, val (Val.int a), val (Val.int b) <span class="bp">=&gt;</span> val (Val.int (a <span class="bp">-</span> b))
    <span class="bp">|</span> op, a, b <span class="bp">=&gt;</span> bin a op b) <span class="bp">=</span>
  <span class="k">match</span> eval σ lhs, eval σ rhs <span class="k">with</span>
  <span class="bp">|</span> some v₁, some v₂ <span class="bp">=&gt;</span>
    <span class="k">match</span> op, v₁, v₂ <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, v₁, v₂ <span class="bp">=&gt;</span> some (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, Val.bool b₁, Val.bool b₂ <span class="bp">=&gt;</span> some (Val.bool (b₁ <span class="bp">&amp;&amp;</span> b₂))
    <span class="bp">|</span> BinOp.lt, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.bool (decide (i₁ <span class="bp">&lt;</span> i₂)))
    <span class="bp">|</span> BinOp.add, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">+</span> i₂))
    <span class="bp">|</span> BinOp.sub, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">-</span> i₂))
    <span class="bp">|</span> x, x_1, x_2 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk43"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih_lhs</var><b>: </b><span>eval σ (simplify lhs) = eval σ lhs</span></span></div></blockquote></div></small></div><span class="nv">ih_lhs</span></div><div class="alectryon-token">, <span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih_rhs</var><b>: </b><span>eval σ (simplify rhs) = eval σ rhs</span></span></div></blockquote></div></small></div><span class="nv">ih_rhs</span></div><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>lhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>BinOp</span></span></span><br><span><var>rhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_lhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify lhs) <span class="bp">=</span> eval σ lhs</span></span></span><br><span><var>ih_rhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify rhs) <span class="bp">=</span> eval σ rhs</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">bin</span></span><div class="goal-conclusion">eval σ
    (<span class="k">match</span> op, simplify lhs, simplify rhs <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, val v₁, val v₂ <span class="bp">=&gt;</span> val (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, val (Val.bool a), val (Val.bool b) <span class="bp">=&gt;</span> val (Val.bool (a <span class="bp">&amp;&amp;</span> b))
    <span class="bp">|</span> BinOp.lt, val (Val.int a), val (Val.int b) <span class="bp">=&gt;</span> val (Val.bool (decide (a <span class="bp">&lt;</span> b)))
    <span class="bp">|</span> BinOp.add, val (Val.int a), val (Val.int b) <span class="bp">=&gt;</span> val (Val.int (a <span class="bp">+</span> b))
    <span class="bp">|</span> BinOp.sub, val (Val.int a), val (Val.int b) <span class="bp">=&gt;</span> val (Val.int (a <span class="bp">-</span> b))
    <span class="bp">|</span> op, a, b <span class="bp">=&gt;</span> bin a op b) <span class="bp">=</span>
  <span class="k">match</span> eval σ (simplify lhs), eval σ (simplify rhs) <span class="k">with</span>
  <span class="bp">|</span> some v₁, some v₂ <span class="bp">=&gt;</span>
    <span class="k">match</span> op, v₁, v₂ <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, v₁, v₂ <span class="bp">=&gt;</span> some (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, Val.bool b₁, Val.bool b₂ <span class="bp">=&gt;</span> some (Val.bool (b₁ <span class="bp">&amp;&amp;</span> b₂))
    <span class="bp">|</span> BinOp.lt, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.bool (decide (i₁ <span class="bp">&lt;</span> i₂)))
    <span class="bp">|</span> BinOp.add, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">+</span> i₂))
    <span class="bp">|</span> BinOp.sub, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">-</span> i₂))
    <span class="bp">|</span> x, x_1, x_2 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk44"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>lhs, rhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_lhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify lhs) <span class="bp">=</span> eval σ lhs</span></span></span><br><span><var>ih_rhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify rhs) <span class="bp">=</span> eval σ rhs</span></span></span><br><span><var>v₁✝, v₂✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">bin.h_1</span></span><div class="goal-conclusion">eval σ (val (Val.bool (decide (v₁<span class="bp">✝</span> <span class="bp">=</span> v₂<span class="bp">✝</span>)))) <span class="bp">=</span>
  <span class="k">match</span> eval σ (val v₁<span class="bp">✝</span>), eval σ (val v₂<span class="bp">✝</span>) <span class="k">with</span>
  <span class="bp">|</span> some v₁, some v₂ <span class="bp">=&gt;</span>
    <span class="k">match</span> BinOp.eq, v₁, v₂ <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, v₁, v₂ <span class="bp">=&gt;</span> some (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, Val.bool b₁, Val.bool b₂ <span class="bp">=&gt;</span> some (Val.bool (b₁ <span class="bp">&amp;&amp;</span> b₂))
    <span class="bp">|</span> BinOp.lt, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.bool (decide (i₁ <span class="bp">&lt;</span> i₂)))
    <span class="bp">|</span> BinOp.add, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">+</span> i₂))
    <span class="bp">|</span> BinOp.sub, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">-</span> i₂))
    <span class="bp">|</span> x, x_1, x_2 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk45" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>lhs, rhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_lhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify lhs) <span class="bp">=</span> eval σ lhs</span></span></span><br><span><var>ih_rhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify rhs) <span class="bp">=</span> eval σ rhs</span></span></span><br><span><var>a✝, b✝</var><span class="hyp-type"><b>: </b><span>Bool</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk45"><hr><span class="goal-name">bin.h_2</span></label><div class="goal-conclusion">eval σ (val (Val.bool (a<span class="bp">✝</span> <span class="bp">&amp;&amp;</span> b<span class="bp">✝</span>))) <span class="bp">=</span>
  <span class="k">match</span> eval σ (val (Val.bool a<span class="bp">✝</span>)), eval σ (val (Val.bool b<span class="bp">✝</span>)) <span class="k">with</span>
  <span class="bp">|</span> some v₁, some v₂ <span class="bp">=&gt;</span>
    <span class="k">match</span> BinOp.and, v₁, v₂ <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, v₁, v₂ <span class="bp">=&gt;</span> some (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, Val.bool b₁, Val.bool b₂ <span class="bp">=&gt;</span> some (Val.bool (b₁ <span class="bp">&amp;&amp;</span> b₂))
    <span class="bp">|</span> BinOp.lt, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.bool (decide (i₁ <span class="bp">&lt;</span> i₂)))
    <span class="bp">|</span> BinOp.add, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">+</span> i₂))
    <span class="bp">|</span> BinOp.sub, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">-</span> i₂))
    <span class="bp">|</span> x, x_1, x_2 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none</div></blockquote><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk46" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>lhs, rhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_lhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify lhs) <span class="bp">=</span> eval σ lhs</span></span></span><br><span><var>ih_rhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify rhs) <span class="bp">=</span> eval σ rhs</span></span></span><br><span><var>a✝, b✝</var><span class="hyp-type"><b>: </b><span>Int</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk46"><hr><span class="goal-name">bin.h_3</span></label><div class="goal-conclusion">eval σ (val (Val.bool (decide (a<span class="bp">✝</span> <span class="bp">&lt;</span> b<span class="bp">✝</span>)))) <span class="bp">=</span>
  <span class="k">match</span> eval σ (val (Val.int a<span class="bp">✝</span>)), eval σ (val (Val.int b<span class="bp">✝</span>)) <span class="k">with</span>
  <span class="bp">|</span> some v₁, some v₂ <span class="bp">=&gt;</span>
    <span class="k">match</span> BinOp.lt, v₁, v₂ <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, v₁, v₂ <span class="bp">=&gt;</span> some (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, Val.bool b₁, Val.bool b₂ <span class="bp">=&gt;</span> some (Val.bool (b₁ <span class="bp">&amp;&amp;</span> b₂))
    <span class="bp">|</span> BinOp.lt, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.bool (decide (i₁ <span class="bp">&lt;</span> i₂)))
    <span class="bp">|</span> BinOp.add, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">+</span> i₂))
    <span class="bp">|</span> BinOp.sub, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">-</span> i₂))
    <span class="bp">|</span> x, x_1, x_2 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none</div></blockquote><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk47" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>lhs, rhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_lhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify lhs) <span class="bp">=</span> eval σ lhs</span></span></span><br><span><var>ih_rhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify rhs) <span class="bp">=</span> eval σ rhs</span></span></span><br><span><var>a✝, b✝</var><span class="hyp-type"><b>: </b><span>Int</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk47"><hr><span class="goal-name">bin.h_4</span></label><div class="goal-conclusion">eval σ (val (Val.int (a<span class="bp">✝</span> <span class="bp">+</span> b<span class="bp">✝</span>))) <span class="bp">=</span>
  <span class="k">match</span> eval σ (val (Val.int a<span class="bp">✝</span>)), eval σ (val (Val.int b<span class="bp">✝</span>)) <span class="k">with</span>
  <span class="bp">|</span> some v₁, some v₂ <span class="bp">=&gt;</span>
    <span class="k">match</span> BinOp.add, v₁, v₂ <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, v₁, v₂ <span class="bp">=&gt;</span> some (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, Val.bool b₁, Val.bool b₂ <span class="bp">=&gt;</span> some (Val.bool (b₁ <span class="bp">&amp;&amp;</span> b₂))
    <span class="bp">|</span> BinOp.lt, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.bool (decide (i₁ <span class="bp">&lt;</span> i₂)))
    <span class="bp">|</span> BinOp.add, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">+</span> i₂))
    <span class="bp">|</span> BinOp.sub, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">-</span> i₂))
    <span class="bp">|</span> x, x_1, x_2 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none</div></blockquote><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk48" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>lhs, rhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_lhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify lhs) <span class="bp">=</span> eval σ lhs</span></span></span><br><span><var>ih_rhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify rhs) <span class="bp">=</span> eval σ rhs</span></span></span><br><span><var>a✝, b✝</var><span class="hyp-type"><b>: </b><span>Int</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk48"><hr><span class="goal-name">bin.h_5</span></label><div class="goal-conclusion">eval σ (val (Val.int (a<span class="bp">✝</span> <span class="bp">-</span> b<span class="bp">✝</span>))) <span class="bp">=</span>
  <span class="k">match</span> eval σ (val (Val.int a<span class="bp">✝</span>)), eval σ (val (Val.int b<span class="bp">✝</span>)) <span class="k">with</span>
  <span class="bp">|</span> some v₁, some v₂ <span class="bp">=&gt;</span>
    <span class="k">match</span> BinOp.sub, v₁, v₂ <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, v₁, v₂ <span class="bp">=&gt;</span> some (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, Val.bool b₁, Val.bool b₂ <span class="bp">=&gt;</span> some (Val.bool (b₁ <span class="bp">&amp;&amp;</span> b₂))
    <span class="bp">|</span> BinOp.lt, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.bool (decide (i₁ <span class="bp">&lt;</span> i₂)))
    <span class="bp">|</span> BinOp.add, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">+</span> i₂))
    <span class="bp">|</span> BinOp.sub, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">-</span> i₂))
    <span class="bp">|</span> x, x_1, x_2 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none</div></blockquote><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk49" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>lhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>BinOp</span></span></span><br><span><var>rhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_lhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify lhs) <span class="bp">=</span> eval σ lhs</span></span></span><br><span><var>ih_rhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify rhs) <span class="bp">=</span> eval σ rhs</span></span></span><br><span><var>x✝⁹, x✝⁸</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk49"><hr><span class="goal-name">bin.h_6</span></label><div class="goal-conclusion">eval σ (bin x<span class="bp">✝⁹</span> op x<span class="bp">✝⁸</span>) <span class="bp">=</span>
  <span class="k">match</span> eval σ x<span class="bp">✝⁹</span>, eval σ x<span class="bp">✝⁸</span> <span class="k">with</span>
  <span class="bp">|</span> some v₁, some v₂ <span class="bp">=&gt;</span>
    <span class="k">match</span> op, v₁, v₂ <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, v₁, v₂ <span class="bp">=&gt;</span> some (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, Val.bool b₁, Val.bool b₂ <span class="bp">=&gt;</span> some (Val.bool (b₁ <span class="bp">&amp;&amp;</span> b₂))
    <span class="bp">|</span> BinOp.lt, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.bool (decide (i₁ <span class="bp">&lt;</span> i₂)))
    <span class="bp">|</span> BinOp.add, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">+</span> i₂))
    <span class="bp">|</span> BinOp.sub, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">-</span> i₂))
    <span class="bp">|</span> x, x_1, x_2 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk4a"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>lhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>BinOp</span></span></span><br><span><var>rhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_lhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify lhs) <span class="bp">=</span> eval σ lhs</span></span></span><br><span><var>ih_rhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify rhs) <span class="bp">=</span> eval σ rhs</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">bin</span></span><div class="goal-conclusion">eval σ
    (<span class="k">match</span> op, simplify lhs, simplify rhs <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, val v₁, val v₂ <span class="bp">=&gt;</span> val (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, val (Val.bool a), val (Val.bool b) <span class="bp">=&gt;</span> val (Val.bool (a <span class="bp">&amp;&amp;</span> b))
    <span class="bp">|</span> BinOp.lt, val (Val.int a), val (Val.int b) <span class="bp">=&gt;</span> val (Val.bool (decide (a <span class="bp">&lt;</span> b)))
    <span class="bp">|</span> BinOp.add, val (Val.int a), val (Val.int b) <span class="bp">=&gt;</span> val (Val.int (a <span class="bp">+</span> b))
    <span class="bp">|</span> BinOp.sub, val (Val.int a), val (Val.int b) <span class="bp">=&gt;</span> val (Val.int (a <span class="bp">-</span> b))
    <span class="bp">|</span> op, a, b <span class="bp">=&gt;</span> bin a op b) <span class="bp">=</span>
  <span class="k">match</span> eval σ (simplify lhs), eval σ (simplify rhs) <span class="k">with</span>
  <span class="bp">|</span> some v₁, some v₂ <span class="bp">=&gt;</span>
    <span class="k">match</span> op, v₁, v₂ <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, v₁, v₂ <span class="bp">=&gt;</span> some (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, Val.bool b₁, Val.bool b₂ <span class="bp">=&gt;</span> some (Val.bool (b₁ <span class="bp">&amp;&amp;</span> b₂))
    <span class="bp">|</span> BinOp.lt, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.bool (decide (i₁ <span class="bp">&lt;</span> i₂)))
    <span class="bp">|</span> BinOp.add, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">+</span> i₂))
    <span class="bp">|</span> BinOp.sub, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">-</span> i₂))
    <span class="bp">|</span> x, x_1, x_2 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk4b"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk4c"><div class="alectryon-token"><span class="bp">|</span> una op arg ih_arg <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>UnaryOp</span></span></span><br><span><var>arg</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_arg</var><span class="hyp-type"><b>: </b><span>eval σ (simplify arg) <span class="bp">=</span> eval σ arg</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">una</span></span><div class="goal-conclusion">eval σ
    (<span class="k">match</span> op, simplify arg <span class="k">with</span>
    <span class="bp">|</span> UnaryOp.not, val (Val.bool b) <span class="bp">=&gt;</span> val (Val.bool <span class="bp">!</span>b)
    <span class="bp">|</span> op, a <span class="bp">=&gt;</span> una op a) <span class="bp">=</span>
  <span class="k">match</span> eval σ arg <span class="k">with</span>
  <span class="bp">|</span> some v <span class="bp">=&gt;</span>
    <span class="k">match</span> op, v <span class="k">with</span>
    <span class="bp">|</span> UnaryOp.not, Val.bool b <span class="bp">=&gt;</span> some (Val.bool <span class="bp">!</span>b)
    <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x <span class="bp">=&gt;</span> none</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk4d"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih_arg</var><b>: </b><span>eval σ (simplify arg) = eval σ arg</span></span></div></blockquote></div></small></div><span class="nv">ih_arg</span></div><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>UnaryOp</span></span></span><br><span><var>arg</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_arg</var><span class="hyp-type"><b>: </b><span>eval σ (simplify arg) <span class="bp">=</span> eval σ arg</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">una</span></span><div class="goal-conclusion">eval σ
    (<span class="k">match</span> op, simplify arg <span class="k">with</span>
    <span class="bp">|</span> UnaryOp.not, val (Val.bool b) <span class="bp">=&gt;</span> val (Val.bool <span class="bp">!</span>b)
    <span class="bp">|</span> op, a <span class="bp">=&gt;</span> una op a) <span class="bp">=</span>
  <span class="k">match</span> eval σ (simplify arg) <span class="k">with</span>
  <span class="bp">|</span> some v <span class="bp">=&gt;</span>
    <span class="k">match</span> op, v <span class="k">with</span>
    <span class="bp">|</span> UnaryOp.not, Val.bool b <span class="bp">=&gt;</span> some (Val.bool <span class="bp">!</span>b)
    <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x <span class="bp">=&gt;</span> none</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk4e"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>arg</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_arg</var><span class="hyp-type"><b>: </b><span>eval σ (simplify arg) <span class="bp">=</span> eval σ arg</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Bool</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">una.h_1</span></span><div class="goal-conclusion">eval σ (val (Val.bool <span class="bp">!</span>b<span class="bp">✝</span>)) <span class="bp">=</span>
  <span class="k">match</span> eval σ (val (Val.bool b<span class="bp">✝</span>)) <span class="k">with</span>
  <span class="bp">|</span> some v <span class="bp">=&gt;</span>
    <span class="k">match</span> UnaryOp.not, v <span class="k">with</span>
    <span class="bp">|</span> UnaryOp.not, Val.bool b <span class="bp">=&gt;</span> some (Val.bool <span class="bp">!</span>b)
    <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x <span class="bp">=&gt;</span> none</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk4f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>UnaryOp</span></span></span><br><span><var>arg</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_arg</var><span class="hyp-type"><b>: </b><span>eval σ (simplify arg) <span class="bp">=</span> eval σ arg</span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk4f"><hr><span class="goal-name">una.h_2</span></label><div class="goal-conclusion">eval σ (una op x<span class="bp">✝³</span>) <span class="bp">=</span>
  <span class="k">match</span> eval σ x<span class="bp">✝³</span> <span class="k">with</span>
  <span class="bp">|</span> some v <span class="bp">=&gt;</span>
    <span class="k">match</span> op, v <span class="k">with</span>
    <span class="bp">|</span> UnaryOp.not, Val.bool b <span class="bp">=&gt;</span> some (Val.bool <span class="bp">!</span>b)
    <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x <span class="bp">=&gt;</span> none</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk50"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>UnaryOp</span></span></span><br><span><var>arg</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_arg</var><span class="hyp-type"><b>: </b><span>eval σ (simplify arg) <span class="bp">=</span> eval σ arg</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">una</span></span><div class="goal-conclusion">eval σ
    (<span class="k">match</span> op, simplify arg <span class="k">with</span>
    <span class="bp">|</span> UnaryOp.not, val (Val.bool b) <span class="bp">=&gt;</span> val (Val.bool <span class="bp">!</span>b)
    <span class="bp">|</span> op, a <span class="bp">=&gt;</span> una op a) <span class="bp">=</span>
  <span class="k">match</span> eval σ (simplify arg) <span class="k">with</span>
  <span class="bp">|</span> some v <span class="bp">=&gt;</span>
    <span class="k">match</span> op, v <span class="k">with</span>
    <span class="bp">|</span> UnaryOp.not, Val.bool b <span class="bp">=&gt;</span> some (Val.bool <span class="bp">!</span>b)
    <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x <span class="bp">=&gt;</span> none</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk51"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt.simplify</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div>Stmt.simplify</div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Stmt</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Stmt</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>skip</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>skip</div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>skip</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>skip</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assign</var><b>: </b><span>Var → Expr → Stmt</span></span></div></blockquote></div></small></div>assign</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assign</var><b>: </b><span>Var → Expr → Stmt</span></span></div></blockquote></div></small></div>assign</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Expr → Expr</span></span></div></blockquote></div></small></div>simplify</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>seq</var><b>: </b><span>Stmt → Stmt → Stmt</span></span></div></blockquote></div></small></div>seq</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>seq</var><b>: </b><span>Stmt → Stmt → Stmt</span></span></div></blockquote></div></small></div>seq</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="nv">simplify</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="nv">simplify</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ite</var><b>: </b><span>Expr → Stmt → Stmt → Stmt</span></span></div></blockquote></div></small></div>ite</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">t</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span>
    </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Expr → Expr</span></span></div></blockquote></div></small></div>simplify</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>true</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>true</div><div class="alectryon-token">) <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="nv">simplify</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>false</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>false</div><div class="alectryon-token">) <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">t</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="nv">simplify</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c'</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c&#39;</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ite</var><b>: </b><span>Expr → Stmt → Stmt → Stmt</span></span></div></blockquote></div></small></div>ite</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c'</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c&#39;</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="nv">simplify</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">t</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="nv">simplify</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>«while»</var><b>: </b><span>Expr → Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="bp">«</span>while<span class="bp">»</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span>
    </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Expr → Expr</span></span></div></blockquote></div></small></div>simplify</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>false</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>false</div><div class="alectryon-token">) <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>skip</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>skip</div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c'</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c&#39;</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>«while»</var><b>: </b><span>Expr → Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="bp">«</span>while<span class="bp">»</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c'</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c&#39;</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="nv">simplify</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>example3</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>example3</div><div class="alectryon-token"> := <span class="bp">`</span>[Stmt<span class="bp">|</span>
  </div><div class="alectryon-token"><span class="k">if</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>1</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">1</span></div><div class="alectryon-token"> <span class="bp">&lt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>2</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">2</span></div><div class="alectryon-token"> <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>3</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">3</span></div><div class="alectryon-token">) {
    x := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>3</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">3</span></div><div class="alectryon-token"> <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>1</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">1</span></div><div class="alectryon-token"><span class="bp">;</span>
    y := y <span class="bp">+</span> x<span class="bp">;</span>
  } </div><div class="alectryon-token"><span class="k">else</span></div><div class="alectryon-token"> {
    y := y <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>3</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">3</span></div><div class="alectryon-token"><span class="bp">;</span>
  }
]

</div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk52"><div class="alectryon-token"><span class="k">#eval</span></div></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">Stmt.seq (Stmt.assign <span class="s2">&quot;x&quot;</span> (Expr.val (Val.int <span class="mi">4</span>))) (Stmt.assign <span class="s2">&quot;y&quot;</span> (Expr.bin (Expr.var <span class="s2">&quot;y&quot;</span>) (BinOp.add) (Expr.var <span class="s2">&quot;x&quot;</span>)))
</blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>example3</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>example3</div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div>simplify</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt.simplify_correct</var><b>: </b><span>∀ {σ : State} {s : Stmt} {σ' : State}, (σ, s) ⇓ σ' → (σ, simplify s) ⇓ σ'</span></span></div></blockquote></div></small></div>Stmt.simplify_correct</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>(σ, s) ⇓ σ'</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token">) : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div>simplify</div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk53"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ, s) <span class="bp">⇓</span> σ&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ, simplify s) <span class="bp">⇓</span> σ&#39;</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk54"><div class="alectryon-token"><span class="k">induction</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>(σ, s) ⇓ σ'</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ, s) <span class="bp">⇓</span> σ&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ, simplify s) <span class="bp">⇓</span> σ&#39;</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk55"><div class="alectryon-token"><span class="k">simp_all</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ', σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">skip</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk56"><div class="alectryon-token"><span class="bp">|</span> skip <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ', σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">skip</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk57"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.skip</var><b>: </b><span>∀ {σ : State}, (σ, skip) ⇓ σ</span></span></div></blockquote></div></small></div>Bigstep.skip</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk58"><div class="alectryon-token"><span class="bp">|</span> seq h₁ h₂ ih₁ ih₂ <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ', σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s₁✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s₂✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, s₁<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify s₁<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, simplify s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">seq</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, simplify s₁<span class="bp">✝;;</span> simplify s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk59"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.seq</var><b>: </b><span>∀ {σ₁ : State} {s₁ : Stmt} {σ₂ : State} {s₂ : Stmt} {σ₃ : State}, (σ₁, s₁) ⇓ σ₂ → (σ₂, s₂) ⇓ σ₃ → (σ₁, s₁;; s₂) ⇓ σ₃</span></span></div></blockquote></div></small></div>Bigstep.seq</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₁</var><b>: </b><span>(σ₁✝, simplify s₁✝) ⇓ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₂</var><b>: </b><span>(σ₂✝, simplify s₂✝) ⇓ σ₃✝</span></span></div></blockquote></div></small></div><span class="nv">ih₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk5a"><div class="alectryon-token"><span class="bp">|</span> assign <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">assign</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, x<span class="bp">✝</span> ::= Expr.simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝</span> v<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk5b"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.assign</var><b>: </b><span>∀ {v : Val} {σ : State} {x : Var} {e : Expr}, Expr.eval σ e = some v → (σ, x ::= e) ⇓ State.update σ x v</span></span></div></blockquote></div></small></div>Bigstep.assign</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">assign.a</span></span><div class="goal-conclusion">Expr.eval σ<span class="bp">✝</span> (Expr.simplify e<span class="bp">✝</span>) <span class="bp">=</span> some v<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk5c"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk5d"><div class="alectryon-token"><span class="bp">|</span> whileTrue heq h₁ h₂ ih₁ ih₂ <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk5e"><div class="alectryon-token"><span class="k">rw</span></div><div class="alectryon-token"> [</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk5f"><div class="alectryon-token"><span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.eval_simplify</var><b>: </b><span>∀ {σ : State} (e : Expr), Expr.eval σ (Expr.simplify e) = Expr.eval σ e</span></span></div></blockquote></div></small></div>Expr.eval_simplify</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk60"><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"></div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk61"><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ₁✝ c✝ = some (Val.bool true)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk62"><div class="alectryon-token"><span class="k">revert</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₂</var><b>: </b><span>(σ₂✝,
  match Expr.simplify c✝ with
  | Expr.val (Val.bool false) =&gt; skip
  | c' =&gt; while c' (simplify b✝)) ⇓
  σ₃✝</span></span></div></blockquote></div></small></div><span class="nv">ih₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">(σ₂<span class="bp">✝</span>,
    <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
    <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
    <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
    σ₃<span class="bp">✝</span> <span class="bp">→</span>
  (σ₁<span class="bp">✝</span>,
    <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
    <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
    <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
    σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk63"><div class="alectryon-token"><span class="c1">-- This is a hack to make sure the next split simplify the two match expressions: TODO: make sure `simp` can do it</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk64"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue.h_1</span></span><div class="goal-conclusion">(σ₂<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span> <span class="bp">→</span> (σ₁<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk65" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk65"><hr><span class="goal-name">whileTrue.h_2</span></label><div class="goal-conclusion">(σ₂<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span> <span class="bp">→</span> (σ₁<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk66"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">(σ₂<span class="bp">✝</span>,
    <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
    <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
    <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
    σ₃<span class="bp">✝</span> <span class="bp">→</span>
  (σ₁<span class="bp">✝</span>,
    <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
    <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
    <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
    σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk67"><div class="alectryon-token"><span class="k">intro</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₂</var><b>: </b><span>(σ₂✝, while x✝² (simplify b✝)) ⇓ σ₃✝</span></span></div></blockquote></div></small></div><span class="nv">ih₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue.h_2</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk68"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> h <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue.h_1</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk69" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk69"><hr><span class="goal-name">whileTrue.h_2</span></label><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk6a"><div class="alectryon-token"><span class="k">rw</span></div><div class="alectryon-token"> [</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> Expr.val (Val.bool false)</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk6b"><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>Expr.simplify c✝ = Expr.val (Val.bool false)</span></span></div></blockquote></div></small></div><span class="nv">h</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.val (Val.bool false)) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> Expr.val (Val.bool false)</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk6c"><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.val (Val.bool false)) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> Expr.val (Val.bool false)</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"></div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk6d"><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ₁✝ (Expr.simplify c✝) = some (Val.bool true)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.val (Val.bool false)) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> Expr.val (Val.bool false)</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk6e"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ₁✝ (Expr.val (Val.bool false)) = some (Val.bool true)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk6f"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> h _ _ <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue.h_2</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk70"><div class="alectryon-token"><span class="k">rw</span></div><div class="alectryon-token"> [</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk71"><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>Expr.simplify c✝ = x✝²</span></span></div></blockquote></div></small></div><span class="nv">h</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> x<span class="bp">✝²</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk72"><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> x<span class="bp">✝²</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"></div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk73"><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ₁✝ (Expr.simplify c✝) = some (Val.bool true)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> x<span class="bp">✝²</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk74"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.whileTrue</var><b>: </b><span>∀ {c : Expr} {σ₁ : State} {b : Stmt} {σ₂ σ₃ : State},
  evalTrue c σ₁ → (σ₁, b) ⇓ σ₂ → (σ₂, while c b) ⇓ σ₃ → (σ₁, while c b) ⇓ σ₃</span></span></div></blockquote></div></small></div>Bigstep.whileTrue</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ₁✝ x✝² = some (Val.bool true)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₁</var><b>: </b><span>(σ₁✝, simplify b✝) ⇓ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₂</var><b>: </b><span>(σ₂✝, while x✝² (simplify b✝)) ⇓ σ₃✝</span></span></div></blockquote></div></small></div><span class="nv">ih₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk75"><div class="alectryon-token"><span class="bp">|</span> whileFalse heq <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileFalse</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk76"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileFalse.h_1</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ<span class="bp">✝</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk77" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk77"><hr><span class="goal-name">whileFalse.h_2</span></label><div class="goal-conclusion">(σ<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ<span class="bp">✝</span></div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk78"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileFalse.h_1</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ<span class="bp">✝</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk79" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk79"><hr><span class="goal-name">whileFalse.h_2</span></label><div class="goal-conclusion">(σ<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ<span class="bp">✝</span></div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk7a"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.skip</var><b>: </b><span>∀ {σ : State}, (σ, skip) ⇓ σ</span></span></div></blockquote></div></small></div>Bigstep.skip</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk7b"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> h _ _ <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileFalse.h_2</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk7c"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.whileFalse</var><b>: </b><span>∀ {c : Expr} {σ : State} {b : Stmt}, evalFalse c σ → (σ, while c b) ⇓ σ</span></span></div></blockquote></div></small></div>Bigstep.whileFalse</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">a</span></span><div class="goal-conclusion">evalFalse x<span class="bp">✝²</span> σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk7d"><div class="alectryon-token"><span class="k">rw</span></div><div class="alectryon-token"> [</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">a</span></span><div class="goal-conclusion">evalFalse x<span class="bp">✝²</span> σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk7e"><div class="alectryon-token"><span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>Expr.simplify c✝ = x✝²</span></span></div></blockquote></div></small></div><span class="nv">h</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">a</span></span><div class="goal-conclusion">evalFalse (Expr.simplify c<span class="bp">✝</span>) σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk7f"><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">a</span></span><div class="goal-conclusion">evalFalse (Expr.simplify c<span class="bp">✝</span>) σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk80"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ✝ c✝ = some (Val.bool false)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk81"><div class="alectryon-token"><span class="bp">|</span> ifFalse heq h ih <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk82"><div class="alectryon-token"><span class="k">rw</span></div><div class="alectryon-token"> [</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk83"><div class="alectryon-token"><span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.eval_simplify</var><b>: </b><span>∀ {σ : State} (e : Expr), Expr.eval σ (Expr.simplify e) = Expr.eval σ e</span></span></div></blockquote></div></small></div>Expr.eval_simplify</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk84"><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"></div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk85"><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ₁✝ c✝ = some (Val.bool false)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk86"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse.h_1</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk87" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk87"><hr><span class="goal-name">ifFalse.h_2</span></label><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk88" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk88"><hr><span class="goal-name">ifFalse.h_3</span></label><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, ite x<span class="bp">✝³</span> (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk89"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk8a"><div class="alectryon-token"><span class="k">simp_all</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> x<span class="bp">✝³</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h✝</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> x<span class="bp">✝³</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse.h_3</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, ite x<span class="bp">✝³</span> (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk8b"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.ifFalse</var><b>: </b><span>∀ {c : Expr} {σ₁ : State} {e : Stmt} {σ₂ : State} {t : Stmt}, evalFalse c σ₁ → (σ₁, e) ⇓ σ₂ → (σ₁, ite c t e) ⇓ σ₂</span></span></div></blockquote></div></small></div>Bigstep.ifFalse</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ₁✝ x✝³ = some (Val.bool false)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>(σ₁✝, simplify e✝) ⇓ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk8c"><div class="alectryon-token"><span class="bp">|</span> ifTrue heq h ih <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk8d"><div class="alectryon-token"><span class="k">rw</span></div><div class="alectryon-token"> [</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk8e"><div class="alectryon-token"><span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.eval_simplify</var><b>: </b><span>∀ {σ : State} (e : Expr), Expr.eval σ (Expr.simplify e) = Expr.eval σ e</span></span></div></blockquote></div></small></div>Expr.eval_simplify</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk8f" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk8f"><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"></div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk90" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk90"><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ₁✝ c✝ = some (Val.bool true)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk91"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifTrue.h_1</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk92" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk92"><hr><span class="goal-name">ifTrue.h_2</span></label><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk93" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><label class="goal-separator" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk93"><hr><span class="goal-name">ifTrue.h_3</span></label><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, ite x<span class="bp">✝³</span> (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk94"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk95"><div class="alectryon-token"><span class="k">simp_all</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> x<span class="bp">✝³</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h✝</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> x<span class="bp">✝³</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifTrue.h_3</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, ite x<span class="bp">✝³</span> (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="gc0zngy0mrm5s5iy2ijqvqb3xngm7qkk-while-lean-chk96"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.ifTrue</var><b>: </b><span>∀ {c : Expr} {σ₁ : State} {t : Stmt} {σ₂ : State} {e : Stmt}, evalTrue c σ₁ → (σ₁, t) ⇓ σ₂ → (σ₁, ite c t e) ⇓ σ₂</span></span></div></blockquote></div></small></div>Bigstep.ifTrue</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ₁✝ x✝³ = some (Val.bool true)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>(σ₁✝, simplify t✝) ⇓ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

<span class="k">#exit</span>
<span class="c1">-- TODO: add simp theorems for monadic code</span>
<span class="kd">theorem</span> Stmt.eval_correct {s : Stmt} (h : (s.eval fuel)<span class="bp">.</span>run σ <span class="bp">=</span> (<span class="bp">.</span>ok unit, σ&#39;)) : (σ, s) <span class="bp">⇓</span> σ&#39; := <span class="kd">by</span>
  induction fuel generalizing s σ σ&#39; <span class="k">with</span> simp at h
  <span class="bp">|</span> zero <span class="bp">=&gt;</span> injection h<span class="bp">;</span> contradiction
  <span class="bp">|</span> succ fuel ih <span class="bp">=&gt;</span>
    split at h
    next <span class="bp">=&gt;</span> injection h <span class="k">with</span> _ h<span class="bp">;</span> rw [h]<span class="bp">;</span> exact Bigstep.skip
    next <span class="bp">=&gt;</span> done</div></span></pre>
</div>
</div></body>
</html>
