<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<title>vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while.lean</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Lean4 v4.0.0-unknown. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+↑</kbd> <kbd>Ctrl+↓</kbd> to navigate, <kbd>Ctrl+🖱️</kbd> to focus. On Mac, use <kbd>⌘</kbd> instead of <kbd>Ctrl</kbd>.<br>Hover-Settings: Show types:<input id="toggleswitch" type="checkbox" onClick="toggleShowTypes(this);"> Show goals:<input id="toggleswitch" type="checkbox" onClick="toggleShowGoals(this);" checked><br></div><div class="document">


<pre class="alectryon-io type-info-hidden highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp"><div class="alectryon-token"><span class="k">abbrev</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>String</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>String</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">inductive</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>int</var><b>: </b><span>Int → _root_.Val</span></span></div></blockquote></div></small></div>int</div><div class="alectryon-token">  (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Int</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Int</div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>bool</var><b>: </b><span>Bool → _root_.Val</span></span></div></blockquote></div></small></div>bool</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bool</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Bool</div><div class="alectryon-token">)
  </div><div class="alectryon-token"><span class="k">deriving</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>DecidableEq</var><b>: </b><span>Sort u → Sort (max 1 u)</span></span></div></blockquote></div></small></div>DecidableEq</div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Repr</var><b>: </b><span>Type u → Type u</span></span></div></blockquote></div></small></div>Repr</div><div class="alectryon-token">

</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>instance</var><b>: </b><span>Coe Bool Val</span></span></div></blockquote></div></small></div><span class="kd">instance</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Coe</var><b>: </b><span>Type → Type → Type</span></span></div></blockquote></div></small></div>Coe</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bool</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  coe </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>instance</var><b>: </b><span>Coe Int Val</span></span></div></blockquote></div></small></div><span class="kd">instance</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Coe</var><b>: </b><span>Type → Type → Type</span></span></div></blockquote></div></small></div>Coe</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Int</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  coe </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>instance</var><b>: </b><span>{n : Nat} → OfNat Val n</span></span></div></blockquote></div></small></div><span class="kd">instance</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>OfNat</var><b>: </b><span>Type → Nat → Type</span></span></div></blockquote></div></small></div>OfNat</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>n</var><b>: </b><span>Nat</span></span></div></blockquote></div></small></div><span class="nv">n</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  ofNat := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>n</var><b>: </b><span>Nat</span></span></div></blockquote></div></small></div><span class="nv">n</span></div><div class="alectryon-token">

</div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk0"><div class="alectryon-token"><span class="k">#check</span></div></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">Val.bool true : Val</blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>true</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>true</div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">)

</div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1"><div class="alectryon-token"><span class="k">#check</span></div></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message"><span class="mi">0</span> : Val</blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>0</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="mi">0</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">)

</div><div class="alectryon-token"><span class="kd">inductive</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>BinOp</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>BinOp</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eq</var><b>: </b><span>_root_.BinOp</span></span></div></blockquote></div></small></div>eq</div><div class="alectryon-token"> <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>and</var><b>: </b><span>_root_.BinOp</span></span></div></blockquote></div></small></div>and</div><div class="alectryon-token"> <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>lt</var><b>: </b><span>_root_.BinOp</span></span></div></blockquote></div></small></div>lt</div><div class="alectryon-token"> <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>add</var><b>: </b><span>_root_.BinOp</span></span></div></blockquote></div></small></div>add</div><div class="alectryon-token"> <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>sub</var><b>: </b><span>_root_.BinOp</span></span></div></blockquote></div></small></div>sub</div><div class="alectryon-token">
  </div><div class="alectryon-token"><span class="k">deriving</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Repr</var><b>: </b><span>Type u → Type u</span></span></div></blockquote></div></small></div>Repr</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">inductive</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>UnaryOp</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>UnaryOp</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>not</var><b>: </b><span>_root_.UnaryOp</span></span></div></blockquote></div></small></div>not</div><div class="alectryon-token">
  </div><div class="alectryon-token"><span class="k">deriving</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Repr</var><b>: </b><span>Type u → Type u</span></span></div></blockquote></div></small></div>Repr</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">inductive</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>val</var><b>: </b><span>Val → _root_.Expr</span></span></div></blockquote></div></small></div>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>var</var><b>: </b><span>Var → _root_.Expr</span></span></div></blockquote></div></small></div>var</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>bin</var><b>: </b><span>_root_.Expr → BinOp → _root_.Expr → _root_.Expr</span></span></div></blockquote></div></small></div>bin</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>lhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">lhs</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Sort _tmp_ind_univ_param</span></span></div></blockquote></div></small></div><span class="nv">Expr</span></div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>BinOp</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>BinOp</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>rhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">rhs</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Sort _tmp_ind_univ_param</span></span></div></blockquote></div></small></div><span class="nv">Expr</span></div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>una</var><b>: </b><span>UnaryOp → _root_.Expr → _root_.Expr</span></span></div></blockquote></div></small></div>una</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>UnaryOp</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>UnaryOp</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>arg</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">arg</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Sort _tmp_ind_univ_param</span></span></div></blockquote></div></small></div><span class="nv">Expr</span></div><div class="alectryon-token">)
  </div><div class="alectryon-token"><span class="k">deriving</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Repr</var><b>: </b><span>Type u → Type u</span></span></div></blockquote></div></small></div>Repr</div><div class="alectryon-token">

</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>instance</var><b>: </b><span>Coe Val Expr</span></span></div></blockquote></div></small></div><span class="kd">instance</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Coe</var><b>: </b><span>Type → Type → Type</span></span></div></blockquote></div></small></div>Coe</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  coe </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>instance</var><b>: </b><span>Coe Var Expr</span></span></div></blockquote></div></small></div><span class="kd">instance</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Coe</var><b>: </b><span>Type → Type → Type</span></span></div></blockquote></div></small></div>Coe</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  coe </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.var</var><b>: </b><span>Var → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>var</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>instance</var><b>: </b><span>{n : Nat} → OfNat Expr n</span></span></div></blockquote></div></small></div><span class="kd">instance</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>OfNat</var><b>: </b><span>Type → Nat → Type</span></span></div></blockquote></div></small></div>OfNat</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>n</var><b>: </b><span>Nat</span></span></div></blockquote></div></small></div><span class="nv">n</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  ofNat := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>n</var><b>: </b><span>Nat</span></span></div></blockquote></div></small></div><span class="nv">n</span></div><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>BinOp.eval</var><b>: </b><span>BinOp → Val → Val → Option Val</span></span></div></blockquote></div></small></div>BinOp.eval</div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>BinOp</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>BinOp</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Option</var><b>: </b><span>Type → Type</span></span></div></blockquote></div></small></div>Option</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.eq</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>eq</div><div class="alectryon-token">,  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₁</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₁</span></div><div class="alectryon-token">,        </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₂</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₂</span></div><div class="alectryon-token">      <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₁</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₁</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₂</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₂</span></div><div class="alectryon-token">))
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.and</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>and</div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b₁</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b₂</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b₂</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b₁</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b₁</span></div><div class="alectryon-token"> <span class="bp">&amp;&amp;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b₂</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b₂</span></div><div class="alectryon-token">))
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.lt</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>lt</div><div class="alectryon-token">,  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₁</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₁</span></div><div class="alectryon-token">,  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₂</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₂</span></div><div class="alectryon-token">  <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₁</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₁</span></div><div class="alectryon-token"> <span class="bp">&lt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₂</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₂</span></div><div class="alectryon-token">))
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.add</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>add</div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₁</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₁</span></div><div class="alectryon-token">,  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₂</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₂</span></div><div class="alectryon-token">  <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₁</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₁</span></div><div class="alectryon-token"> <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₂</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₂</span></div><div class="alectryon-token">))
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.sub</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>sub</div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₁</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₁</span></div><div class="alectryon-token">,  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₂</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₂</span></div><div class="alectryon-token">  <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₁</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₁</span></div><div class="alectryon-token"> <span class="bp">-</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>i₂</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">i₂</span></div><div class="alectryon-token">))
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">,    </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">,        </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">        <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>none</var><b>: </b><span>{α : Type} → Option α</span></span></div></blockquote></div></small></div>none</div><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>UnaryOp.eval</var><b>: </b><span>UnaryOp → Val → Option Val</span></span></div></blockquote></div></small></div>UnaryOp.eval</div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>UnaryOp</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>UnaryOp</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Option</var><b>: </b><span>Type → Type</span></span></div></blockquote></div></small></div>Option</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.not</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>not</div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> <span class="bp">!</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">,    </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">       <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>none</var><b>: </b><span>{α : Type} → Option α</span></span></div></blockquote></div></small></div>none</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">inductive</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Stmt</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>skip</var><b>: </b><span>_root_.Stmt</span></span></div></blockquote></div></small></div>skip</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assign</var><b>: </b><span>Var → Expr → _root_.Stmt</span></span></div></blockquote></div></small></div>assign</div><div class="alectryon-token">   (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>seq</var><b>: </b><span>_root_.Stmt → _root_.Stmt → _root_.Stmt</span></span></div></blockquote></div></small></div>seq</div><div class="alectryon-token">      (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt</var><b>: </b><span>Sort _tmp_ind_univ_param</span></span></div></blockquote></div></small></div><span class="nv">Stmt</span></div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ite</var><b>: </b><span>Expr → _root_.Stmt → _root_.Stmt → _root_.Stmt</span></span></div></blockquote></div></small></div>ite</div><div class="alectryon-token">      (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">t</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt</var><b>: </b><span>Sort _tmp_ind_univ_param</span></span></div></blockquote></div></small></div><span class="nv">Stmt</span></div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>«while»</var><b>: </b><span>Expr → _root_.Stmt → _root_.Stmt</span></span></div></blockquote></div></small></div><span class="bp">«</span>while<span class="bp">»</span></div><div class="alectryon-token">  (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt</var><b>: </b><span>Sort _tmp_ind_univ_param</span></span></div></blockquote></div></small></div><span class="nv">Stmt</span></div><div class="alectryon-token">)
  </div><div class="alectryon-token"><span class="k">deriving</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Repr</var><b>: </b><span>Type u → Type u</span></span></div></blockquote></div></small></div>Repr</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">infix</span></div><div class="alectryon-token">:<span class="mi">150</span> <span class="s2">&quot; ::= &quot;</span> <span class="bp">=&gt;</span> Stmt.assign
</div><div class="alectryon-token"><span class="kd">infixr</span></div><div class="alectryon-token">:<span class="mi">130</span> <span class="s2">&quot;;; &quot;</span>   <span class="bp">=&gt;</span> Stmt.seq

</div><div class="alectryon-token"><span class="k">syntax</span></div><div class="alectryon-token"> <span class="s2">&quot;`[Expr|&quot;</span> term <span class="s2">&quot;]&quot;</span> : term

</div><div class="alectryon-token"><span class="k">macro_rules</span></div><div class="alectryon-token">
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|</span>true])      <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>`((true : Expr))</var><b>: </b><span>Lean.MacroM Lean.Syntax</span></span></div></blockquote></div></small></div><span class="bp">`</span>((true : Expr))</div><div class="alectryon-token">
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|</span>false])     <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>`((false : Expr))</var><b>: </b><span>Lean.MacroM Lean.Syntax</span></span></div></blockquote></div></small></div><span class="bp">`</span>((false : Expr))</div><div class="alectryon-token">
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>n</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">n</span></div><div class="alectryon-token">:numLit]) <span class="bp">=&gt;</span> <span class="bp">`</span>((<span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>n</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">n</span></div><div class="alectryon-token"> : Expr))
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">:ident])  <span class="bp">=&gt;</span> <span class="bp">`</span>((<span class="bp">$</span>(</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Lean.quote</var><b>: </b><span>{α : Type} → [self : Lean.Quote α] → α → Lean.Syntax</span></span></div></blockquote></div></small></div><span class="k">Lean.quote</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"><span class="k">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>getId</var><b>: </b><span>Lean.Syntax → Lean.Name</span></span></div></blockquote></div></small></div><span class="k">getId</span></div><div class="alectryon-token"><span class="k">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>toString</var><b>: </b><span>Lean.Name → optParam Bool true → String</span></span></div></blockquote></div></small></div><span class="k">toString</span></div><div class="alectryon-token">) : Expr))
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">=</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">])   <span class="bp">=&gt;</span> <span class="bp">`</span>(Expr.bin <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">] BinOp.eq <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">])
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">&amp;&amp;</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">])  <span class="bp">=&gt;</span> <span class="bp">`</span>(Expr.bin <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">] BinOp.and <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">])
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">&lt;</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">])   <span class="bp">=&gt;</span> <span class="bp">`</span>(Expr.bin <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">] BinOp.lt <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">])
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">+</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">])   <span class="bp">=&gt;</span> <span class="bp">`</span>(Expr.bin <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">] BinOp.add <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">])
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">-</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">])   <span class="bp">=&gt;</span> <span class="bp">`</span>(Expr.bin <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">] BinOp.sub <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">])
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|!$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">])       <span class="bp">=&gt;</span> <span class="bp">`</span>(Expr.una UnaryOp.not <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">])
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|</span>(<span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">)])      <span class="bp">=&gt;</span> <span class="bp">`</span>(<span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">])</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="k">declare_syntax_cat</span></div><div class="alectryon-token"> stmt

</div><div class="alectryon-token"><span class="k">syntax</span></div><div class="alectryon-token"> ident <span class="s2">&quot; := &quot;</span> term <span class="s2">&quot;;&quot;</span>: stmt
</div><div class="alectryon-token"><span class="k">syntax</span></div><div class="alectryon-token"> <span class="s2">&quot;if &quot;</span> <span class="s2">&quot;(&quot;</span> term <span class="s2">&quot;)&quot;</span> <span class="s2">&quot; {</span><span class="se">\n</span><span class="s2">&quot;</span> stmt<span class="bp">*</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">}&quot;</span> (<span class="s2">&quot; else &quot;</span> <span class="s2">&quot;{</span><span class="se">\n</span><span class="s2">&quot;</span> stmt<span class="bp">*</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">}&quot;</span>)<span class="bp">?</span> : stmt
</div><div class="alectryon-token"><span class="k">syntax</span></div><div class="alectryon-token"> <span class="s2">&quot;while &quot;</span> <span class="s2">&quot;(&quot;</span> term <span class="s2">&quot;)&quot;</span> <span class="s2">&quot;{</span><span class="se">\n</span><span class="s2">&quot;</span> stmt<span class="bp">*</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">}&quot;</span> : stmt

</div><div class="alectryon-token"><span class="k">syntax</span></div><div class="alectryon-token"> <span class="s2">&quot;`[Stmt|&quot;</span> stmt<span class="bp">*</span> <span class="s2">&quot;]&quot;</span> : term

</div><div class="alectryon-token"><span class="k">macro_rules</span></div><div class="alectryon-token">
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Stmt<span class="bp">|</span> ]) <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>`(Stmt.skip)</var><b>: </b><span>Lean.MacroM Lean.Syntax</span></span></div></blockquote></div></small></div><span class="bp">`</span>(Stmt.skip)</div><div class="alectryon-token">
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Stmt<span class="bp">|</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">:ident := <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token">:term<span class="bp">;</span>]) <span class="bp">=&gt;</span> <span class="bp">`</span>(Stmt.assign <span class="bp">$</span>(</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Lean.quote</var><b>: </b><span>{α : Type} → [self : Lean.Quote α] → α → Lean.Syntax</span></span></div></blockquote></div></small></div><span class="k">Lean.quote</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"><span class="k">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>getId</var><b>: </b><span>Lean.Syntax → Lean.Name</span></span></div></blockquote></div></small></div><span class="k">getId</span></div><div class="alectryon-token"><span class="k">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>toString</var><b>: </b><span>Lean.Name → optParam Bool true → String</span></span></div></blockquote></div></small></div><span class="k">toString</span></div><div class="alectryon-token">) <span class="bp">`</span>[Expr<span class="bp">|</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token">:term])
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Stmt<span class="bp">|</span> </div><div class="alectryon-token"><span class="k">if</span></div><div class="alectryon-token"> (<span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token">) { <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ts</var><b>: </b><span>Array Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">ts</span></div><div class="alectryon-token"><span class="bp">*</span> } </div><div class="alectryon-token"><span class="k">else</span></div><div class="alectryon-token"> { <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>es</var><b>: </b><span>Array Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">es</span></div><div class="alectryon-token"><span class="bp">*</span> }]) <span class="bp">=&gt;</span> <span class="bp">`</span>(Stmt.ite <span class="bp">`</span>[Expr<span class="bp">|</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token">] <span class="bp">`</span>[Stmt<span class="bp">|</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ts</var><b>: </b><span>Array Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">ts</span></div><div class="alectryon-token"><span class="bp">*</span>] <span class="bp">`</span>[Stmt<span class="bp">|</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>es</var><b>: </b><span>Array Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">es</span></div><div class="alectryon-token"><span class="bp">*</span>])
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Stmt<span class="bp">|</span> </div><div class="alectryon-token"><span class="k">if</span></div><div class="alectryon-token"> (<span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token">) { <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ts</var><b>: </b><span>Array Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">ts</span></div><div class="alectryon-token"><span class="bp">*</span> }]) <span class="bp">=&gt;</span> <span class="bp">`</span>(Stmt.ite <span class="bp">`</span>[Expr<span class="bp">|</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token">] <span class="bp">`</span>[Stmt<span class="bp">|</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ts</var><b>: </b><span>Array Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">ts</span></div><div class="alectryon-token"><span class="bp">*</span>] Stmt.skip)
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Stmt<span class="bp">|</span> </div><div class="alectryon-token"><span class="k">while</span></div><div class="alectryon-token"> (<span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token">) { <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Array Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"><span class="bp">*</span> }]) <span class="bp">=&gt;</span> <span class="bp">`</span>(Stmt.while <span class="bp">`</span>[Expr<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token">] <span class="bp">`</span>[Stmt<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Array Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"><span class="bp">*</span>])
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">`</span>[Stmt<span class="bp">|</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ss</var><b>: </b><span>Array Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">ss</span></div><div class="alectryon-token"><span class="bp">*</span>]) <span class="bp">=&gt;</span> <span class="bp">`</span>(Stmt.seq <span class="bp">`</span>[Stmt<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token">] <span class="bp">`</span>[Stmt<span class="bp">|$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ss</var><b>: </b><span>Array Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">ss</span></div><div class="alectryon-token"><span class="bp">*</span>])</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>example1</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>example1</div><div class="alectryon-token"> := <span class="bp">`</span>[Stmt<span class="bp">|</span>
  x := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>8</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">8</span></div><div class="alectryon-token"><span class="bp">;</span>
  y := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>10</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">10</span></div><div class="alectryon-token"><span class="bp">;</span>
  </div><div class="alectryon-token"><span class="k">if</span></div><div class="alectryon-token"> (x <span class="bp">&lt;</span> y) {
    x := x <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>1</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">1</span></div><div class="alectryon-token"><span class="bp">;</span>
  } </div><div class="alectryon-token"><span class="k">else</span></div><div class="alectryon-token"> {
    y := y <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>3</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">3</span></div><div class="alectryon-token"><span class="bp">;</span>
  }
]

</div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk2"><div class="alectryon-token"><span class="k">#reduce</span></div></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message"><span class="s2">&quot;x&quot;</span> ::= Expr.val (Val.int (Int.ofNat <span class="mi">8</span>))<span class="bp">;;</span>
  <span class="s2">&quot;y&quot;</span> ::= Expr.val (Val.int (Int.ofNat <span class="mi">10</span>))<span class="bp">;;</span>
    Stmt.ite (Expr.bin (Expr.var <span class="s2">&quot;x&quot;</span>) BinOp.lt (Expr.var <span class="s2">&quot;y&quot;</span>))
      (<span class="s2">&quot;x&quot;</span> ::= Expr.bin (Expr.var <span class="s2">&quot;x&quot;</span>) BinOp.add (Expr.val (Val.int (Int.ofNat <span class="mi">1</span>))))
      (<span class="s2">&quot;y&quot;</span> ::= Expr.bin (Expr.var <span class="s2">&quot;y&quot;</span>) BinOp.add (Expr.val (Val.int (Int.ofNat <span class="mi">3</span>))))</blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>example1</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>example1</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>example2</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>example2</div><div class="alectryon-token"> := <span class="bp">`</span>[Stmt<span class="bp">|</span>
  x := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>8</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">8</span></div><div class="alectryon-token"><span class="bp">;</span>
  </div><div class="alectryon-token"><span class="k">if</span></div><div class="alectryon-token"> (x <span class="bp">&lt;</span> y) {
    x := x <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>1</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">1</span></div><div class="alectryon-token"><span class="bp">;</span>
  } </div><div class="alectryon-token"><span class="k">else</span></div><div class="alectryon-token"> {
    y := y <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>3</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">3</span></div><div class="alectryon-token"><span class="bp">;</span>
    x := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>9</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">9</span></div><div class="alectryon-token"><span class="bp">;</span>
  }
  y := x<span class="bp">;</span>]

</div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk3"><div class="alectryon-token"><span class="k">#eval</span></div></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">Stmt.seq
  (Stmt.assign <span class="s2">&quot;x&quot;</span> (Expr.val (Val.int <span class="mi">8</span>)))
  (Stmt.seq
    (Stmt.ite
      (Expr.bin (Expr.var <span class="s2">&quot;x&quot;</span>) (BinOp.lt) (Expr.var <span class="s2">&quot;y&quot;</span>))
      (Stmt.assign <span class="s2">&quot;x&quot;</span> (Expr.bin (Expr.var <span class="s2">&quot;x&quot;</span>) (BinOp.add) (Expr.val (Val.int <span class="mi">1</span>))))
      (Stmt.seq
        (Stmt.assign <span class="s2">&quot;y&quot;</span> (Expr.bin (Expr.var <span class="s2">&quot;y&quot;</span>) (BinOp.add) (Expr.val (Val.int <span class="mi">3</span>))))
        (Stmt.assign <span class="s2">&quot;x&quot;</span> (Expr.val (Val.int <span class="mi">9</span>)))))
    (Stmt.assign <span class="s2">&quot;y&quot;</span> (Expr.var <span class="s2">&quot;x&quot;</span>)))
</blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>example2</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>example2</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="k">abbrev</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>List</var><b>: </b><span>Type → Type</span></span></div></blockquote></div></small></div>List</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token"> <span class="bp">×</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">)

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.update</var><b>: </b><span>State → Var → Val → State</span></span></div></blockquote></div></small></div>State.update</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token"> :=
  </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
  <span class="bp">|</span> [] <span class="bp">=&gt;</span> [(</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">)]
  <span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>w</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">w</span></div><div class="alectryon-token">)::</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">if</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">then</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">)::</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">else</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>w</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">w</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>update</var><b>: </b><span>State → Var → Val → State</span></span></div></blockquote></div></small></div><span class="nv">update</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.find?</var><b>: </b><span>State → Var → Option Val</span></span></div></blockquote></div></small></div>State.find<span class="bp">?</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Option</var><b>: </b><span>Type → Type</span></span></div></blockquote></div></small></div>Option</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token"> :=
  </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
  <span class="bp">|</span> [] <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>none</var><b>: </b><span>{α : Type} → Option α</span></span></div></blockquote></div></small></div>none</div><div class="alectryon-token">
  <span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">if</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">then</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">else</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?</var><b>: </b><span>State → Var → Option Val</span></span></div></blockquote></div></small></div>find<span class="bp">?</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.get</var><b>: </b><span>State → Var → Val</span></span></div></blockquote></div></small></div>State.get</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token"> :=
  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?</var><b>: </b><span>State → Var → Option Val</span></span></div></blockquote></div></small></div>find<span class="bp">?</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">|&gt;.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>getD</var><b>: </b><span>{α : Type} → Option α → α → α</span></span></div></blockquote></div></small></div>getD</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>0</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="mi">0</span></div><div class="alectryon-token">)

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.erase</var><b>: </b><span>State → Var → State</span></span></div></blockquote></div></small></div>State.erase</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token"> :=
  </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
  <span class="bp">|</span> [] <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>[]</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div>[]</div><div class="alectryon-token">
  <span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">if</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">then</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>erase</var><b>: </b><span>State → Var → State</span></span></div></blockquote></div></small></div><span class="nv">erase</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">else</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>erase</var><b>: </b><span>State → Var → State</span></span></div></blockquote></div></small></div><span class="nv">erase</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.find?_update_self</var><b>: </b><span>∀ (σ : State) (x : Var) (v : Val), find? (update σ x v) x = some v</span></span></div></blockquote></div></small></div>State.find<span class="bp">?</span>_update_self</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">) : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>update</var><b>: </b><span>State → Var → Val → State</span></span></div></blockquote></div></small></div>update</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?</var><b>: </b><span>State → Var → Option Val</span></span></div></blockquote></div></small></div>find<span class="bp">?</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk4"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (update σ x v) x <span class="bp">=</span> some v</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk5"><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token"> <span class="c1">-- TODO: automate this proof</span>
  <span class="bp">|</span> [] <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (update σ x v) x <span class="bp">=</span> some v</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk6"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk7"><div class="alectryon-token"><span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>w</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">w</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (update σ x v) x <span class="bp">=</span> some v</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk8"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (<span class="k">if</span> x <span class="bp">=</span> y <span class="k">then</span> (x, v) :: s <span class="k">else</span> (y, w) :: update s x v) x <span class="bp">=</span> some v</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk9"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">find<span class="bp">?</span> ((x, v) :: s) x <span class="bp">=</span> some v</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">find<span class="bp">?</span> ((y, w) :: update s x v) x <span class="bp">=</span> some v</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (<span class="k">if</span> x <span class="bp">=</span> y <span class="k">then</span> (x, v) :: s <span class="k">else</span> (y, w) :: update s x v) x <span class="bp">=</span> some v</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?_update_self</var><b>: </b><span>∀ (σ : State) (x : Var) (v : Val), find? (update σ x v) x = some v</span></span></div></blockquote></div></small></div>find<span class="bp">?</span>_update_self</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.find?_update</var><b>: </b><span>∀ {x z : Var} (σ : State) (v : Val), x ≠ z → find? (update σ x v) z = find? σ z</span></span></div></blockquote></div></small></div>State.find<span class="bp">?</span>_update</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>x ≠ z</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">≠</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>z</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">z</span></div><div class="alectryon-token">) : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>update</var><b>: </b><span>State → Var → Val → State</span></span></div></blockquote></div></small></div>update</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?</var><b>: </b><span>State → Var → Option Val</span></span></div></blockquote></div></small></div>find<span class="bp">?</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>z</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">z</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?</var><b>: </b><span>State → Var → Option Val</span></span></div></blockquote></div></small></div>find<span class="bp">?</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>z</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">z</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (update σ x v) z <span class="bp">=</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf"><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token"> <span class="c1">-- TODO: automate this proof</span>
  <span class="bp">|</span> [] <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (update σ x v) z <span class="bp">=</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk10"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>x ≠ z</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>symm</var><b>: </b><span>∀ {α : Type} {a b : α}, a ≠ b → b ≠ a</span></span></div></blockquote></div></small></div>symm</div><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk11"><div class="alectryon-token"><span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>w</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">w</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (update σ x v) z <span class="bp">=</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk12"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (<span class="k">if</span> x <span class="bp">=</span> y <span class="k">then</span> (x, v) :: σ <span class="k">else</span> (y, w) :: update σ x v) z <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk13"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">find<span class="bp">?</span> ((x, v) :: σ) z <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> σ z</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk14" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk14"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">find<span class="bp">?</span> ((y, w) :: update σ x v) z <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk15"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (<span class="k">if</span> x <span class="bp">=</span> y <span class="k">then</span> (x, v) :: σ <span class="k">else</span> (y, w) :: update σ x v) z <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk16"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">(<span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some v <span class="k">else</span> find<span class="bp">?</span> σ z) <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk17"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> hc <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">(<span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some v <span class="k">else</span> find<span class="bp">?</span> σ z) <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> σ z</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk18" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk18"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">(<span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> (update σ x v) z) <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk19"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>hc</var><span class="hyp-type"><b>: </b><span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">some v <span class="bp">=</span> some w</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>hc</var><span class="hyp-type"><b>: </b><span>x <span class="bp">=</span> y</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">find<span class="bp">?</span> σ z <span class="bp">=</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>hc</var><span class="hyp-type"><b>: </b><span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some v <span class="k">else</span> find<span class="bp">?</span> σ z) <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c"><div class="alectryon-token"><span class="k">simp_all</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">(<span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> (update σ x v) z) <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1e"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">some w <span class="bp">=</span> some w</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1f"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">find<span class="bp">?</span> (update σ x v) z <span class="bp">=</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk20"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">some w <span class="bp">=</span> some w</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk21" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk21"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">find<span class="bp">?</span> (update σ x v) z <span class="bp">=</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk22"><div class="alectryon-token"><span class="k">rfl</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk23"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">find<span class="bp">?</span> (update σ x v) z <span class="bp">=</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk24"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?_update</var><b>: </b><span>∀ {x z : Var} (σ : State) (v : Val), x ≠ z → find? (update σ x v) z = find? σ z</span></span></div></blockquote></div></small></div>find<span class="bp">?</span>_update</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>x ≠ z</span></span></div></blockquote></div></small></div><span class="nv">h</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

<span class="c1">-- TODO: remove after we add better automation</span>
<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.find?_update'</var><b>: </b><span>∀ {z x : Var} (σ : State) (v : Val), z ≠ x → find? (update σ x v) z = find? σ z</span></span></div></blockquote></div></small></div>State.find<span class="bp">?</span>_update&#39;</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>z ≠ x</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>z</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">z</span></div><div class="alectryon-token"> <span class="bp">≠</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">) : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>update</var><b>: </b><span>State → Var → Val → State</span></span></div></blockquote></div></small></div>update</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?</var><b>: </b><span>State → Var → Option Val</span></span></div></blockquote></div></small></div>find<span class="bp">?</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>z</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">z</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?</var><b>: </b><span>State → Var → Option Val</span></span></div></blockquote></div></small></div>find<span class="bp">?</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>z</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">z</span></div><div class="alectryon-token"> :=
  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.find?_update</var><b>: </b><span>∀ {x z : Var} (σ : State) (v : Val), x ≠ z → find? (update σ x v) z = find? σ z</span></span></div></blockquote></div></small></div>State.find<span class="bp">?</span>_update</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>z ≠ x</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>symm</var><b>: </b><span>∀ {α : Type} {a b : α}, a ≠ b → b ≠ a</span></span></div></blockquote></div></small></div>symm</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.get_of_find?</var><b>: </b><span>∀ {x : Var} {v : Val} {σ : State}, find? σ x = some v → get σ x = v</span></span></div></blockquote></div></small></div>State.get_of_find<span class="bp">?</span></div><div class="alectryon-token"> {</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">} (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>find? σ x = some v</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?</var><b>: </b><span>State → Var → Option Val</span></span></div></blockquote></div></small></div>find<span class="bp">?</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>get</var><b>: </b><span>State → Var → Val</span></span></div></blockquote></div></small></div>get</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk25"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>find<span class="bp">?</span> σ x <span class="bp">=</span> some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">get σ x <span class="bp">=</span> v</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk26"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.get</var><b>: </b><span>State → Var → Val</span></span></div></blockquote></div></small></div>State.get</div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>find? σ x = some v</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Option.getD</var><b>: </b><span>{α : Type ?u.19505} → Option α → α → α</span></span></div></blockquote></div></small></div>Option.getD</div><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.find?_erase_self</var><b>: </b><span>∀ (σ : State) (x : Var), find? (erase σ x) x = none</span></span></div></blockquote></div></small></div>State.find<span class="bp">?</span>_erase_self</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token">) : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>erase</var><b>: </b><span>State → Var → State</span></span></div></blockquote></div></small></div>erase</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?</var><b>: </b><span>State → Var → Option Val</span></span></div></blockquote></div></small></div>find<span class="bp">?</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>none</var><b>: </b><span>{α : Type} → Option α</span></span></div></blockquote></div></small></div>none</div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk27"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (erase σ x) x <span class="bp">=</span> none</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk28"><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
  <span class="bp">|</span> [] <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (erase σ x) x <span class="bp">=</span> none</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk29"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk2a"><div class="alectryon-token"><span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>w</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">w</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (erase σ x) x <span class="bp">=</span> none</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk2b"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (<span class="k">if</span> x <span class="bp">=</span> y <span class="k">then</span> erase σ x <span class="k">else</span> (y, w) :: erase σ x) x <span class="bp">=</span> none</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk2c"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">find<span class="bp">?</span> (erase σ x) x <span class="bp">=</span> none</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk2d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk2d"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">find<span class="bp">?</span> ((y, w) :: erase σ x) x <span class="bp">=</span> none</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk2e"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (<span class="k">if</span> x <span class="bp">=</span> y <span class="k">then</span> erase σ x <span class="k">else</span> (y, w) :: erase σ x) x <span class="bp">=</span> none</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk2f"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">find<span class="bp">?</span> (erase σ y) y <span class="bp">=</span> none</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk30"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">find<span class="bp">?</span> (erase σ y) y <span class="bp">=</span> none</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk31" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk31"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">find<span class="bp">?</span> (erase σ x) x <span class="bp">=</span> none</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk32"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?_erase_self</var><b>: </b><span>∀ (σ : State) (x : Var), find? (erase σ x) x = none</span></span></div></blockquote></div></small></div>find<span class="bp">?</span>_erase_self</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk33"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">find<span class="bp">?</span> (erase σ x) x <span class="bp">=</span> none</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk34"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?_erase_self</var><b>: </b><span>∀ (σ : State) (x : Var), find? (erase σ x) x = none</span></span></div></blockquote></div></small></div>find<span class="bp">?</span>_erase_self</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.find?_erase</var><b>: </b><span>∀ {x z : Var} (σ : State), x ≠ z → find? (erase σ x) z = find? σ z</span></span></div></blockquote></div></small></div>State.find<span class="bp">?</span>_erase</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>x ≠ z</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">≠</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>z</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">z</span></div><div class="alectryon-token">) : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>erase</var><b>: </b><span>State → Var → State</span></span></div></blockquote></div></small></div>erase</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?</var><b>: </b><span>State → Var → Option Val</span></span></div></blockquote></div></small></div>find<span class="bp">?</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>z</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">z</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?</var><b>: </b><span>State → Var → Option Val</span></span></div></blockquote></div></small></div>find<span class="bp">?</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>z</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">z</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk35"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (erase σ x) z <span class="bp">=</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk36"><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
  <span class="bp">|</span> [] <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (erase σ x) z <span class="bp">=</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk37"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk38"><div class="alectryon-token"><span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>w</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">w</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (erase σ x) z <span class="bp">=</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk39"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (<span class="k">if</span> x <span class="bp">=</span> y <span class="k">then</span> erase σ x <span class="k">else</span> (y, w) :: erase σ x) z <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk3a"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">find<span class="bp">?</span> (erase σ x) z <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> σ z</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk3b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk3b"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">find<span class="bp">?</span> ((y, w) :: erase σ x) z <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk3c"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (<span class="k">if</span> x <span class="bp">=</span> y <span class="k">then</span> erase σ x <span class="k">else</span> (y, w) :: erase σ x) z <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk3d"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">find<span class="bp">?</span> (erase σ y) z <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk3e"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> hxy <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">find<span class="bp">?</span> (erase σ y) z <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> σ z</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk3f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk3f"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">(<span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> (erase σ x) z) <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk40"><div class="alectryon-token"><span class="k">rw</span></div><div class="alectryon-token"> [</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (erase σ y) z <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk41"><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hxy</var><b>: </b><span>x = y</span></span></div></blockquote></div></small></div><span class="nv">hxy</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>y <span class="bp">≠</span> z</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (erase σ y) z <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk42"><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>y <span class="bp">≠</span> z</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (erase σ y) z <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"></div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk43"><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>x ≠ z</span></span></div></blockquote></div></small></div><span class="nv">h</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>y <span class="bp">≠</span> z</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (erase σ y) z <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk44"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>y ≠ z</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>symm</var><b>: </b><span>∀ {α : Type} {a b : α}, a ≠ b → b ≠ a</span></span></div></blockquote></div></small></div>symm</div><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>y <span class="bp">≠</span> z</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">find<span class="bp">?</span> (erase σ y) z <span class="bp">=</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk45"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?_erase</var><b>: </b><span>∀ {x z : Var} (σ : State), x ≠ z → find? (erase σ x) z = find? σ z</span></span></div></blockquote></div></small></div>find<span class="bp">?</span>_erase</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>y ≠ z</span></span></div></blockquote></div></small></div><span class="nv">h</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk46"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">(<span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> (erase σ x) z) <span class="bp">=</span> <span class="k">if</span> z <span class="bp">=</span> y <span class="k">then</span> some w <span class="k">else</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk47"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">some w <span class="bp">=</span> some w</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk48" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk48"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">find<span class="bp">?</span> (erase σ x) z <span class="bp">=</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk49"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">some w <span class="bp">=</span> some w</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk4a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk4a"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">find<span class="bp">?</span> (erase σ x) z <span class="bp">=</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk4b"><div class="alectryon-token"><span class="k">rfl</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk4c"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>x <span class="bp">≠</span> z</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">find<span class="bp">?</span> (erase σ x) z <span class="bp">=</span> find<span class="bp">?</span> σ z</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk4d"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?_erase</var><b>: </b><span>∀ {x z : Var} (σ : State), x ≠ z → find? (erase σ x) z = find? σ z</span></span></div></blockquote></div></small></div>find<span class="bp">?</span>_erase</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>x ≠ z</span></span></div></blockquote></div></small></div><span class="nv">h</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

<span class="c1">-- TODO: remove after we add better automation</span>
<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.find?_erase'</var><b>: </b><span>∀ {z x : Var} (σ : State), z ≠ x → find? (erase σ x) z = find? σ z</span></span></div></blockquote></div></small></div>State.find<span class="bp">?</span>_erase&#39;</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>z ≠ x</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>z</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">z</span></div><div class="alectryon-token"> <span class="bp">≠</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">) : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>erase</var><b>: </b><span>State → Var → State</span></span></div></blockquote></div></small></div>erase</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?</var><b>: </b><span>State → Var → Option Val</span></span></div></blockquote></div></small></div>find<span class="bp">?</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>z</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">z</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?</var><b>: </b><span>State → Var → Option Val</span></span></div></blockquote></div></small></div>find<span class="bp">?</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>z</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">z</span></div><div class="alectryon-token"> :=
  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.find?_erase</var><b>: </b><span>∀ {x z : Var} (σ : State), x ≠ z → find? (erase σ x) z = find? σ z</span></span></div></blockquote></div></small></div>State.find<span class="bp">?</span>_erase</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>z ≠ x</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>symm</var><b>: </b><span>∀ {α : Type} {a b : α}, a ≠ b → b ≠ a</span></span></div></blockquote></div></small></div>symm</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="k">syntax</span></div><div class="alectryon-token"> ident <span class="s2">&quot; ↦ &quot;</span> term : term

</div><div class="alectryon-token"><span class="k">macro_rules</span></div><div class="alectryon-token">
  <span class="bp">|</span> <span class="bp">`</span>(<span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>id</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">id</span></div><div class="alectryon-token">:ident <span class="bp">↦</span> <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">:term) <span class="bp">=&gt;</span> <span class="bp">`</span>((<span class="bp">$</span>(</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Lean.quote</var><b>: </b><span>{α : Type} → [self : Lean.Quote α] → α → Lean.Syntax</span></span></div></blockquote></div></small></div><span class="k">Lean.quote</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>id</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">id</span></div><div class="alectryon-token"><span class="k">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>getId</var><b>: </b><span>Lean.Syntax → Lean.Name</span></span></div></blockquote></div></small></div><span class="k">getId</span></div><div class="alectryon-token"><span class="k">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>toString</var><b>: </b><span>Lean.Name → optParam Bool true → String</span></span></div></blockquote></div></small></div><span class="k">toString</span></div><div class="alectryon-token">), <span class="bp">$</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">:term))</div><div class="alectryon-token">

</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>example</var><b>: </b><span>State.get [(&quot;x&quot;, Val.int 10), (&quot;y&quot;, Val.int 20)] &quot;x&quot; = Val.int 10</span></span></div></blockquote></div></small></div><span class="kd">example</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.get</var><b>: </b><span>State → Var → Val</span></span></div></blockquote></div></small></div>State.get</div><div class="alectryon-token"> [x <span class="bp">↦</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>10</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="mi">10</span></div><div class="alectryon-token">, y <span class="bp">↦</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>20</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="mi">20</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;x&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;x&quot;</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>10</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="mi">10</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>rfl</var><b>: </b><span>∀ {α : Type} {a : α}, a = a</span></span></div></blockquote></div></small></div>rfl</div><div class="alectryon-token">

</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>example</var><b>: </b><span>State.get [(&quot;x&quot;, 10), (&quot;y&quot;, 20)] &quot;x&quot; = 10</span></span></div></blockquote></div></small></div><span class="kd">example</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.get</var><b>: </b><span>State → Var → Val</span></span></div></blockquote></div></small></div>State.get</div><div class="alectryon-token"> [x <span class="bp">↦</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>10</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="mi">10</span></div><div class="alectryon-token">, y <span class="bp">↦</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>20</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="mi">20</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;x&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;x&quot;</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>10</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="mi">10</span></div><div class="alectryon-token">     := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>rfl</var><b>: </b><span>∀ {α : Type} {a : α}, a = a</span></span></div></blockquote></div></small></div>rfl</div><div class="alectryon-token">
</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>example</var><b>: </b><span>State.get [(&quot;x&quot;, 10), (&quot;y&quot;, Val.bool true)] &quot;y&quot; = Val.bool true</span></span></div></blockquote></div></small></div><span class="kd">example</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.get</var><b>: </b><span>State → Var → Val</span></span></div></blockquote></div></small></div>State.get</div><div class="alectryon-token"> [x <span class="bp">↦</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>10</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="mi">10</span></div><div class="alectryon-token">, y <span class="bp">↦</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>true</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>true</div><div class="alectryon-token">] </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;y&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;y&quot;</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>true</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>true</div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>rfl</var><b>: </b><span>∀ {α : Type} {a : α}, a = a</span></span></div></blockquote></div></small></div>rfl</div><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div>Expr.eval</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Option</var><b>: </b><span>Type → Type</span></span></div></blockquote></div></small></div>Option</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div>val</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">   <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>var</var><b>: </b><span>Var → Expr</span></span></div></blockquote></div></small></div>var</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">   <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>get</var><b>: </b><span>State → Var → Val</span></span></div></blockquote></div></small></div>get</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>bin</var><b>: </b><span>Expr → BinOp → Expr → Expr</span></span></div></blockquote></div></small></div>bin</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>lhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">lhs</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>rhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">rhs</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>lhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">lhs</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div><span class="nv">eval</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>rhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">rhs</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div><span class="nv">eval</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₁</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₂</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₂</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>BinOp → Val → Val → Option Val</span></span></div></blockquote></div></small></div>eval</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₁</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₂</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₂</span></div><div class="alectryon-token">  <span class="c1">-- BinOp.eval : BinOp → Val → Val → Option Val</span>
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Option Val</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">,       </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Option Val</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">       <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>none</var><b>: </b><span>{α : Type} → Option α</span></span></div></blockquote></div></small></div>none</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>una</var><b>: </b><span>UnaryOp → Expr → Expr</span></span></div></blockquote></div></small></div>una</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>arg</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">arg</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>arg</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">arg</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div><span class="nv">eval</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type ?u.24372} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>UnaryOp → Val → Option Val</span></span></div></blockquote></div></small></div>eval</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Option Val</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">      <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>none</var><b>: </b><span>{α : Type} → Option α</span></span></div></blockquote></div></small></div>none</div><div class="alectryon-token">


<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>evalTrue</var><b>: </b><span>Expr → State → Prop</span></span></div></blockquote></div></small></div>evalTrue</div><div class="alectryon-token">  (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Prop</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="kt">Prop</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div>eval</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div>Val.bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>true</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>true</div><div class="alectryon-token">)
<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>evalFalse</var><b>: </b><span>Expr → State → Prop</span></span></div></blockquote></div></small></div>evalFalse</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Prop</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="kt">Prop</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div>eval</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div>Val.bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>false</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>false</div><div class="alectryon-token">)

</div><div class="alectryon-token"><span class="kn">section</span></div><div class="alectryon-token">
</div><div class="alectryon-token"><span class="kd">set_option</span></div><div class="alectryon-token"> hygiene </div><div class="alectryon-token"><span class="k">false</span></div><div class="alectryon-token"> <span class="c1">-- HACK: allow forward reference in notation</span>
</div><div class="alectryon-token"><span class="kn">local</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="kd">notation</span></div><div class="alectryon-token">:<span class="mi">60</span> <span class="s2">&quot;(&quot;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="s2">&quot;, &quot;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> <span class="s2">&quot;)&quot;</span>  <span class="s2">&quot; ⇓ &quot;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token">:<span class="mi">60</span> <span class="bp">=&gt;</span> Bigstep </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">inductive</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep</var><b>: </b><span>State → Stmt → State → Prop</span></span></div></blockquote></div></small></div>Bigstep</div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Stmt</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Prop</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="kt">Prop</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>skip</var><b>: </b><span>∀ {σ : State}, _root_.Bigstep σ Stmt.skip σ</span></span></div></blockquote></div></small></div>skip</div><div class="alectryon-token">       : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.skip</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="bp">.</span>skip</div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assign</var><b>: </b><span>∀ {v : Val} {σ : State} {x : Var} {e : Expr}, Expr.eval σ e = some v → _root_.Bigstep σ (x ::= e) (State.update σ x v)</span></span></div></blockquote></div></small></div>assign</div><div class="alectryon-token">     : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div>eval</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">,  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> ::= </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>update</var><b>: </b><span>State → Var → Val → State</span></span></div></blockquote></div></small></div>update</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>seq</var><b>: </b><span>∀ {σ₁ : State} {s₁ : Stmt} {σ₂ : State} {s₂ : Stmt} {σ₃ : State},
  _root_.Bigstep σ₁ s₁ σ₂ → _root_.Bigstep σ₂ s₂ σ₃ → _root_.Bigstep σ₁ (s₁;; s₂) σ₃</span></span></div></blockquote></div></small></div>seq</div><div class="alectryon-token">        : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₃</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₃</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁</span></div><div class="alectryon-token"> <span class="bp">;;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₃</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₃</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ifTrue</var><b>: </b><span>∀ {c : Expr} {σ₁ : State} {t : Stmt} {σ₂ : State} {e : Stmt},
  evalTrue c σ₁ → _root_.Bigstep σ₁ t σ₂ → _root_.Bigstep σ₁ (Stmt.ite c t e) σ₂</span></span></div></blockquote></div></small></div>ifTrue</div><div class="alectryon-token">     : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>evalTrue</var><b>: </b><span>Expr → State → Prop</span></span></div></blockquote></div></small></div>evalTrue</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">t</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.ite</var><b>: </b><span>Expr → Stmt → Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="bp">.</span>ite</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">t</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ifFalse</var><b>: </b><span>∀ {c : Expr} {σ₁ : State} {e : Stmt} {σ₂ : State} {t : Stmt},
  evalFalse c σ₁ → _root_.Bigstep σ₁ e σ₂ → _root_.Bigstep σ₁ (Stmt.ite c t e) σ₂</span></span></div></blockquote></div></small></div>ifFalse</div><div class="alectryon-token">    : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>evalFalse</var><b>: </b><span>Expr → State → Prop</span></span></div></blockquote></div></small></div>evalFalse</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.ite</var><b>: </b><span>Expr → Stmt → Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="bp">.</span>ite</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">t</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>whileTrue</var><b>: </b><span>∀ {c : Expr} {σ₁ : State} {b : Stmt} {σ₂ σ₃ : State},
  evalTrue c σ₁ → _root_.Bigstep σ₁ b σ₂ → _root_.Bigstep σ₂ (Stmt.while c b) σ₃ → _root_.Bigstep σ₁ (Stmt.while c b) σ₃</span></span></div></blockquote></div></small></div>whileTrue</div><div class="alectryon-token">  : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>evalTrue</var><b>: </b><span>Expr → State → Prop</span></span></div></blockquote></div></small></div>evalTrue</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.«while»</var><b>: </b><span>Expr → Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="bp">.«</span>while<span class="bp">»</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₃</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₃</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.«while»</var><b>: </b><span>Expr → Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="bp">.«</span>while<span class="bp">»</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₃</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₃</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>whileFalse</var><b>: </b><span>∀ {c : Expr} {σ : State} {b : Stmt}, evalFalse c σ → _root_.Bigstep σ (Stmt.while c b) σ</span></span></div></blockquote></div></small></div>whileFalse</div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>evalFalse</var><b>: </b><span>Expr → State → Prop</span></span></div></blockquote></div></small></div>evalFalse</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">→</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.«while»</var><b>: </b><span>Expr → Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="bp">.«</span>while<span class="bp">»</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">end</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">notation</span></div><div class="alectryon-token">:<span class="mi">60</span> <span class="s2">&quot;(&quot;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="s2">&quot;, &quot;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> <span class="s2">&quot;)&quot;</span>  <span class="s2">&quot; ⇓ &quot;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token">:<span class="mi">60</span> <span class="bp">=&gt;</span> Bigstep </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>Lean.Syntax</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token">

<span class="c">/-</span><span class="cm"> This proof can be automated using forward reasoning. -/</span>
</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstem.det</var><b>: </b><span>∀ {σ : State} {s : Stmt} {σ₁ σ₂ : State}, (σ, s) ⇓ σ₁ → (σ, s) ⇓ σ₂ → σ₁ = σ₂</span></span></div></blockquote></div></small></div>Bigstem.det</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₁</var><b>: </b><span>(σ, s) ⇓ σ₁</span></span></div></blockquote></div></small></div><span class="nv">h₁</span></div><div class="alectryon-token"> : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>(σ, s) ⇓ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div><div class="alectryon-token"> : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk4e"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁, σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ, s) <span class="bp">⇓</span> σ₁</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ, s) <span class="bp">⇓</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ₁ <span class="bp">=</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk4f"><div class="alectryon-token"><span class="k">induction</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₁</var><b>: </b><span>(σ, s) ⇓ σ₁</span></span></div></blockquote></div></small></div><span class="nv">h₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">generalizing</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁, σ✝, σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ<span class="bp">✝</span>, Stmt.skip) <span class="bp">⇓</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">skip</span></span><div class="goal-conclusion">σ<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk50" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>a✝</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ<span class="bp">✝</span>, x<span class="bp">✝</span> ::= e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk50"><hr><span class="goal-name">assign</span></label><div class="goal-conclusion">State.update σ<span class="bp">✝</span> x<span class="bp">✝</span> v<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk51" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁, σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s₁✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s₂✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, s₁<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>a✝</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>a_ih✝</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₂<span class="bp">✝</span>, s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, s₁<span class="bp">✝;;</span> s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk51"><hr><span class="goal-name">seq</span></label><div class="goal-conclusion">σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk52" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>a✝</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>a_ih✝</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, Stmt.ite c<span class="bp">✝</span> t<span class="bp">✝</span> e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk52"><hr><span class="goal-name">ifTrue</span></label><div class="goal-conclusion">σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk53" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>a✝</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>a_ih✝</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, Stmt.ite c<span class="bp">✝</span> t<span class="bp">✝</span> e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk53"><hr><span class="goal-name">ifFalse</span></label><div class="goal-conclusion">σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk54" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>a✝</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, Stmt.while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>a_ih✝</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₂<span class="bp">✝</span>, Stmt.while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, Stmt.while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk54"><hr><span class="goal-name">whileTrue</span></label><div class="goal-conclusion">σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk55" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>a✝</var><span class="hyp-type"><b>: </b><span>evalFalse c<span class="bp">✝</span> σ<span class="bp">✝</span></span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ<span class="bp">✝</span>, Stmt.while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk55"><hr><span class="goal-name">whileFalse</span></label><div class="goal-conclusion">σ<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk56"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁, σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ, s) <span class="bp">⇓</span> σ₁</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ, s) <span class="bp">⇓</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ₁ <span class="bp">=</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk57"><div class="alectryon-token"><span class="k">cases</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>(σ✝, Stmt.skip) ⇓ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>a✝³</var><span class="hyp-type"><b>: </b><span>evalFalse c<span class="bp">✝</span> σ₁<span class="bp">✝</span></span></span></span><br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>a_ih✝</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span>evalTrue c<span class="bp">✝</span> σ₁<span class="bp">✝</span></span></span></span><br><span><var>a✝</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse.ifTrue</span></span><div class="goal-conclusion">σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk58" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>a✝³</var><span class="hyp-type"><b>: </b><span>evalFalse c<span class="bp">✝</span> σ₁<span class="bp">✝</span></span></span></span><br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>a_ih✝</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span>evalFalse c<span class="bp">✝</span> σ₁<span class="bp">✝</span></span></span></span><br><span><var>a✝</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk58"><hr><span class="goal-name">ifFalse.ifFalse</span></label><div class="goal-conclusion">σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk59"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>a✝</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>a_ih✝</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, Stmt.ite c<span class="bp">✝</span> t<span class="bp">✝</span> e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse</span></span><div class="goal-conclusion">σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk5a"><div class="alectryon-token"><span class="k">simp_all</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk5b"><div class="alectryon-token"><span class="c1">-- The rest of this proof should be automatic with congruence closure and a bit of forward reasoning</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁, σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ, s) <span class="bp">⇓</span> σ₁</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ, s) <span class="bp">⇓</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ₁ <span class="bp">=</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk5c"><div class="alectryon-token"><span class="k">case</span></div><div class="alectryon-token"> seq ih₁ ih₂ h₁ h₂ <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁, σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s₁✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝¹</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s₂✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₃✝, σ₂, σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>a✝</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝¹</span>, s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₁<span class="bp">✝</span>, s₁<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₂<span class="bp">✝¹</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₂<span class="bp">✝¹</span>, s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, s₁<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk5d"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₁</var><b>: </b><span>∀ {σ₂ : State}, (σ₁✝, s₁✝) ⇓ σ₂ → σ₂✝¹ = σ₂</span></span></div></blockquote></div></small></div><span class="nv">ih₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₁</var><b>: </b><span>(σ₁✝, s₁✝) ⇓ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">h₁</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₂</var><b>: </b><span>∀ {σ₂ : State}, (σ₂✝¹, s₂✝) ⇓ σ₂ → σ₃✝ = σ₂</span></span></div></blockquote></div></small></div><span class="nv">ih₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁, σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s₁✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝¹</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s₂✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₃✝, σ₂, σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>a✝</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝¹</span>, s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₁<span class="bp">✝</span>, s₁<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₂<span class="bp">✝¹</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, s₁<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₂<span class="bp">✝</span>, s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk5e"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₂</var><b>: </b><span>∀ {σ₂ : State}, (σ₂✝, s₂✝) ⇓ σ₂ → σ₃✝ = σ₂</span></span></div></blockquote></div></small></div><span class="nv">ih₂</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>(σ₂✝, s₂✝) ⇓ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk5f"><div class="alectryon-token"><span class="k">case</span></div><div class="alectryon-token"> ifTrue ih _ h <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk60"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>∀ {σ₂ : State}, (σ₁✝, t✝) ⇓ σ₂ → σ₂✝ = σ₂</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>(σ₁✝, t✝) ⇓ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk61"><div class="alectryon-token"><span class="k">case</span></div><div class="alectryon-token"> ifFalse ih _ h <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ₂<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk62"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>∀ {σ₂ : State}, (σ₁✝, e✝) ⇓ σ₂ → σ₂✝ = σ₂</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>(σ₁✝, e✝) ⇓ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk63"><div class="alectryon-token"><span class="k">case</span></div><div class="alectryon-token"> whileTrue ih₁ ih₂ _ h₁ h₂ <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝¹, σ₃✝, σ₂, σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝¹</span>, Stmt.while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₂<span class="bp">✝¹</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₂<span class="bp">✝¹</span>, Stmt.while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, Stmt.while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk64"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₁</var><b>: </b><span>∀ {σ₂ : State}, (σ₁✝, b✝) ⇓ σ₂ → σ₂✝¹ = σ₂</span></span></div></blockquote></div></small></div><span class="nv">ih₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₁</var><b>: </b><span>(σ₁✝, b✝) ⇓ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">h₁</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₂</var><b>: </b><span>∀ {σ₂ : State}, (σ₂✝¹, Stmt.while c✝ b✝) ⇓ σ₂ → σ₃✝ = σ₂</span></span></div></blockquote></div></small></div><span class="nv">ih₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝¹, σ₃✝, σ₂, σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝¹</span>, Stmt.while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₂<span class="bp">✝¹</span> <span class="bp">=</span> σ₂</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, Stmt.while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₂ : State}, (σ₂<span class="bp">✝</span>, Stmt.while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂ <span class="bp">→</span> σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ₃<span class="bp">✝</span> <span class="bp">=</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk65"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₂</var><b>: </b><span>∀ {σ₂ : State}, (σ₂✝, Stmt.while c✝ b✝) ⇓ σ₂ → σ₃✝ = σ₂</span></span></div></blockquote></div></small></div><span class="nv">ih₂</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>(σ₂✝, Stmt.while c✝ b✝) ⇓ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

</div><div class="alectryon-token"><span class="k">abbrev</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>EvalM</var><b>: </b><span>Type → Type</span></span></div></blockquote></div></small></div>EvalM</div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ExceptT</var><b>: </b><span>Type → (Type → Type) → Type → Type</span></span></div></blockquote></div></small></div>ExceptT</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>String</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>String</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>StateM</var><b>: </b><span>Type → Type → Type</span></span></div></blockquote></div></small></div>StateM</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">)

</div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>evalExpr</var><b>: </b><span>Expr → EvalM Val</span></span></div></blockquote></div></small></div>evalExpr</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>EvalM</var><b>: </b><span>Type → Type</span></span></div></blockquote></div></small></div>EvalM</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token"> := </div><div class="alectryon-token"><span class="k">do</span></div><div class="alectryon-token">
  </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div>eval</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(← get)</var><b>: </b><span>State</span></span></div></blockquote></div></small></div>(<span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>get</var><b>: </b><span>{σ : Type} → {m : Type → Type} → [self : MonadState σ m] → m σ</span></span></div></blockquote></div></small></div><span class="nv">get</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(← get)</var><b>: </b><span>State</span></span></div></blockquote></div></small></div>)</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type ?u.33712} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">return</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>none</var><b>: </b><span>{α : Type ?u.33907} → Option α</span></span></div></blockquote></div></small></div>none</div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>throw</var><b>: </b><span>{ε : Type} → {m : Type → Type} → [self : MonadExcept ε m] → {α : Type} → ε → m α</span></span></div></blockquote></div></small></div>throw</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;failed to evaluate&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;failed to evaluate&quot;</span></div><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt.eval</var><b>: </b><span>Stmt → optParam Nat 100 → EvalM Unit</span></span></div></blockquote></div></small></div>Stmt.eval</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>stmt</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">stmt</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Stmt</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fuel</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="nv">fuel</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Nat</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Nat</div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>100</var><b>: </b><span>Nat</span></span></div></blockquote></div></small></div><span class="mi">100</span></div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>EvalM</var><b>: </b><span>Type → Type</span></span></div></blockquote></div></small></div>EvalM</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Unit</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Unit</div><div class="alectryon-token"> := </div><div class="alectryon-token"><span class="k">do</span></div><div class="alectryon-token">
  </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fuel</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="nv">fuel</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>0</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="mi">0</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>throw</var><b>: </b><span>{ε : Type} → {m : Type → Type} → [self : MonadExcept ε m] → {α : Type} → ε → m α</span></span></div></blockquote></div></small></div>throw</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;out of fuel&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;out of fuel&quot;</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fuel</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="nv">fuel</span></div><div class="alectryon-token"><span class="bp">+</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>1</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="mi">1</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span>
    </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>stmt</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">stmt</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>skip</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>skip</div><div class="alectryon-token">        <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">return</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>()</var><b>: </b><span>Unit</span></span></div></blockquote></div></small></div>()</div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assign</var><b>: </b><span>Var → Expr → Stmt</span></span></div></blockquote></div></small></div>assign</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token">  <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">let</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> <span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>evalExpr</var><b>: </b><span>Expr → EvalM Val</span></span></div></blockquote></div></small></div>evalExpr</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>modify</var><b>: </b><span>{σ : Type} → {m : Type → Type} → [inst : MonadState σ m] → (σ → σ) → m PUnit</span></span></div></blockquote></div></small></div>modify</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">fun</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>update</var><b>: </b><span>State → Var → Val → State</span></span></div></blockquote></div></small></div>update</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>seq</var><b>: </b><span>Stmt → Stmt → Stmt</span></span></div></blockquote></div></small></div>seq</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂</span></div><div class="alectryon-token">   <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>Stmt → optParam Nat 100 → EvalM Unit</span></span></div></blockquote></div></small></div><span class="nv">eval</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fuel</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="nv">fuel</span></div><div class="alectryon-token"><span class="bp">;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>Stmt → optParam Nat 100 → EvalM Unit</span></span></div></blockquote></div></small></div><span class="nv">eval</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fuel</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="nv">fuel</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ite</var><b>: </b><span>Expr → Stmt → Stmt → Stmt</span></span></div></blockquote></div></small></div>ite</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">t</span></div><div class="alectryon-token">   <span class="bp">=&gt;</span>
      </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(← evalExpr c)</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div>(<span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>evalExpr</var><b>: </b><span>Expr → EvalM Val</span></span></div></blockquote></div></small></div><span class="nv">evalExpr</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(← evalExpr c)</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(← evalExpr c)</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div>)</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
      <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>true</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>true</div><div class="alectryon-token">  <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>Stmt → optParam Nat 100 → EvalM Unit</span></span></div></blockquote></div></small></div><span class="nv">eval</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fuel</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="nv">fuel</span></div><div class="alectryon-token">
      <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>false</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>false</div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">t</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>Stmt → optParam Nat 100 → EvalM Unit</span></span></div></blockquote></div></small></div><span class="nv">eval</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fuel</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="nv">fuel</span></div><div class="alectryon-token">
      <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>throw</var><b>: </b><span>{ε : Type} → {m : Type → Type} → [self : MonadExcept ε m] → {α : Type} → ε → m α</span></span></div></blockquote></div></small></div>throw</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;Boolean expected&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;Boolean expected&quot;</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>«while»</var><b>: </b><span>Expr → Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="bp">«</span>while<span class="bp">»</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span>
      </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(← evalExpr c)</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div>(<span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>evalExpr</var><b>: </b><span>Expr → EvalM Val</span></span></div></blockquote></div></small></div><span class="nv">evalExpr</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(← evalExpr c)</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(← evalExpr c)</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div>)</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
      <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>true</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>true</div><div class="alectryon-token">  <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>Stmt → optParam Nat 100 → EvalM Unit</span></span></div></blockquote></div></small></div><span class="nv">eval</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fuel</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="nv">fuel</span></div><div class="alectryon-token"><span class="bp">;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>stmt</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">stmt</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>Stmt → optParam Nat 100 → EvalM Unit</span></span></div></blockquote></div></small></div><span class="nv">eval</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fuel</var><b>: </b><span>optParam Nat 100</span></span></div></blockquote></div></small></div><span class="nv">fuel</span></div><div class="alectryon-token">
      <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>false</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>false</div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">return</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>()</var><b>: </b><span>Unit</span></span></div></blockquote></div></small></div>()</div><div class="alectryon-token">
      <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>throw</var><b>: </b><span>{ε : Type} → {m : Type → Type} → [self : MonadExcept ε m] → {α : Type} → ε → m α</span></span></div></blockquote></div></small></div>throw</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;Boolean expected&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;Boolean expected&quot;</span></div><div class="alectryon-token">

</div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk66"><div class="alectryon-token"><span class="k">#eval</span></div></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">(Except.ok (), [(<span class="s2">&quot;x&quot;</span>, Val.int <span class="mi">8</span>), (<span class="s2">&quot;y&quot;</span>, Val.int <span class="mi">5</span>)])
</blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> <span class="bp">`</span>[Stmt<span class="bp">|</span> x := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>3</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">3</span></div><div class="alectryon-token"><span class="bp">;</span> y := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>5</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">5</span></div><div class="alectryon-token"><span class="bp">;</span> x := x <span class="bp">+</span> y<span class="bp">;</span>]<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>Stmt → optParam Nat 100 → EvalM Unit</span></span></div></blockquote></div></small></div><span class="na">eval</span></div><div class="alectryon-token"> <span class="bp">|&gt;.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>run</var><b>: </b><span>{ε : Type} → {m : Type → Type} → {α : Type} → ExceptT ε m α → m (Except ε α)</span></span></div></blockquote></div></small></div>run</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>{}</var><b>: </b><span>State</span></span></div></blockquote></div></small></div>{}</div><div class="alectryon-token">
</div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk67"><div class="alectryon-token"><span class="k">#eval</span></div></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">(Except.error <span class="s2">&quot;out of fuel&quot;</span>, [(<span class="s2">&quot;x&quot;</span>, Val.int <span class="mi">98</span>)])
</blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> <span class="bp">`</span>[Stmt<span class="bp">|</span> x := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>0</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">0</span></div><div class="alectryon-token"><span class="bp">;</span> </div><div class="alectryon-token"><span class="k">while</span></div><div class="alectryon-token"> (true) { x := x <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>1</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">1</span></div><div class="alectryon-token"><span class="bp">;</span> }]<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>Stmt → optParam Nat 100 → EvalM Unit</span></span></div></blockquote></div></small></div><span class="na">eval</span></div><div class="alectryon-token"> <span class="bp">|&gt;.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>run</var><b>: </b><span>{ε : Type} → {m : Type → Type} → {α : Type} → ExceptT ε m α → m (Except ε α)</span></span></div></blockquote></div></small></div>run</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>{}</var><b>: </b><span>State</span></span></div></blockquote></div></small></div>{}</div><div class="alectryon-token">

</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>instance</var><b>: </b><span>Repr State</span></span></div></blockquote></div></small></div><span class="kd">instance</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Repr</var><b>: </b><span>Type → Type</span></span></div></blockquote></div></small></div>Repr</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">where</span></div><div class="alectryon-token">
  reprPrec </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>n</var><b>: </b><span>Nat</span></span></div></blockquote></div></small></div><span class="nv">n</span></div><div class="alectryon-token"> :=
    </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>n</var><b>: </b><span>Nat</span></span></div></blockquote></div></small></div><span class="nv">n</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
    <span class="bp">|</span> [], </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Nat</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;[]&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;[]&quot;</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>as</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">as</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Nat</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token"> <span class="bp">=&gt;</span>
      </div><div class="alectryon-token"><span class="k">let</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fs</var><b>: </b><span>List Std.Format</span></span></div></blockquote></div></small></div><span class="nv">fs</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>as</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">as</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>map</var><b>: </b><span>{α β : Type} → (α → β) → List α → List β</span></span></div></blockquote></div></small></div>map</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">fun</span></div><div class="alectryon-token">
        <span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">)  <span class="bp">=&gt;</span> </div><div class="alectryon-token">f<span class="bp">!</span></div><div class="alectryon-token"><span class="s2">&quot;{</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">} <span class="bp">↦</span> {</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">}<span class="s2">&quot;</span>
<span class="s2">        | (</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) <span class="bp">=&gt;</span> </div><div class="alectryon-token">f<span class="bp">!</span></div><div class="alectryon-token"><span class="s2">&quot;{</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">} <span class="bp">↦</span> {</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">}<span class="s2">&quot;</span>
      </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Std.Format.bracket</var><b>: </b><span>String → Std.Format → String → Std.Format</span></span></div></blockquote></div></small></div>Std.Format.bracket</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;[&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;[&quot;</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Std.Format.joinSep</var><b>: </b><span>{α : Type} → [inst : Std.ToFormat α] → List α → Std.Format → Std.Format</span></span></div></blockquote></div></small></div>Std.Format.joinSep</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fs</var><b>: </b><span>List Std.Format</span></span></div></blockquote></div></small></div><span class="nv">fs</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;,&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;,&quot;</span></div><div class="alectryon-token"> <span class="bp">++</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Std.Format.line</var><b>: </b><span>Std.Format</span></span></div></blockquote></div></small></div>Std.Format.line</div><div class="alectryon-token">)) </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>&quot;]&quot;</var><b>: </b><span>String</span></span></div></blockquote></div></small></div><span class="s2">&quot;]&quot;</span></div><div class="alectryon-token">

</div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk68"><div class="alectryon-token"><span class="k">#eval</span></div></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">(Except.ok (), [x <span class="bp">↦</span> <span class="mi">8</span>, y <span class="bp">↦</span> <span class="mi">5</span>])
</blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> <span class="bp">`</span>[Stmt<span class="bp">|</span> x := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>3</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">3</span></div><div class="alectryon-token"><span class="bp">;</span> y := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>5</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">5</span></div><div class="alectryon-token"><span class="bp">;</span> x := x <span class="bp">+</span> y<span class="bp">;</span> ]<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>Stmt → optParam Nat 100 → EvalM Unit</span></span></div></blockquote></div></small></div><span class="na">eval</span></div><div class="alectryon-token"> <span class="bp">|&gt;.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>run</var><b>: </b><span>{ε : Type} → {m : Type → Type} → {α : Type} → ExceptT ε m α → m (Except ε α)</span></span></div></blockquote></div></small></div>run</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>{}</var><b>: </b><span>State</span></span></div></blockquote></div></small></div>{}</div><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>BinOp.simplify</var><b>: </b><span>BinOp → Expr → Expr → Expr</span></span></div></blockquote></div></small></div>BinOp.simplify</div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>BinOp</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>BinOp</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.eq</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>eq</div><div class="alectryon-token">,  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₁</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₁</span></div><div class="alectryon-token">,  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token">  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₂</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₂</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₁</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₁</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v₂</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v₂</span></div><div class="alectryon-token">))
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.and</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>and</div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token">), </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">) <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token"> <span class="bp">&amp;&amp;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">))
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.lt</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>lt</div><div class="alectryon-token">,  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token">),  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">)  <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token"> <span class="bp">&lt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">))
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.add</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>add</div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token">), </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">) <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token"> <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">))
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.sub</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>sub</div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token">), </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">) <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.int</var><b>: </b><span>Int → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>int</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token"> <span class="bp">-</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Int</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">))
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bin</var><b>: </b><span>Expr → BinOp → Expr → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>bin</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>UnaryOp.simplify</var><b>: </b><span>UnaryOp → Expr → Expr</span></span></div></blockquote></div></small></div>UnaryOp.simplify</div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>UnaryOp</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>UnaryOp</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.not</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div><span class="bp">.</span>not</div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">) <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> <span class="bp">!</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.una</var><b>: </b><span>UnaryOp → Expr → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>una</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">a</span></div><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.simplify</var><b>: </b><span>Expr → Expr</span></span></div></blockquote></div></small></div>Expr.simplify</div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>bin</var><b>: </b><span>Expr → BinOp → Expr → Expr</span></span></div></blockquote></div></small></div>bin</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>lhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">lhs</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>rhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">rhs</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>BinOp → Expr → Expr → Expr</span></span></div></blockquote></div></small></div>simplify</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>lhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">lhs</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Expr → Expr</span></span></div></blockquote></div></small></div><span class="nv">simplify</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>rhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">rhs</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Expr → Expr</span></span></div></blockquote></div></small></div><span class="nv">simplify</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>una</var><b>: </b><span>UnaryOp → Expr → Expr</span></span></div></blockquote></div></small></div>una</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>arg</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">arg</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>UnaryOp → Expr → Expr</span></span></div></blockquote></div></small></div>simplify</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>arg</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">arg</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Expr → Expr</span></span></div></blockquote></div></small></div><span class="nv">simplify</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.eval_simplify</var><b>: </b><span>∀ {σ : State} (e : Expr), eval σ (simplify e) = eval σ e</span></span></div></blockquote></div></small></div>Expr.eval_simplify</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Expr → Expr</span></span></div></blockquote></div></small></div>simplify</div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div>eval</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div>eval</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk69"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eval σ (simplify e) <span class="bp">=</span> eval σ e</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk6a"><div class="alectryon-token"><span class="k">induction</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eval σ (simplify e) <span class="bp">=</span> eval σ e</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk6b"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk6c"><div class="alectryon-token"><span class="bp">|</span> bin lhs op rhs ih_lhs ih_rhs <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>lhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>BinOp</span></span></span><br><span><var>rhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_lhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify lhs) <span class="bp">=</span> eval σ lhs</span></span></span><br><span><var>ih_rhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify rhs) <span class="bp">=</span> eval σ rhs</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">bin</span></span><div class="goal-conclusion">eval σ
    (<span class="k">match</span> op, simplify lhs, simplify rhs <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, val v₁, val v₂ <span class="bp">=&gt;</span> val (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, val (Val.bool a), val (Val.bool b) <span class="bp">=&gt;</span> val (Val.bool (a <span class="bp">&amp;&amp;</span> b))
    <span class="bp">|</span> BinOp.lt, val (Val.int a), val (Val.int b) <span class="bp">=&gt;</span> val (Val.bool (decide (a <span class="bp">&lt;</span> b)))
    <span class="bp">|</span> BinOp.add, val (Val.int a), val (Val.int b) <span class="bp">=&gt;</span> val (Val.int (a <span class="bp">+</span> b))
    <span class="bp">|</span> BinOp.sub, val (Val.int a), val (Val.int b) <span class="bp">=&gt;</span> val (Val.int (a <span class="bp">-</span> b))
    <span class="bp">|</span> op, a, b <span class="bp">=&gt;</span> bin a op b) <span class="bp">=</span>
  <span class="k">match</span> eval σ lhs, eval σ rhs <span class="k">with</span>
  <span class="bp">|</span> some v₁, some v₂ <span class="bp">=&gt;</span>
    <span class="k">match</span> op, v₁, v₂ <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, v₁, v₂ <span class="bp">=&gt;</span> some (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, Val.bool b₁, Val.bool b₂ <span class="bp">=&gt;</span> some (Val.bool (b₁ <span class="bp">&amp;&amp;</span> b₂))
    <span class="bp">|</span> BinOp.lt, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.bool (decide (i₁ <span class="bp">&lt;</span> i₂)))
    <span class="bp">|</span> BinOp.add, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">+</span> i₂))
    <span class="bp">|</span> BinOp.sub, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">-</span> i₂))
    <span class="bp">|</span> x, x_1, x_2 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk6d"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih_lhs</var><b>: </b><span>eval σ (simplify lhs) = eval σ lhs</span></span></div></blockquote></div></small></div><span class="nv">ih_lhs</span></div><div class="alectryon-token">, <span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih_rhs</var><b>: </b><span>eval σ (simplify rhs) = eval σ rhs</span></span></div></blockquote></div></small></div><span class="nv">ih_rhs</span></div><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>lhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>BinOp</span></span></span><br><span><var>rhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_lhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify lhs) <span class="bp">=</span> eval σ lhs</span></span></span><br><span><var>ih_rhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify rhs) <span class="bp">=</span> eval σ rhs</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">bin</span></span><div class="goal-conclusion">eval σ
    (<span class="k">match</span> op, simplify lhs, simplify rhs <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, val v₁, val v₂ <span class="bp">=&gt;</span> val (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, val (Val.bool a), val (Val.bool b) <span class="bp">=&gt;</span> val (Val.bool (a <span class="bp">&amp;&amp;</span> b))
    <span class="bp">|</span> BinOp.lt, val (Val.int a), val (Val.int b) <span class="bp">=&gt;</span> val (Val.bool (decide (a <span class="bp">&lt;</span> b)))
    <span class="bp">|</span> BinOp.add, val (Val.int a), val (Val.int b) <span class="bp">=&gt;</span> val (Val.int (a <span class="bp">+</span> b))
    <span class="bp">|</span> BinOp.sub, val (Val.int a), val (Val.int b) <span class="bp">=&gt;</span> val (Val.int (a <span class="bp">-</span> b))
    <span class="bp">|</span> op, a, b <span class="bp">=&gt;</span> bin a op b) <span class="bp">=</span>
  <span class="k">match</span> eval σ (simplify lhs), eval σ (simplify rhs) <span class="k">with</span>
  <span class="bp">|</span> some v₁, some v₂ <span class="bp">=&gt;</span>
    <span class="k">match</span> op, v₁, v₂ <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, v₁, v₂ <span class="bp">=&gt;</span> some (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, Val.bool b₁, Val.bool b₂ <span class="bp">=&gt;</span> some (Val.bool (b₁ <span class="bp">&amp;&amp;</span> b₂))
    <span class="bp">|</span> BinOp.lt, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.bool (decide (i₁ <span class="bp">&lt;</span> i₂)))
    <span class="bp">|</span> BinOp.add, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">+</span> i₂))
    <span class="bp">|</span> BinOp.sub, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">-</span> i₂))
    <span class="bp">|</span> x, x_1, x_2 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk6e"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>lhs, rhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_lhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify lhs) <span class="bp">=</span> eval σ lhs</span></span></span><br><span><var>ih_rhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify rhs) <span class="bp">=</span> eval σ rhs</span></span></span><br><span><var>v₁✝, v₂✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">bin.h_1</span></span><div class="goal-conclusion">eval σ (val (Val.bool (decide (v₁<span class="bp">✝</span> <span class="bp">=</span> v₂<span class="bp">✝</span>)))) <span class="bp">=</span>
  <span class="k">match</span> eval σ (val v₁<span class="bp">✝</span>), eval σ (val v₂<span class="bp">✝</span>) <span class="k">with</span>
  <span class="bp">|</span> some v₁, some v₂ <span class="bp">=&gt;</span>
    <span class="k">match</span> BinOp.eq, v₁, v₂ <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, v₁, v₂ <span class="bp">=&gt;</span> some (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, Val.bool b₁, Val.bool b₂ <span class="bp">=&gt;</span> some (Val.bool (b₁ <span class="bp">&amp;&amp;</span> b₂))
    <span class="bp">|</span> BinOp.lt, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.bool (decide (i₁ <span class="bp">&lt;</span> i₂)))
    <span class="bp">|</span> BinOp.add, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">+</span> i₂))
    <span class="bp">|</span> BinOp.sub, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">-</span> i₂))
    <span class="bp">|</span> x, x_1, x_2 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk6f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>lhs, rhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_lhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify lhs) <span class="bp">=</span> eval σ lhs</span></span></span><br><span><var>ih_rhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify rhs) <span class="bp">=</span> eval σ rhs</span></span></span><br><span><var>a✝, b✝</var><span class="hyp-type"><b>: </b><span>Bool</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk6f"><hr><span class="goal-name">bin.h_2</span></label><div class="goal-conclusion">eval σ (val (Val.bool (a<span class="bp">✝</span> <span class="bp">&amp;&amp;</span> b<span class="bp">✝</span>))) <span class="bp">=</span>
  <span class="k">match</span> eval σ (val (Val.bool a<span class="bp">✝</span>)), eval σ (val (Val.bool b<span class="bp">✝</span>)) <span class="k">with</span>
  <span class="bp">|</span> some v₁, some v₂ <span class="bp">=&gt;</span>
    <span class="k">match</span> BinOp.and, v₁, v₂ <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, v₁, v₂ <span class="bp">=&gt;</span> some (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, Val.bool b₁, Val.bool b₂ <span class="bp">=&gt;</span> some (Val.bool (b₁ <span class="bp">&amp;&amp;</span> b₂))
    <span class="bp">|</span> BinOp.lt, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.bool (decide (i₁ <span class="bp">&lt;</span> i₂)))
    <span class="bp">|</span> BinOp.add, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">+</span> i₂))
    <span class="bp">|</span> BinOp.sub, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">-</span> i₂))
    <span class="bp">|</span> x, x_1, x_2 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none</div></blockquote><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk70" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>lhs, rhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_lhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify lhs) <span class="bp">=</span> eval σ lhs</span></span></span><br><span><var>ih_rhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify rhs) <span class="bp">=</span> eval σ rhs</span></span></span><br><span><var>a✝, b✝</var><span class="hyp-type"><b>: </b><span>Int</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk70"><hr><span class="goal-name">bin.h_3</span></label><div class="goal-conclusion">eval σ (val (Val.bool (decide (a<span class="bp">✝</span> <span class="bp">&lt;</span> b<span class="bp">✝</span>)))) <span class="bp">=</span>
  <span class="k">match</span> eval σ (val (Val.int a<span class="bp">✝</span>)), eval σ (val (Val.int b<span class="bp">✝</span>)) <span class="k">with</span>
  <span class="bp">|</span> some v₁, some v₂ <span class="bp">=&gt;</span>
    <span class="k">match</span> BinOp.lt, v₁, v₂ <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, v₁, v₂ <span class="bp">=&gt;</span> some (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, Val.bool b₁, Val.bool b₂ <span class="bp">=&gt;</span> some (Val.bool (b₁ <span class="bp">&amp;&amp;</span> b₂))
    <span class="bp">|</span> BinOp.lt, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.bool (decide (i₁ <span class="bp">&lt;</span> i₂)))
    <span class="bp">|</span> BinOp.add, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">+</span> i₂))
    <span class="bp">|</span> BinOp.sub, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">-</span> i₂))
    <span class="bp">|</span> x, x_1, x_2 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none</div></blockquote><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk71" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>lhs, rhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_lhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify lhs) <span class="bp">=</span> eval σ lhs</span></span></span><br><span><var>ih_rhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify rhs) <span class="bp">=</span> eval σ rhs</span></span></span><br><span><var>a✝, b✝</var><span class="hyp-type"><b>: </b><span>Int</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk71"><hr><span class="goal-name">bin.h_4</span></label><div class="goal-conclusion">eval σ (val (Val.int (a<span class="bp">✝</span> <span class="bp">+</span> b<span class="bp">✝</span>))) <span class="bp">=</span>
  <span class="k">match</span> eval σ (val (Val.int a<span class="bp">✝</span>)), eval σ (val (Val.int b<span class="bp">✝</span>)) <span class="k">with</span>
  <span class="bp">|</span> some v₁, some v₂ <span class="bp">=&gt;</span>
    <span class="k">match</span> BinOp.add, v₁, v₂ <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, v₁, v₂ <span class="bp">=&gt;</span> some (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, Val.bool b₁, Val.bool b₂ <span class="bp">=&gt;</span> some (Val.bool (b₁ <span class="bp">&amp;&amp;</span> b₂))
    <span class="bp">|</span> BinOp.lt, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.bool (decide (i₁ <span class="bp">&lt;</span> i₂)))
    <span class="bp">|</span> BinOp.add, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">+</span> i₂))
    <span class="bp">|</span> BinOp.sub, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">-</span> i₂))
    <span class="bp">|</span> x, x_1, x_2 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none</div></blockquote><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk72" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>lhs, rhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_lhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify lhs) <span class="bp">=</span> eval σ lhs</span></span></span><br><span><var>ih_rhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify rhs) <span class="bp">=</span> eval σ rhs</span></span></span><br><span><var>a✝, b✝</var><span class="hyp-type"><b>: </b><span>Int</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk72"><hr><span class="goal-name">bin.h_5</span></label><div class="goal-conclusion">eval σ (val (Val.int (a<span class="bp">✝</span> <span class="bp">-</span> b<span class="bp">✝</span>))) <span class="bp">=</span>
  <span class="k">match</span> eval σ (val (Val.int a<span class="bp">✝</span>)), eval σ (val (Val.int b<span class="bp">✝</span>)) <span class="k">with</span>
  <span class="bp">|</span> some v₁, some v₂ <span class="bp">=&gt;</span>
    <span class="k">match</span> BinOp.sub, v₁, v₂ <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, v₁, v₂ <span class="bp">=&gt;</span> some (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, Val.bool b₁, Val.bool b₂ <span class="bp">=&gt;</span> some (Val.bool (b₁ <span class="bp">&amp;&amp;</span> b₂))
    <span class="bp">|</span> BinOp.lt, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.bool (decide (i₁ <span class="bp">&lt;</span> i₂)))
    <span class="bp">|</span> BinOp.add, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">+</span> i₂))
    <span class="bp">|</span> BinOp.sub, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">-</span> i₂))
    <span class="bp">|</span> x, x_1, x_2 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none</div></blockquote><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk73" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>lhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>BinOp</span></span></span><br><span><var>rhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_lhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify lhs) <span class="bp">=</span> eval σ lhs</span></span></span><br><span><var>ih_rhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify rhs) <span class="bp">=</span> eval σ rhs</span></span></span><br><span><var>x✝⁹, x✝⁸</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk73"><hr><span class="goal-name">bin.h_6</span></label><div class="goal-conclusion">eval σ (bin x<span class="bp">✝⁹</span> op x<span class="bp">✝⁸</span>) <span class="bp">=</span>
  <span class="k">match</span> eval σ x<span class="bp">✝⁹</span>, eval σ x<span class="bp">✝⁸</span> <span class="k">with</span>
  <span class="bp">|</span> some v₁, some v₂ <span class="bp">=&gt;</span>
    <span class="k">match</span> op, v₁, v₂ <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, v₁, v₂ <span class="bp">=&gt;</span> some (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, Val.bool b₁, Val.bool b₂ <span class="bp">=&gt;</span> some (Val.bool (b₁ <span class="bp">&amp;&amp;</span> b₂))
    <span class="bp">|</span> BinOp.lt, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.bool (decide (i₁ <span class="bp">&lt;</span> i₂)))
    <span class="bp">|</span> BinOp.add, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">+</span> i₂))
    <span class="bp">|</span> BinOp.sub, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">-</span> i₂))
    <span class="bp">|</span> x, x_1, x_2 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk74"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>lhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>BinOp</span></span></span><br><span><var>rhs</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_lhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify lhs) <span class="bp">=</span> eval σ lhs</span></span></span><br><span><var>ih_rhs</var><span class="hyp-type"><b>: </b><span>eval σ (simplify rhs) <span class="bp">=</span> eval σ rhs</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">bin</span></span><div class="goal-conclusion">eval σ
    (<span class="k">match</span> op, simplify lhs, simplify rhs <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, val v₁, val v₂ <span class="bp">=&gt;</span> val (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, val (Val.bool a), val (Val.bool b) <span class="bp">=&gt;</span> val (Val.bool (a <span class="bp">&amp;&amp;</span> b))
    <span class="bp">|</span> BinOp.lt, val (Val.int a), val (Val.int b) <span class="bp">=&gt;</span> val (Val.bool (decide (a <span class="bp">&lt;</span> b)))
    <span class="bp">|</span> BinOp.add, val (Val.int a), val (Val.int b) <span class="bp">=&gt;</span> val (Val.int (a <span class="bp">+</span> b))
    <span class="bp">|</span> BinOp.sub, val (Val.int a), val (Val.int b) <span class="bp">=&gt;</span> val (Val.int (a <span class="bp">-</span> b))
    <span class="bp">|</span> op, a, b <span class="bp">=&gt;</span> bin a op b) <span class="bp">=</span>
  <span class="k">match</span> eval σ (simplify lhs), eval σ (simplify rhs) <span class="k">with</span>
  <span class="bp">|</span> some v₁, some v₂ <span class="bp">=&gt;</span>
    <span class="k">match</span> op, v₁, v₂ <span class="k">with</span>
    <span class="bp">|</span> BinOp.eq, v₁, v₂ <span class="bp">=&gt;</span> some (Val.bool (decide (v₁ <span class="bp">=</span> v₂)))
    <span class="bp">|</span> BinOp.and, Val.bool b₁, Val.bool b₂ <span class="bp">=&gt;</span> some (Val.bool (b₁ <span class="bp">&amp;&amp;</span> b₂))
    <span class="bp">|</span> BinOp.lt, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.bool (decide (i₁ <span class="bp">&lt;</span> i₂)))
    <span class="bp">|</span> BinOp.add, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">+</span> i₂))
    <span class="bp">|</span> BinOp.sub, Val.int i₁, Val.int i₂ <span class="bp">=&gt;</span> some (Val.int (i₁ <span class="bp">-</span> i₂))
    <span class="bp">|</span> x, x_1, x_2 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk75"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk76"><div class="alectryon-token"><span class="bp">|</span> una op arg ih_arg <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>UnaryOp</span></span></span><br><span><var>arg</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_arg</var><span class="hyp-type"><b>: </b><span>eval σ (simplify arg) <span class="bp">=</span> eval σ arg</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">una</span></span><div class="goal-conclusion">eval σ
    (<span class="k">match</span> op, simplify arg <span class="k">with</span>
    <span class="bp">|</span> UnaryOp.not, val (Val.bool b) <span class="bp">=&gt;</span> val (Val.bool <span class="bp">!</span>b)
    <span class="bp">|</span> op, a <span class="bp">=&gt;</span> una op a) <span class="bp">=</span>
  <span class="k">match</span> eval σ arg <span class="k">with</span>
  <span class="bp">|</span> some v <span class="bp">=&gt;</span>
    <span class="k">match</span> op, v <span class="k">with</span>
    <span class="bp">|</span> UnaryOp.not, Val.bool b <span class="bp">=&gt;</span> some (Val.bool <span class="bp">!</span>b)
    <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x <span class="bp">=&gt;</span> none</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk77"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih_arg</var><b>: </b><span>eval σ (simplify arg) = eval σ arg</span></span></div></blockquote></div></small></div><span class="nv">ih_arg</span></div><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>UnaryOp</span></span></span><br><span><var>arg</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_arg</var><span class="hyp-type"><b>: </b><span>eval σ (simplify arg) <span class="bp">=</span> eval σ arg</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">una</span></span><div class="goal-conclusion">eval σ
    (<span class="k">match</span> op, simplify arg <span class="k">with</span>
    <span class="bp">|</span> UnaryOp.not, val (Val.bool b) <span class="bp">=&gt;</span> val (Val.bool <span class="bp">!</span>b)
    <span class="bp">|</span> op, a <span class="bp">=&gt;</span> una op a) <span class="bp">=</span>
  <span class="k">match</span> eval σ (simplify arg) <span class="k">with</span>
  <span class="bp">|</span> some v <span class="bp">=&gt;</span>
    <span class="k">match</span> op, v <span class="k">with</span>
    <span class="bp">|</span> UnaryOp.not, Val.bool b <span class="bp">=&gt;</span> some (Val.bool <span class="bp">!</span>b)
    <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x <span class="bp">=&gt;</span> none</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk78"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>arg</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_arg</var><span class="hyp-type"><b>: </b><span>eval σ (simplify arg) <span class="bp">=</span> eval σ arg</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Bool</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">una.h_1</span></span><div class="goal-conclusion">eval σ (val (Val.bool <span class="bp">!</span>b<span class="bp">✝</span>)) <span class="bp">=</span>
  <span class="k">match</span> eval σ (val (Val.bool b<span class="bp">✝</span>)) <span class="k">with</span>
  <span class="bp">|</span> some v <span class="bp">=&gt;</span>
    <span class="k">match</span> UnaryOp.not, v <span class="k">with</span>
    <span class="bp">|</span> UnaryOp.not, Val.bool b <span class="bp">=&gt;</span> some (Val.bool <span class="bp">!</span>b)
    <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x <span class="bp">=&gt;</span> none</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk79" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>UnaryOp</span></span></span><br><span><var>arg</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_arg</var><span class="hyp-type"><b>: </b><span>eval σ (simplify arg) <span class="bp">=</span> eval σ arg</span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk79"><hr><span class="goal-name">una.h_2</span></label><div class="goal-conclusion">eval σ (una op x<span class="bp">✝³</span>) <span class="bp">=</span>
  <span class="k">match</span> eval σ x<span class="bp">✝³</span> <span class="k">with</span>
  <span class="bp">|</span> some v <span class="bp">=&gt;</span>
    <span class="k">match</span> op, v <span class="k">with</span>
    <span class="bp">|</span> UnaryOp.not, Val.bool b <span class="bp">=&gt;</span> some (Val.bool <span class="bp">!</span>b)
    <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x <span class="bp">=&gt;</span> none</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk7a"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>UnaryOp</span></span></span><br><span><var>arg</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih_arg</var><span class="hyp-type"><b>: </b><span>eval σ (simplify arg) <span class="bp">=</span> eval σ arg</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">una</span></span><div class="goal-conclusion">eval σ
    (<span class="k">match</span> op, simplify arg <span class="k">with</span>
    <span class="bp">|</span> UnaryOp.not, val (Val.bool b) <span class="bp">=&gt;</span> val (Val.bool <span class="bp">!</span>b)
    <span class="bp">|</span> op, a <span class="bp">=&gt;</span> una op a) <span class="bp">=</span>
  <span class="k">match</span> eval σ (simplify arg) <span class="k">with</span>
  <span class="bp">|</span> some v <span class="bp">=&gt;</span>
    <span class="k">match</span> op, v <span class="k">with</span>
    <span class="bp">|</span> UnaryOp.not, Val.bool b <span class="bp">=&gt;</span> some (Val.bool <span class="bp">!</span>b)
    <span class="bp">|</span> x, x_1 <span class="bp">=&gt;</span> none
  <span class="bp">|</span> x <span class="bp">=&gt;</span> none</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk7b"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt.simplify</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div>Stmt.simplify</div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Stmt</div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Stmt</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>skip</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>skip</div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>skip</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>skip</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assign</var><b>: </b><span>Var → Expr → Stmt</span></span></div></blockquote></div></small></div>assign</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assign</var><b>: </b><span>Var → Expr → Stmt</span></span></div></blockquote></div></small></div>assign</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Expr → Expr</span></span></div></blockquote></div></small></div>simplify</div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>seq</var><b>: </b><span>Stmt → Stmt → Stmt</span></span></div></blockquote></div></small></div>seq</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>seq</var><b>: </b><span>Stmt → Stmt → Stmt</span></span></div></blockquote></div></small></div>seq</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="nv">simplify</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="nv">simplify</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ite</var><b>: </b><span>Expr → Stmt → Stmt → Stmt</span></span></div></blockquote></div></small></div>ite</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">t</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span>
    </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Expr → Expr</span></span></div></blockquote></div></small></div>simplify</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>true</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>true</div><div class="alectryon-token">) <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="nv">simplify</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>false</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>false</div><div class="alectryon-token">) <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">t</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="nv">simplify</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c'</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c&#39;</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ite</var><b>: </b><span>Expr → Stmt → Stmt → Stmt</span></span></div></blockquote></div></small></div>ite</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c'</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c&#39;</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="nv">simplify</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">t</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="nv">simplify</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>«while»</var><b>: </b><span>Expr → Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="bp">«</span>while<span class="bp">»</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span>
    </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Expr → Expr</span></span></div></blockquote></div></small></div>simplify</div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.bool</var><b>: </b><span>Bool → Val</span></span></div></blockquote></div></small></div><span class="bp">.</span>bool</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>false</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div>false</div><div class="alectryon-token">) <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>skip</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>skip</div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c'</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c&#39;</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>«while»</var><b>: </b><span>Expr → Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="bp">«</span>while<span class="bp">»</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c'</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c&#39;</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="nv">simplify</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>example3</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>example3</div><div class="alectryon-token"> := <span class="bp">`</span>[Stmt<span class="bp">|</span>
  </div><div class="alectryon-token"><span class="k">if</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>1</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">1</span></div><div class="alectryon-token"> <span class="bp">&lt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>2</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">2</span></div><div class="alectryon-token"> <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>3</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">3</span></div><div class="alectryon-token">) {
    x := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>3</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">3</span></div><div class="alectryon-token"> <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>1</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">1</span></div><div class="alectryon-token"><span class="bp">;</span>
    y := y <span class="bp">+</span> x<span class="bp">;</span>
  } </div><div class="alectryon-token"><span class="k">else</span></div><div class="alectryon-token"> {
    y := y <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>3</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">3</span></div><div class="alectryon-token"><span class="bp">;</span>
  }
]

</div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk7c"><div class="alectryon-token"><span class="k">#eval</span></div></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">Stmt.seq (Stmt.assign <span class="s2">&quot;x&quot;</span> (Expr.val (Val.int <span class="mi">4</span>))) (Stmt.assign <span class="s2">&quot;y&quot;</span> (Expr.bin (Expr.var <span class="s2">&quot;y&quot;</span>) (BinOp.add) (Expr.var <span class="s2">&quot;x&quot;</span>)))
</blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>example3</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>example3</div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div>simplify</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt.simplify_correct</var><b>: </b><span>∀ {σ : State} {s : Stmt} {σ' : State}, (σ, s) ⇓ σ' → (σ, simplify s) ⇓ σ'</span></span></div></blockquote></div></small></div>Stmt.simplify_correct</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>(σ, s) ⇓ σ'</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token">) : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div>simplify</div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk7d"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ, s) <span class="bp">⇓</span> σ&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ, simplify s) <span class="bp">⇓</span> σ&#39;</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk7e"><div class="alectryon-token"><span class="k">induction</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>(σ, s) ⇓ σ'</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ, s) <span class="bp">⇓</span> σ&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ, simplify s) <span class="bp">⇓</span> σ&#39;</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk7f"><div class="alectryon-token"><span class="k">simp_all</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileFalse</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk80"><div class="alectryon-token"><span class="bp">|</span> skip <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ', σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">skip</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk81"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.skip</var><b>: </b><span>∀ {σ : State}, (σ, skip) ⇓ σ</span></span></div></blockquote></div></small></div>Bigstep.skip</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk82"><div class="alectryon-token"><span class="bp">|</span> seq h₁ h₂ ih₁ ih₂ <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ', σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s₁✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s₂✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, s₁<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify s₁<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, simplify s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">seq</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, simplify s₁<span class="bp">✝;;</span> simplify s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk83"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.seq</var><b>: </b><span>∀ {σ₁ : State} {s₁ : Stmt} {σ₂ : State} {s₂ : Stmt} {σ₃ : State}, (σ₁, s₁) ⇓ σ₂ → (σ₂, s₂) ⇓ σ₃ → (σ₁, s₁;; s₂) ⇓ σ₃</span></span></div></blockquote></div></small></div>Bigstep.seq</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₁</var><b>: </b><span>(σ₁✝, simplify s₁✝) ⇓ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₂</var><b>: </b><span>(σ₂✝, simplify s₂✝) ⇓ σ₃✝</span></span></div></blockquote></div></small></div><span class="nv">ih₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk84"><div class="alectryon-token"><span class="bp">|</span> assign <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">assign</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, x<span class="bp">✝</span> ::= Expr.simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝</span> v<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk85"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.assign</var><b>: </b><span>∀ {v : Val} {σ : State} {x : Var} {e : Expr}, Expr.eval σ e = some v → (σ, x ::= e) ⇓ State.update σ x v</span></span></div></blockquote></div></small></div>Bigstep.assign</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">assign.a</span></span><div class="goal-conclusion">Expr.eval σ<span class="bp">✝</span> (Expr.simplify e<span class="bp">✝</span>) <span class="bp">=</span> some v<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk86"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk87"><div class="alectryon-token"><span class="bp">|</span> whileTrue heq h₁ h₂ ih₁ ih₂ <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk88"><div class="alectryon-token"><span class="k">rw</span></div><div class="alectryon-token"> [</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk89"><div class="alectryon-token"><span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.eval_simplify</var><b>: </b><span>∀ {σ : State} (e : Expr), Expr.eval σ (Expr.simplify e) = Expr.eval σ e</span></span></div></blockquote></div></small></div>Expr.eval_simplify</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk8a"><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"></div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk8b"><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ₁✝ c✝ = some (Val.bool true)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk8c"><div class="alectryon-token"><span class="k">revert</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₂</var><b>: </b><span>(σ₂✝,
  match Expr.simplify c✝ with
  | Expr.val (Val.bool false) =&gt; skip
  | c' =&gt; while c' (simplify b✝)) ⇓
  σ₃✝</span></span></div></blockquote></div></small></div><span class="nv">ih₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">(σ₂<span class="bp">✝</span>,
    <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
    <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
    <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
    σ₃<span class="bp">✝</span> <span class="bp">→</span>
  (σ₁<span class="bp">✝</span>,
    <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
    <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
    <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
    σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk8d"><div class="alectryon-token"><span class="c1">-- This is a hack to make sure the next split simplify the two match expressions: TODO: make sure `simp` can do it</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk8e"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue.h_1</span></span><div class="goal-conclusion">(σ₂<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span> <span class="bp">→</span> (σ₁<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk8f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk8f"><hr><span class="goal-name">whileTrue.h_2</span></label><div class="goal-conclusion">(σ₂<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span> <span class="bp">→</span> (σ₁<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk90" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk90"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">(σ₂<span class="bp">✝</span>,
    <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
    <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
    <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
    σ₃<span class="bp">✝</span> <span class="bp">→</span>
  (σ₁<span class="bp">✝</span>,
    <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
    <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
    <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
    σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk91"><div class="alectryon-token"><span class="k">intro</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₂</var><b>: </b><span>(σ₂✝, skip) ⇓ σ₃✝</span></span></div></blockquote></div></small></div><span class="nv">ih₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue.h_2</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk92"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> h <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue.h_1</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk93" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk93"><hr><span class="goal-name">whileTrue.h_2</span></label><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk94"><div class="alectryon-token"><span class="k">rw</span></div><div class="alectryon-token"> [</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> Expr.val (Val.bool false)</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk95"><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>Expr.simplify c✝ = Expr.val (Val.bool false)</span></span></div></blockquote></div></small></div><span class="nv">h</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.val (Val.bool false)) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> Expr.val (Val.bool false)</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk96"><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.val (Val.bool false)) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> Expr.val (Val.bool false)</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"></div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk97"><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ₁✝ (Expr.simplify c✝) = some (Val.bool true)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.val (Val.bool false)) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> Expr.val (Val.bool false)</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk98"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ₁✝ (Expr.val (Val.bool false)) = some (Val.bool true)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk99"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> h _ _ <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue.h_2</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk9a"><div class="alectryon-token"><span class="k">rw</span></div><div class="alectryon-token"> [</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk9b"><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>Expr.simplify c✝ = x✝²</span></span></div></blockquote></div></small></div><span class="nv">h</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> x<span class="bp">✝²</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk9c"><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> x<span class="bp">✝²</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"></div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk9d"><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ₁✝ (Expr.simplify c✝) = some (Val.bool true)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> x<span class="bp">✝²</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk9e"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.whileTrue</var><b>: </b><span>∀ {c : Expr} {σ₁ : State} {b : Stmt} {σ₂ σ₃ : State},
  evalTrue c σ₁ → (σ₁, b) ⇓ σ₂ → (σ₂, while c b) ⇓ σ₃ → (σ₁, while c b) ⇓ σ₃</span></span></div></blockquote></div></small></div>Bigstep.whileTrue</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ₁✝ x✝² = some (Val.bool true)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₁</var><b>: </b><span>(σ₁✝, simplify b✝) ⇓ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₂</var><b>: </b><span>(σ₂✝, while x✝² (simplify b✝)) ⇓ σ₃✝</span></span></div></blockquote></div></small></div><span class="nv">ih₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk9f"><div class="alectryon-token"><span class="bp">|</span> whileFalse heq <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileFalse</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> skip
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> while c&#39; (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka0"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileFalse.h_1</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ<span class="bp">✝</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka1"><hr><span class="goal-name">whileFalse.h_2</span></label><div class="goal-conclusion">(σ<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ<span class="bp">✝</span></div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka2"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileFalse.h_1</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ<span class="bp">✝</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka3"><hr><span class="goal-name">whileFalse.h_2</span></label><div class="goal-conclusion">(σ<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ<span class="bp">✝</span></div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka4"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.skip</var><b>: </b><span>∀ {σ : State}, (σ, skip) ⇓ σ</span></span></div></blockquote></div></small></div>Bigstep.skip</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka5"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> h _ _ <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileFalse.h_2</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, while x<span class="bp">✝²</span> (simplify b<span class="bp">✝</span>)) <span class="bp">⇓</span> σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka6"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.whileFalse</var><b>: </b><span>∀ {c : Expr} {σ : State} {b : Stmt}, evalFalse c σ → (σ, while c b) ⇓ σ</span></span></div></blockquote></div></small></div>Bigstep.whileFalse</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">a</span></span><div class="goal-conclusion">evalFalse x<span class="bp">✝²</span> σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka7"><div class="alectryon-token"><span class="k">rw</span></div><div class="alectryon-token"> [</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">a</span></span><div class="goal-conclusion">evalFalse x<span class="bp">✝²</span> σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka8"><div class="alectryon-token"><span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>Expr.simplify c✝ = x✝²</span></span></div></blockquote></div></small></div><span class="nv">h</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">a</span></span><div class="goal-conclusion">evalFalse (Expr.simplify c<span class="bp">✝</span>) σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chka9"><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">a</span></span><div class="goal-conclusion">evalFalse (Expr.simplify c<span class="bp">✝</span>) σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkaa"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ✝ c✝ = some (Val.bool false)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkab"><div class="alectryon-token"><span class="bp">|</span> ifFalse heq h ih <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkac"><div class="alectryon-token"><span class="k">rw</span></div><div class="alectryon-token"> [</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkad" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkad"><div class="alectryon-token"><span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.eval_simplify</var><b>: </b><span>∀ {σ : State} (e : Expr), Expr.eval σ (Expr.simplify e) = Expr.eval σ e</span></span></div></blockquote></div></small></div>Expr.eval_simplify</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkae" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkae"><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"></div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkaf" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkaf"><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ₁✝ c✝ = some (Val.bool false)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb0"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse.h_1</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb1"><hr><span class="goal-name">ifFalse.h_2</span></label><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb2"><hr><span class="goal-name">ifFalse.h_3</span></label><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, ite x<span class="bp">✝³</span> (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb3" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb3"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb4" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb4"><div class="alectryon-token"><span class="k">simp_all</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> x<span class="bp">✝³</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h✝</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> x<span class="bp">✝³</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse.h_3</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, ite x<span class="bp">✝³</span> (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb5"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.ifFalse</var><b>: </b><span>∀ {c : Expr} {σ₁ : State} {e : Stmt} {σ₂ : State} {t : Stmt}, evalFalse c σ₁ → (σ₁, e) ⇓ σ₂ → (σ₁, ite c t e) ⇓ σ₂</span></span></div></blockquote></div></small></div>Bigstep.ifFalse</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ₁✝ x✝³ = some (Val.bool false)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>(σ₁✝, simplify e✝) ⇓ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb6"><div class="alectryon-token"><span class="bp">|</span> ifTrue heq h ih <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb7"><div class="alectryon-token"><span class="k">rw</span></div><div class="alectryon-token"> [</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb8"><div class="alectryon-token"><span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.eval_simplify</var><b>: </b><span>∀ {σ : State} (e : Expr), Expr.eval σ (Expr.simplify e) = Expr.eval σ e</span></span></div></blockquote></div></small></div>Expr.eval_simplify</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkb9"><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"></div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkba" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkba"><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ₁✝ c✝ = some (Val.bool true)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkbb"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifTrue.h_1</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkbc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkbc"><hr><span class="goal-name">ifTrue.h_2</span></label><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, simplify e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkbd" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkbd"><hr><span class="goal-name">ifTrue.h_3</span></label><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, ite x<span class="bp">✝³</span> (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkbe" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkbe"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> (Expr.simplify c<span class="bp">✝</span>) <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>,
  <span class="k">match</span> Expr.simplify c<span class="bp">✝</span> <span class="k">with</span>
  <span class="bp">|</span> Expr.val (Val.bool true) <span class="bp">=&gt;</span> simplify t<span class="bp">✝</span>
  <span class="bp">|</span> Expr.val (Val.bool false) <span class="bp">=&gt;</span> simplify e<span class="bp">✝</span>
  <span class="bp">|</span> c&#39; <span class="bp">=&gt;</span> ite c&#39; (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span>
  σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkbf"><div class="alectryon-token"><span class="k">simp_all</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> x<span class="bp">✝³</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, simplify t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h✝</var><span class="hyp-type"><b>: </b><span>Expr.simplify c<span class="bp">✝</span> <span class="bp">=</span> x<span class="bp">✝³</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifTrue.h_3</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, ite x<span class="bp">✝³</span> (simplify t<span class="bp">✝</span>) (simplify e<span class="bp">✝</span>)) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc0"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.ifTrue</var><b>: </b><span>∀ {c : Expr} {σ₁ : State} {t : Stmt} {σ₂ : State} {e : Stmt}, evalTrue c σ₁ → (σ₁, t) ⇓ σ₂ → (σ₁, ite c t e) ⇓ σ₂</span></span></div></blockquote></div></small></div>Bigstep.ifTrue</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ₁✝ x✝³ = some (Val.bool true)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>(σ₁✝, simplify t✝) ⇓ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.constProp</var><b>: </b><span>Expr → State → Expr</span></span></div></blockquote></div></small></div>Expr.constProp</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token"> :=
  </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div>val</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>var</var><b>: </b><span>Var → Expr</span></span></div></blockquote></div></small></div>var</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?</var><b>: </b><span>State → Var → Option Val</span></span></div></blockquote></div></small></div>find<span class="bp">?</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div>val</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>none</var><b>: </b><span>{α : Type} → Option α</span></span></div></blockquote></div></small></div>none</div><div class="alectryon-token">   <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>var</var><b>: </b><span>Var → Expr</span></span></div></blockquote></div></small></div>var</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>bin</var><b>: </b><span>Expr → BinOp → Expr → Expr</span></span></div></blockquote></div></small></div>bin</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>lhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">lhs</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>rhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">rhs</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>bin</var><b>: </b><span>Expr → BinOp → Expr → Expr</span></span></div></blockquote></div></small></div>bin</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>lhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">lhs</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constProp</var><b>: </b><span>Expr → State → Expr</span></span></div></blockquote></div></small></div><span class="nv">constProp</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">) </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>BinOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>rhs</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">rhs</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constProp</var><b>: </b><span>Expr → State → Expr</span></span></div></blockquote></div></small></div><span class="nv">constProp</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>una</var><b>: </b><span>UnaryOp → Expr → Expr</span></span></div></blockquote></div></small></div>una</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>arg</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">arg</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>una</var><b>: </b><span>UnaryOp → Expr → Expr</span></span></div></blockquote></div></small></div>una</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>op</var><b>: </b><span>UnaryOp</span></span></div></blockquote></div></small></div><span class="nv">op</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>arg</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">arg</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constProp</var><b>: </b><span>Expr → State → Expr</span></span></div></blockquote></div></small></div><span class="nv">constProp</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">)

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.constProp_nil</var><b>: </b><span>∀ (e : Expr), constProp e [] = e</span></span></div></blockquote></div></small></div>Expr.constProp_nil</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constProp</var><b>: </b><span>Expr → State → Expr</span></span></div></blockquote></div></small></div>constProp</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>[]</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div>[]</div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc1" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc1"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constProp e [] <span class="bp">=</span> e</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc2" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc2"><div class="alectryon-token"><span class="k">induction</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">val</span></span><div class="goal-conclusion">constProp (val v<span class="bp">✝</span>) [] <span class="bp">=</span> val v<span class="bp">✝</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x✝</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc3"><hr><span class="goal-name">var</span></label><div class="goal-conclusion">constProp (var x<span class="bp">✝</span>) [] <span class="bp">=</span> var x<span class="bp">✝</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lhs✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>op✝</var><span class="hyp-type"><b>: </b><span>BinOp</span></span></span><br><span><var>rhs✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc4"><hr><span class="goal-name">bin</span></label><div class="goal-conclusion">constProp (bin lhs<span class="bp">✝</span> op<span class="bp">✝</span> rhs<span class="bp">✝</span>) [] <span class="bp">=</span> bin lhs<span class="bp">✝</span> op<span class="bp">✝</span> rhs<span class="bp">✝</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>op✝</var><span class="hyp-type"><b>: </b><span>UnaryOp</span></span></span><br><span><var>arg✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc5"><hr><span class="goal-name">una</span></label><div class="goal-conclusion">constProp (una op<span class="bp">✝</span> arg<span class="bp">✝</span>) [] <span class="bp">=</span> una op<span class="bp">✝</span> arg<span class="bp">✝</span></div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc6" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc6"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constProp e [] <span class="bp">=</span> e</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc7"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.eval_constProp</var><b>: </b><span>∀ (e : Expr) (σ : State), eval σ (constProp e σ) = eval σ e</span></span></div></blockquote></div></small></div>Expr.eval_constProp</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constProp</var><b>: </b><span>Expr → State → Expr</span></span></div></blockquote></div></small></div>constProp</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div><span class="na">eval</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div>eval</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc8" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc8"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eval σ (constProp e σ) <span class="bp">=</span> eval σ e</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc9" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkc9"><div class="alectryon-token"><span class="k">induction</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eval σ (constProp e σ) <span class="bp">=</span> eval σ e</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkca" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkca"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">var</span></span><div class="goal-conclusion">eval σ
    (<span class="k">match</span> State.find<span class="bp">?</span> σ x <span class="k">with</span>
    <span class="bp">|</span> some v <span class="bp">=&gt;</span> val v
    <span class="bp">|</span> none <span class="bp">=&gt;</span> var x) <span class="bp">=</span>
  some (State.get σ x)</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkcb" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkcb"><div class="alectryon-token"><span class="bp">|</span> var x <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">var</span></span><div class="goal-conclusion">eval σ
    (<span class="k">match</span> State.find<span class="bp">?</span> σ x <span class="k">with</span>
    <span class="bp">|</span> some v <span class="bp">=&gt;</span> val v
    <span class="bp">|</span> none <span class="bp">=&gt;</span> var x) <span class="bp">=</span>
  some (State.get σ x)</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkcc" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkcc"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">var.h_1</span></span><div class="goal-conclusion">eval σ (val v<span class="bp">✝</span>) <span class="bp">=</span> some (State.get σ x)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkcd" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkcd"><hr><span class="goal-name">var.h_2</span></label><div class="goal-conclusion">eval σ (var x) <span class="bp">=</span> some (State.get σ x)</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkce" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkce"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> h <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">var.h_1</span></span><div class="goal-conclusion">eval σ (val v<span class="bp">✝</span>) <span class="bp">=</span> some (State.get σ x)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkcf" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkcf"><hr><span class="goal-name">var.h_2</span></label><div class="goal-conclusion">eval σ (var x) <span class="bp">=</span> some (State.get σ x)</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd0" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd0"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.get_of_find?</var><b>: </b><span>∀ {x : Var} {v : Val} {σ : State}, State.find? σ x = some v → State.get σ x = v</span></span></div></blockquote></div></small></div>State.get_of_find<span class="bp">?</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>State.find? σ x = some v✝</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd1" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd1"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token">   <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">var.h_2</span></span><div class="goal-conclusion">eval σ (var x) <span class="bp">=</span> some (State.get σ x)</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd2" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd2"><div class="alectryon-token"><span class="k">rfl</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.length_erase_le</var><b>: </b><span>∀ (σ : State) (x : Var), List.length (erase σ x) ≤ List.length σ</span></span></div></blockquote></div></small></div>State.length_erase_le</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token">) : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>erase</var><b>: </b><span>State → Var → State</span></span></div></blockquote></div></small></div>erase</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>length</var><b>: </b><span>{α : Type} → List α → Nat</span></span></div></blockquote></div></small></div><span class="na">length</span></div><div class="alectryon-token"> <span class="bp">≤</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>length</var><b>: </b><span>{α : Type} → List α → Nat</span></span></div></blockquote></div></small></div>length</div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd3" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd3"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">List.length (erase σ x) <span class="bp">≤</span> List.length σ</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd4" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd4"><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
  <span class="bp">|</span> [] <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">List.length (erase σ x) <span class="bp">≤</span> List.length σ</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd5" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd5"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd6" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd6"><div class="alectryon-token"><span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">List.length (erase σ x) <span class="bp">≤</span> List.length σ</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd7" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd7"><div class="alectryon-token"><span class="k">by_cases</span></div><div class="alectryon-token"> hxy : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">List.length (erase ((y, v) :: σ) x) <span class="bp">≤</span> List.length ((y, v) :: σ)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>x <span class="bp">=</span> y</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd8"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">List.length (erase ((y, v) :: σ) x) <span class="bp">≤</span> List.length ((y, v) :: σ)</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd9" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkd9"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">List.length (erase ((y, v) :: σ) x) <span class="bp">≤</span> List.length ((y, v) :: σ)</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkda" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkda"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hxy</var><b>: </b><span>¬x = y</span></span></div></blockquote></div></small></div><span class="nv">hxy</span></div><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">Nat.succ (List.length (erase σ x)) <span class="bp">≤</span> Nat.succ (List.length σ)</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkdb" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkdb"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">List.length (erase σ y) <span class="bp">≤</span> Nat.succ (List.length σ)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkdc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>x <span class="bp">=</span> y</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkdc"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">Nat.succ (List.length (erase σ x)) <span class="bp">≤</span> Nat.succ (List.length σ)</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkdd" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkdd"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Nat.le_trans</var><b>: </b><span>∀ {n m k : Nat}, n ≤ m → m ≤ k → n ≤ k</span></span></div></blockquote></div></small></div>Nat.le_trans</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>length_erase_le</var><b>: </b><span>∀ (σ : State) (x : Var), List.length (erase σ x) ≤ List.length σ</span></span></div></blockquote></div></small></div><span class="nv">length_erase_le</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">) (</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">List.length (erase σ y) <span class="bp">≤</span> Nat.succ (List.length σ)</div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkde" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkde"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">List.length σ <span class="bp">≤</span> Nat.succ (List.length σ)</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkdf" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkdf"><div class="alectryon-token"><span class="k">simp_arith</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke0" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke0"><div class="alectryon-token">)</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke1" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke1"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">Nat.succ (List.length (erase σ x)) <span class="bp">≤</span> Nat.succ (List.length σ)</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke2" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke2"><div class="alectryon-token"><span class="k">simp_arith</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>length_erase_le</var><b>: </b><span>∀ (σ : State) (x : Var), List.length (erase σ x) ≤ List.length σ</span></span></div></blockquote></div></small></div><span class="nv">length_erase_le</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.length_erase_lt</var><b>: </b><span>∀ (σ : State) (x : Var), List.length (erase σ x) &lt; Nat.succ (List.length σ)</span></span></div></blockquote></div></small></div>State.length_erase_lt</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token">) : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>erase</var><b>: </b><span>State → Var → State</span></span></div></blockquote></div></small></div>erase</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>length</var><b>: </b><span>{α : Type} → List α → Nat</span></span></div></blockquote></div></small></div><span class="na">length</span></div><div class="alectryon-token"> <span class="bp">&lt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>length</var><b>: </b><span>{α : Type} → List α → Nat</span></span></div></blockquote></div></small></div>length</div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>succ</var><b>: </b><span>Nat → Nat</span></span></div></blockquote></div></small></div>succ</div><div class="alectryon-token"> :=
  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Nat.lt_of_le_of_lt</var><b>: </b><span>∀ {n m k : Nat}, n ≤ m → m &lt; k → n &lt; k</span></span></div></blockquote></div></small></div>Nat.lt_of_le_of_lt</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>length_erase_le</var><b>: </b><span>∀ (σ : State) (x : Var), List.length (erase σ x) ≤ List.length σ</span></span></div></blockquote></div></small></div>length_erase_le</div><div class="alectryon-token"> <span class="bp">..</span>) (</div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke3" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke3"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">List.length σ <span class="bp">&lt;</span> Nat.succ (List.length σ)</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke4"><div class="alectryon-token"><span class="k">simp_arith</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">)

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.join</var><b>: </b><span>(_ : State) ×' State → State</span></span></div></blockquote></div></small></div>State.join</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token"> :=
  </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
  <span class="bp">|</span> [] <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>[]</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div>[]</div><div class="alectryon-token">
  <span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span>
    </div><div class="alectryon-token"><span class="k">let</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁&#39;</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>erase</var><b>: </b><span>State → Var → State</span></span></div></blockquote></div></small></div>erase</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="c1">-- Must remove duplicates. Alternative design: carry invariant that input state at constProp has no duplicates</span>
    </div><div class="alectryon-token"><span class="k">have</span></div><div class="alectryon-token"> : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>erase</var><b>: </b><span>State → Var → State</span></span></div></blockquote></div></small></div>erase</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>length</var><b>: </b><span>{α : Type} → List α → Nat</span></span></div></blockquote></div></small></div><span class="na">length</span></div><div class="alectryon-token"> <span class="bp">&lt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>length</var><b>: </b><span>{α : Type} → List α → Nat</span></span></div></blockquote></div></small></div>length</div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>succ</var><b>: </b><span>Nat → Nat</span></span></div></blockquote></div></small></div>succ</div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>length_erase_lt</var><b>: </b><span>∀ (σ : State) (x : Var), List.length (erase σ x) &lt; Nat.succ (List.length σ)</span></span></div></blockquote></div></small></div>length_erase_lt</div><div class="alectryon-token"> <span class="bp">..</span>
    </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?</var><b>: </b><span>State → Var → Option Val</span></span></div></blockquote></div></small></div>find<span class="bp">?</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>w</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">w</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">if</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>w</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">w</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">then</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>join</var><b>: </b><span>State → State → State</span></span></div></blockquote></div></small></div><span class="nv">join</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁&#39;</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">else</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>join</var><b>: </b><span>State → State → State</span></span></div></blockquote></div></small></div><span class="nv">join</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁&#39;</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token">
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>none</var><b>: </b><span>{α : Type ?u.141775} → Option α</span></span></div></blockquote></div></small></div>none</div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>join</var><b>: </b><span>State → State → State</span></span></div></blockquote></div></small></div><span class="nv">join</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁&#39;</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token">
</div><div class="alectryon-token"><span class="k">termination_by</span></div><div class="alectryon-token"> _ σ₁ _ <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>length</var><b>: </b><span>{α : Type} → List α → Nat</span></span></div></blockquote></div></small></div>length</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kn">local</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="kd">notation</span></div><div class="alectryon-token"> <span class="s2">&quot;⊥&quot;</span> <span class="bp">=&gt;</span> []

<span class="bp">@</span>[</div><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt.constProp</var><b>: </b><span>Stmt → State → Stmt × State</span></span></div></blockquote></div></small></div>Stmt.constProp</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Stmt</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Stmt</div><div class="alectryon-token"> <span class="bp">×</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token"> :=
  </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>skip</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>skip</div><div class="alectryon-token"> <span class="bp">=&gt;</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>skip</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>skip</div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assign</var><b>: </b><span>Var → Expr → Stmt</span></span></div></blockquote></div></small></div>assign</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constProp</var><b>: </b><span>Expr → State → Expr</span></span></div></blockquote></div></small></div>constProp</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Expr → Expr</span></span></div></blockquote></div></small></div><span class="na">simplify</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
    <span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) <span class="bp">=&gt;</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assign</var><b>: </b><span>Var → Expr → Stmt</span></span></div></blockquote></div></small></div>assign</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>.val</var><b>: </b><span>Val → Expr</span></span></div></blockquote></div></small></div><span class="bp">.</span>val</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">), </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>update</var><b>: </b><span>State → Var → Val → State</span></span></div></blockquote></div></small></div>update</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">)
    <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e'</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e&#39;</span></div><div class="alectryon-token">       <span class="bp">=&gt;</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assign</var><b>: </b><span>Var → Expr → Stmt</span></span></div></blockquote></div></small></div>assign</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e'</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e&#39;</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>erase</var><b>: </b><span>State → Var → State</span></span></div></blockquote></div></small></div>erase</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>seq</var><b>: </b><span>Stmt → Stmt → Stmt</span></span></div></blockquote></div></small></div>seq</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constProp</var><b>: </b><span>Stmt → State → Stmt × State</span></span></div></blockquote></div></small></div><span class="nv">constProp</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
    <span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁'</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁&#39;</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">) <span class="bp">=&gt;</span> </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constProp</var><b>: </b><span>Stmt → State → Stmt × State</span></span></div></blockquote></div></small></div><span class="nv">constProp</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
      <span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂'</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂&#39;</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token">) <span class="bp">=&gt;</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>seq</var><b>: </b><span>Stmt → Stmt → Stmt</span></span></div></blockquote></div></small></div>seq</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁'</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁&#39;</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂'</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂&#39;</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ite</var><b>: </b><span>Expr → Stmt → Stmt → Stmt</span></span></div></blockquote></div></small></div>ite</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span>
    </div><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constProp</var><b>: </b><span>Stmt → State → Stmt × State</span></span></div></blockquote></div></small></div><span class="nv">constProp</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constProp</var><b>: </b><span>Stmt → State → Stmt × State</span></span></div></blockquote></div></small></div><span class="nv">constProp</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
    <span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁'</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁&#39;</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">), (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂'</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂&#39;</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token">) <span class="bp">=&gt;</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ite</var><b>: </b><span>Expr → Stmt → Stmt → Stmt</span></span></div></blockquote></div></small></div>ite</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constProp</var><b>: </b><span>Expr → State → Expr</span></span></div></blockquote></div></small></div>constProp</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">) </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₁'</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₁&#39;</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s₂'</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s₂&#39;</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>join</var><b>: </b><span>State → State → State</span></span></div></blockquote></div></small></div>join</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token">)
  <span class="bp">|</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>«while»</var><b>: </b><span>Expr → Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="bp">«</span>while<span class="bp">»</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>«while»</var><b>: </b><span>Expr → Stmt → Stmt</span></span></div></blockquote></div></small></div><span class="bp">«</span>while<span class="bp">»</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>c</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">c</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constProp</var><b>: </b><span>Expr → State → Expr</span></span></div></blockquote></div></small></div>constProp</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>⊥</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="bp">⊥</span></div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">b</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constProp</var><b>: </b><span>Stmt → State → Stmt × State</span></span></div></blockquote></div></small></div><span class="nv">constProp</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>⊥</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="bp">⊥</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>1</var><b>: </b><span>{α β : Type} → α × β → α</span></span></div></blockquote></div></small></div><span class="mi">1</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>⊥</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="bp">⊥</span></div><div class="alectryon-token">)

</div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate</var><b>: </b><span>State → State → Prop</span></span></div></blockquote></div></small></div>Substate</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Prop</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="kt">Prop</span></div><div class="alectryon-token"> :=
  <span class="bp">∀</span> ⦃</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Var</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Var</div><div class="alectryon-token">⦄ ⦃</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Val</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Val</div><div class="alectryon-token">⦄, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?</var><b>: </b><span>State → Var → Option Val</span></span></div></blockquote></div></small></div>find<span class="bp">?</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?</var><b>: </b><span>State → Var → Option Val</span></span></div></blockquote></div></small></div>find<span class="bp">?</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">infix</span></div><div class="alectryon-token">:<span class="mi">50</span> <span class="s2">&quot; ≼ &quot;</span> <span class="bp">=&gt;</span> Substate

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.refl</var><b>: </b><span>∀ (σ : State), σ ≼ σ</span></span></div></blockquote></div></small></div>Substate.refl</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> :=
  </div><div class="alectryon-token"><span class="k">fun</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>State.find? σ x✝¹ = some x✝</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>State.find? σ x✝¹ = some x✝</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.trans</var><b>: </b><span>∀ {σ₁ σ₂ σ₃ : State}, σ₁ ≼ σ₂ → σ₂ ≼ σ₃ → σ₁ ≼ σ₃</span></span></div></blockquote></div></small></div>Substate.trans</div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₃</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₃</span></div><div class="alectryon-token"> <span class="bp">→</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₃</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₃</span></div><div class="alectryon-token"> :=
  </div><div class="alectryon-token"><span class="k">fun</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₁</var><b>: </b><span>σ₁ ≼ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>σ₂ ≼ σ₃</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>State.find? σ₁ x = some v</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>σ₂ ≼ σ₃</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₁</var><b>: </b><span>σ₁ ≼ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>State.find? σ₁ x = some v</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token">)

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.bot</var><b>: </b><span>∀ (σ : State), [] ≼ σ</span></span></div></blockquote></div></small></div>Substate.bot</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>⊥</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="bp">⊥</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> :=
  </div><div class="alectryon-token"><span class="k">fun</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>State.find? [] x✝¹ = some x✝</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke5" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke5"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>x✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> [] x<span class="bp">✝¹</span> <span class="bp">=</span> some x<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.find<span class="bp">?</span> σ x<span class="bp">✝¹</span> <span class="bp">=</span> some x<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke6" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke6"><div class="alectryon-token"><span class="k">contradiction</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.erase_cons</var><b>: </b><span>∀ {σ' σ : State} {x : Var} {v : Val}, σ' ≼ σ → State.erase σ' x ≼ (x, v) :: σ</span></span></div></blockquote></div></small></div>Substate.erase_cons</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>σ' ≼ σ</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>erase</var><b>: </b><span>State → Var → State</span></span></div></blockquote></div></small></div>erase</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">≼</span> ((</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">) := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke7" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke7"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.erase σ&#39; x <span class="bp">≼</span> (x, v) :: σ</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke8" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke8"><div class="alectryon-token"><span class="k">intro</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>w</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">w</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hf'</var><b>: </b><span>State.find? (State.erase σ' x) y = some w</span></span></div></blockquote></div></small></div><span class="nv">hf&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.erase σ&#39; x) y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.find<span class="bp">?</span> ((x, v) :: σ) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke9" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chke9"><div class="alectryon-token"><span class="k">by_cases</span></div><div class="alectryon-token"> hyx : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.erase σ&#39; x) y <span class="bp">=</span> some w</span></span></span><br><span><var>hyx</var><span class="hyp-type"><b>: </b><span>y <span class="bp">=</span> x</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> ((x, v) :: σ) y <span class="bp">=</span> some w</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkea" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.erase σ&#39; x) y <span class="bp">=</span> some w</span></span></span><br><span><var>hyx</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>y <span class="bp">=</span> x</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkea"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">State.find<span class="bp">?</span> ((x, v) :: σ) y <span class="bp">=</span> some w</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkeb" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkeb"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.erase σ&#39; x) y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.find<span class="bp">?</span> ((x, v) :: σ) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkec" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkec"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>] </div><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hf'</var><b>: </b><span>State.find? (State.erase σ' x) y = some w</span></span></div></blockquote></div></small></div><span class="nv">hf&#39;</span></div><div class="alectryon-token"> <span class="bp">|-</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hyx</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>y <span class="bp">=</span> x</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ&#39; y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chked" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chked"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>σ' ≼ σ</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hf'</var><b>: </b><span>State.find? σ' y = some w</span></span></div></blockquote></div></small></div><span class="nv">hf&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.cons_of_right</var><b>: </b><span>∀ {σ' σ : State} {x : Var} {v : Val}, σ' ≼ σ → (x, v) :: σ' ≼ (x, v) :: σ</span></span></div></blockquote></div></small></div>Substate.cons_of_right</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>σ' ≼ σ</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">) : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token"> <span class="bp">≼</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkee"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(x, v) :: σ&#39; <span class="bp">≼</span> (x, v) :: σ</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkef" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkef"><div class="alectryon-token"><span class="k">intro</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>w</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">w</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hf'</var><b>: </b><span>State.find? ((x, v) :: σ') y = some w</span></span></div></blockquote></div></small></div><span class="nv">hf&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> ((x, v) :: σ&#39;) y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.find<span class="bp">?</span> ((x, v) :: σ) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf0" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf0"><div class="alectryon-token"><span class="k">by_cases</span></div><div class="alectryon-token"> hyx : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> ((x, v) :: σ&#39;) y <span class="bp">=</span> some w</span></span></span><br><span><var>hyx</var><span class="hyp-type"><b>: </b><span>y <span class="bp">=</span> x</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> ((x, v) :: σ) y <span class="bp">=</span> some w</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> ((x, v) :: σ&#39;) y <span class="bp">=</span> some w</span></span></span><br><span><var>hyx</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>y <span class="bp">=</span> x</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf1"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">State.find<span class="bp">?</span> ((x, v) :: σ) y <span class="bp">=</span> some w</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf2" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf2"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> ((x, v) :: σ&#39;) y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.find<span class="bp">?</span> ((x, v) :: σ) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf3" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf3"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>] </div><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hf'</var><b>: </b><span>State.find? ((x, v) :: σ') y = some w</span></span></div></blockquote></div></small></div><span class="nv">hf&#39;</span></div><div class="alectryon-token"> <span class="bp">|-</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hyx</var><span class="hyp-type"><b>: </b><span>y <span class="bp">=</span> x</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>v <span class="bp">=</span> w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">v <span class="bp">=</span> w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf4" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf4"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hyx</var><span class="hyp-type"><b>: </b><span>y <span class="bp">=</span> x</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>v <span class="bp">=</span> w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">v <span class="bp">=</span> w</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hyx</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>y <span class="bp">=</span> x</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ&#39; y <span class="bp">=</span> some w</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf5"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf6" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf6"><div class="alectryon-token"><span class="k">assumption</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf7" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf7"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hyx</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>y <span class="bp">=</span> x</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ&#39; y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf8" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf8"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>σ' ≼ σ</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hf'</var><b>: </b><span>State.find? σ' y = some w</span></span></div></blockquote></div></small></div><span class="nv">hf&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.cons_of_left</var><b>: </b><span>∀ {σ' σ : State} {x : Var} {v : Val}, σ' ≼ σ → State.find? σ x = some v → (x, v) :: σ' ≼ σ</span></span></div></blockquote></div></small></div>Substate.cons_of_left</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₁</var><b>: </b><span>σ' ≼ σ</span></span></div></blockquote></div></small></div><span class="nv">h₁</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>State.find? σ x = some v</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>find?</var><b>: </b><span>State → Var → Option Val</span></span></div></blockquote></div></small></div>find<span class="bp">?</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf9" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkf9"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ x <span class="bp">=</span> some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(x, v) :: σ&#39; <span class="bp">≼</span> σ</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkfa" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkfa"><div class="alectryon-token"><span class="k">intro</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>w</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">w</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hf'</var><b>: </b><span>State.find? ((x, v) :: σ') y = some w</span></span></div></blockquote></div></small></div><span class="nv">hf&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ x <span class="bp">=</span> some v</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> ((x, v) :: σ&#39;) y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkfb" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkfb"><div class="alectryon-token"><span class="k">by_cases</span></div><div class="alectryon-token"> hyx : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ x <span class="bp">=</span> some v</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> ((x, v) :: σ&#39;) y <span class="bp">=</span> some w</span></span></span><br><span><var>hyx</var><span class="hyp-type"><b>: </b><span>y <span class="bp">=</span> x</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkfc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ x <span class="bp">=</span> some v</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> ((x, v) :: σ&#39;) y <span class="bp">=</span> some w</span></span></span><br><span><var>hyx</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>y <span class="bp">=</span> x</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkfc"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkfd" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkfd"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ x <span class="bp">=</span> some v</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> ((x, v) :: σ&#39;) y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkfe" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkfe"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>] </div><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hf'</var><b>: </b><span>State.find? ((x, v) :: σ') y = some w</span></span></div></blockquote></div></small></div><span class="nv">hf&#39;</span></div><div class="alectryon-token"> <span class="bp">|-</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ x <span class="bp">=</span> some v</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hyx</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>y <span class="bp">=</span> x</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ&#39; y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkff" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chkff"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ x <span class="bp">=</span> some v</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hyx</var><span class="hyp-type"><b>: </b><span>y <span class="bp">=</span> x</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>v <span class="bp">=</span> w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">v <span class="bp">=</span> w</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk100" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ x <span class="bp">=</span> some v</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hyx</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>y <span class="bp">=</span> x</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ&#39; y <span class="bp">=</span> some w</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk100"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk101" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk101"><div class="alectryon-token"><span class="k">assumption</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk102" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk102"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ x <span class="bp">=</span> some v</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hyx</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>y <span class="bp">=</span> x</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ&#39; y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk103" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk103"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₁</var><b>: </b><span>σ' ≼ σ</span></span></div></blockquote></div></small></div><span class="nv">h₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hf'</var><b>: </b><span>State.find? σ' y = some w</span></span></div></blockquote></div></small></div><span class="nv">hf&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.erase_self</var><b>: </b><span>∀ {x : Var} (σ : State), State.erase σ x ≼ σ</span></span></div></blockquote></div></small></div>Substate.erase_self</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>erase</var><b>: </b><span>State → Var → State</span></span></div></blockquote></div></small></div>erase</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk104" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk104"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.erase σ x <span class="bp">≼</span> σ</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk105" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk105"><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
  <span class="bp">|</span> [] <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.erase σ x <span class="bp">≼</span> σ</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk106" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk106"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] <span class="bp">≼</span> []</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk107" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk107"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.refl</var><b>: </b><span>∀ (σ : State), σ ≼ σ</span></span></div></blockquote></div></small></div>Substate.refl</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk108" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk108"><div class="alectryon-token"><span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.erase σ x <span class="bp">≼</span> σ</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk109" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk109"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="k">if</span> x <span class="bp">=</span> y <span class="k">then</span> State.erase σ x <span class="k">else</span> (y, v) :: State.erase σ x) <span class="bp">≼</span> (y, v) :: σ</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk10a" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk10a"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">State.erase σ x <span class="bp">≼</span> (y, v) :: σ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk10b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk10b"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">(y, v) :: State.erase σ x <span class="bp">≼</span> (y, v) :: σ</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk10c" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk10c"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="k">if</span> x <span class="bp">=</span> y <span class="k">then</span> State.erase σ x <span class="k">else</span> (y, v) :: State.erase σ x) <span class="bp">≼</span> (y, v) :: σ</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk10d" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk10d"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">State.erase σ y <span class="bp">≼</span> (y, v) :: σ</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk10e" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk10e"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">State.erase σ y <span class="bp">≼</span> (y, v) :: σ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk10f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk10f"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">(y, v) :: State.erase σ x <span class="bp">≼</span> (y, v) :: σ</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk110" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk110"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>erase_cons</var><b>: </b><span>∀ {σ' σ : State} {x : Var} {v : Val}, σ' ≼ σ → State.erase σ' x ≼ (x, v) :: σ</span></span></div></blockquote></div></small></div>erase_cons</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">h</span></span><div class="goal-conclusion">σ <span class="bp">≼</span> σ</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk111" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk111"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.refl</var><b>: </b><span>∀ (σ : State), σ ≼ σ</span></span></div></blockquote></div></small></div>Substate.refl</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk112" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk112"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">(y, v) :: State.erase σ x <span class="bp">≼</span> (y, v) :: σ</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk113" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk113"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.cons_of_right</var><b>: </b><span>∀ {σ' σ : State} {x : Var} {v : Val}, σ' ≼ σ → (x, v) :: σ' ≼ (x, v) :: σ</span></span></div></blockquote></div></small></div>Substate.cons_of_right</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">h</span></span><div class="goal-conclusion">State.erase σ x <span class="bp">≼</span> σ</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk114" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk114"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>erase_self</var><b>: </b><span>∀ {x : Var} (σ : State), State.erase σ x ≼ σ</span></span></div></blockquote></div></small></div><span class="nv">erase_self</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.join_left</var><b>: </b><span>∀ (_x : (_ : State) ×' State), State.join _x.1 _x.2 ≼ _x.1</span></span></div></blockquote></div></small></div>Substate.join_left</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>join</var><b>: </b><span>State → State → State</span></span></div></blockquote></div></small></div>join</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk115" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk115"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁, σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.join σ₁ σ₂ <span class="bp">≼</span> σ₁</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk116" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk116"><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
  <span class="bp">|</span> [] <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁, σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.join σ₁ σ₂ <span class="bp">≼</span> σ₁</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk117" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk117"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁, σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] <span class="bp">≼</span> []</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk118" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk118"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.refl</var><b>: </b><span>∀ (σ : State), σ ≼ σ</span></span></div></blockquote></div></small></div>Substate.refl</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk119" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk119"><div class="alectryon-token"><span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁, σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.join σ₁ σ₂ <span class="bp">≼</span> σ₁</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk11a" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk11a"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="k">match</span> State.find<span class="bp">?</span> σ₂ x <span class="k">with</span>
  <span class="bp">|</span> some w <span class="bp">=&gt;</span> <span class="k">if</span> v <span class="bp">=</span> w <span class="k">then</span> (x, v) :: State.join (State.erase σ₁ x) σ₂ <span class="k">else</span> State.join (State.erase σ₁ x) σ₂
  <span class="bp">|</span> none <span class="bp">=&gt;</span> State.join (State.erase σ₁ x) σ₂) <span class="bp">≼</span>
  (x, v) :: σ₁</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk11b" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk11b"><div class="alectryon-token"><span class="k">have</span></div><div class="alectryon-token"> : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.erase</var><b>: </b><span>State → Var → State</span></span></div></blockquote></div></small></div>State.erase</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>length</var><b>: </b><span>{α : Type} → List α → Nat</span></span></div></blockquote></div></small></div><span class="na">length</span></div><div class="alectryon-token"> <span class="bp">&lt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>length</var><b>: </b><span>{α : Type} → List α → Nat</span></span></div></blockquote></div></small></div>length</div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>succ</var><b>: </b><span>Nat → Nat</span></span></div></blockquote></div></small></div>succ</div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.length_erase_lt</var><b>: </b><span>∀ (σ : State) (x : Var), List.length (State.erase σ x) &lt; Nat.succ (List.length σ)</span></span></div></blockquote></div></small></div>State.length_erase_lt</div><div class="alectryon-token"> <span class="bp">..</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="k">match</span> State.find<span class="bp">?</span> σ₂ x <span class="k">with</span>
  <span class="bp">|</span> some w <span class="bp">=&gt;</span> <span class="k">if</span> v <span class="bp">=</span> w <span class="k">then</span> (x, v) :: State.join (State.erase σ₁ x) σ₂ <span class="k">else</span> State.join (State.erase σ₁ x) σ₂
  <span class="bp">|</span> none <span class="bp">=&gt;</span> State.join (State.erase σ₁ x) σ₂) <span class="bp">≼</span>
  (x, v) :: σ₁</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk11c" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk11c"><div class="alectryon-token"><span class="k">have</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>State.join (State.erase σ₁ x) σ₂ ≼ State.erase σ₁ x</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>join_left</var><b>: </b><span>∀ (σ₁ σ₂ : State), State.join σ₁ σ₂ ≼ σ₁</span></span></div></blockquote></div></small></div><span class="nv">join_left</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.erase</var><b>: </b><span>State → Var → State</span></span></div></blockquote></div></small></div>State.erase</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">) </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> State.erase σ₁ x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="k">match</span> State.find<span class="bp">?</span> σ₂ x <span class="k">with</span>
  <span class="bp">|</span> some w <span class="bp">=&gt;</span> <span class="k">if</span> v <span class="bp">=</span> w <span class="k">then</span> (x, v) :: State.join (State.erase σ₁ x) σ₂ <span class="k">else</span> State.join (State.erase σ₁ x) σ₂
  <span class="bp">|</span> none <span class="bp">=&gt;</span> State.join (State.erase σ₁ x) σ₂) <span class="bp">≼</span>
  (x, v) :: σ₁</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk11d" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk11d"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> State.erase σ₁ x</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">h_1</span></span><div class="goal-conclusion">(<span class="k">if</span> v <span class="bp">=</span> v<span class="bp">✝</span> <span class="k">then</span> (x, v) :: State.join (State.erase σ₁ x) σ₂ <span class="k">else</span> State.join (State.erase σ₁ x) σ₂) <span class="bp">≼</span> (x, v) :: σ₁</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk11e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> State.erase σ₁ x</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk11e"><hr><span class="goal-name">h_2</span></label><div class="goal-conclusion">State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> (x, v) :: σ₁</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk11f" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk11f"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> y w h <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> State.erase σ₁ x</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">h_1</span></span><div class="goal-conclusion">(<span class="k">if</span> v <span class="bp">=</span> v<span class="bp">✝</span> <span class="k">then</span> (x, v) :: State.join (State.erase σ₁ x) σ₂ <span class="k">else</span> State.join (State.erase σ₁ x) σ₂) <span class="bp">≼</span> (x, v) :: σ₁</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk120" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> State.erase σ₁ x</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk120"><hr><span class="goal-name">h_2</span></label><div class="goal-conclusion">State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> (x, v) :: σ₁</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk121" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk121"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> State.erase σ₁ x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Option Val</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ₂ x <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">(x, v) :: State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> (x, v) :: σ₁</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk122" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> State.erase σ₁ x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Option Val</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ₂ x <span class="bp">=</span> some w</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk122"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> (x, v) :: σ₁</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk123" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk123"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> State.erase σ₁ x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Option Val</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ₂ x <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">(x, v) :: State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> (x, v) :: σ₁</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk124" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> State.erase σ₁ x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Option Val</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ₂ x <span class="bp">=</span> some w</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk124"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> (x, v) :: σ₁</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk125" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk125"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.cons_of_right</var><b>: </b><span>∀ {σ' σ : State} {x : Var} {v : Val}, σ' ≼ σ → (x, v) :: σ' ≼ (x, v) :: σ</span></span></div></blockquote></div></small></div>Substate.cons_of_right</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> State.erase σ₁ x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Option Val</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ₂ x <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">h</span></span><div class="goal-conclusion">State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> σ₁</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk126" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk126"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>State.join (State.erase σ₁ x) σ₂ ≼ State.erase σ₁ x</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>trans</var><b>: </b><span>∀ {σ₁ σ₂ σ₃ : State}, σ₁ ≼ σ₂ → σ₂ ≼ σ₃ → σ₁ ≼ σ₃</span></span></div></blockquote></div></small></div>trans</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>erase_self</var><b>: </b><span>∀ {x : Var} (σ : State), State.erase σ x ≼ σ</span></span></div></blockquote></div></small></div>erase_self</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>State</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">)</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk127" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk127"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> State.erase σ₁ x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Option Val</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ₂ x <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> (x, v) :: σ₁</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk128" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk128"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.trans</var><b>: </b><span>∀ {σ₁ σ₂ σ₃ : State}, σ₁ ≼ σ₂ → σ₂ ≼ σ₃ → σ₁ ≼ σ₃</span></span></div></blockquote></div></small></div>Substate.trans</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>State.join (State.erase σ₁ x) σ₂ ≼ State.erase σ₁ x</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.erase_cons</var><b>: </b><span>∀ {σ' σ : State} {x : Var} {v : Val}, σ' ≼ σ → State.erase σ' x ≼ (x, v) :: σ</span></span></div></blockquote></div></small></div>Substate.erase_cons</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.refl</var><b>: </b><span>∀ (σ : State), σ ≼ σ</span></span></div></blockquote></div></small></div>Substate.refl</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>State</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">))</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk129" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk129"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> h <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> State.erase σ₁ x</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">h_2</span></span><div class="goal-conclusion">State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> (x, v) :: σ₁</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk12a" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk12a"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.trans</var><b>: </b><span>∀ {σ₁ σ₂ σ₃ : State}, σ₁ ≼ σ₂ → σ₂ ≼ σ₃ → σ₁ ≼ σ₃</span></span></div></blockquote></div></small></div>Substate.trans</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>State.join (State.erase σ₁ x) σ₂ ≼ State.erase σ₁ x</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.erase_cons</var><b>: </b><span>∀ {σ' σ : State} {x : Var} {v : Val}, σ' ≼ σ → State.erase σ' x ≼ (x, v) :: σ</span></span></div></blockquote></div></small></div>Substate.erase_cons</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.refl</var><b>: </b><span>∀ (σ : State), σ ≼ σ</span></span></div></blockquote></div></small></div>Substate.refl</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>State</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">))</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
</div><div class="alectryon-token"><span class="k">termination_by</span></div><div class="alectryon-token"> _ σ₁ _ <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>length</var><b>: </b><span>{α : Type} → List α → Nat</span></span></div></blockquote></div></small></div>length</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.join_left_of</var><b>: </b><span>∀ {σ₁ σ₂ : State}, σ₁ ≼ σ₂ → ∀ (σ₃ : State), State.join σ₁ σ₃ ≼ σ₂</span></span></div></blockquote></div></small></div>Substate.join_left_of</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>σ₁ ≼ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₃</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₃</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>join</var><b>: </b><span>State → State → State</span></span></div></blockquote></div></small></div>join</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₃</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₃</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> :=
  (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>join_left</var><b>: </b><span>∀ (σ₁ σ₂ : State), State.join σ₁ σ₂ ≼ σ₁</span></span></div></blockquote></div></small></div>join_left</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₃</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₃</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>trans</var><b>: </b><span>∀ {σ₁ σ₂ σ₃ : State}, σ₁ ≼ σ₂ → σ₂ ≼ σ₃ → σ₁ ≼ σ₃</span></span></div></blockquote></div></small></div><span class="na">trans</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>σ₁ ≼ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.join_right</var><b>: </b><span>∀ (σ₁ σ₂ : State), State.join σ₁ σ₂ ≼ σ₂</span></span></div></blockquote></div></small></div>Substate.join_right</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>join</var><b>: </b><span>State → State → State</span></span></div></blockquote></div></small></div>join</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk12b" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk12b"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁, σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.join σ₁ σ₂ <span class="bp">≼</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk12c" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk12c"><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
  <span class="bp">|</span> [] <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁, σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.join σ₁ σ₂ <span class="bp">≼</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk12d" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk12d"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁, σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] <span class="bp">≼</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk12e" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk12e"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.bot</var><b>: </b><span>∀ (σ : State), [] ≼ σ</span></span></div></blockquote></div></small></div>Substate.bot</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk12f" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk12f"><div class="alectryon-token"><span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁, σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.join σ₁ σ₂ <span class="bp">≼</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk130" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk130"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="k">match</span> State.find<span class="bp">?</span> σ₂ x <span class="k">with</span>
  <span class="bp">|</span> some w <span class="bp">=&gt;</span> <span class="k">if</span> v <span class="bp">=</span> w <span class="k">then</span> (x, v) :: State.join (State.erase σ₁ x) σ₂ <span class="k">else</span> State.join (State.erase σ₁ x) σ₂
  <span class="bp">|</span> none <span class="bp">=&gt;</span> State.join (State.erase σ₁ x) σ₂) <span class="bp">≼</span>
  σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk131" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk131"><div class="alectryon-token"><span class="k">have</span></div><div class="alectryon-token"> : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.erase</var><b>: </b><span>State → Var → State</span></span></div></blockquote></div></small></div>State.erase</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>length</var><b>: </b><span>{α : Type} → List α → Nat</span></span></div></blockquote></div></small></div><span class="na">length</span></div><div class="alectryon-token"> <span class="bp">&lt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>length</var><b>: </b><span>{α : Type} → List α → Nat</span></span></div></blockquote></div></small></div>length</div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>succ</var><b>: </b><span>Nat → Nat</span></span></div></blockquote></div></small></div>succ</div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.length_erase_lt</var><b>: </b><span>∀ (σ : State) (x : Var), List.length (State.erase σ x) &lt; Nat.succ (List.length σ)</span></span></div></blockquote></div></small></div>State.length_erase_lt</div><div class="alectryon-token"> <span class="bp">..</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="k">match</span> State.find<span class="bp">?</span> σ₂ x <span class="k">with</span>
  <span class="bp">|</span> some w <span class="bp">=&gt;</span> <span class="k">if</span> v <span class="bp">=</span> w <span class="k">then</span> (x, v) :: State.join (State.erase σ₁ x) σ₂ <span class="k">else</span> State.join (State.erase σ₁ x) σ₂
  <span class="bp">|</span> none <span class="bp">=&gt;</span> State.join (State.erase σ₁ x) σ₂) <span class="bp">≼</span>
  σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk132" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk132"><div class="alectryon-token"><span class="k">have</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>State.join (State.erase σ₁ x) σ₂ ≼ σ₂</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>join_right</var><b>: </b><span>∀ (σ₁ σ₂ : State), State.join σ₁ σ₂ ≼ σ₂</span></span></div></blockquote></div></small></div><span class="nv">join_right</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.erase</var><b>: </b><span>State → Var → State</span></span></div></blockquote></div></small></div>State.erase</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">) </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="k">match</span> State.find<span class="bp">?</span> σ₂ x <span class="k">with</span>
  <span class="bp">|</span> some w <span class="bp">=&gt;</span> <span class="k">if</span> v <span class="bp">=</span> w <span class="k">then</span> (x, v) :: State.join (State.erase σ₁ x) σ₂ <span class="k">else</span> State.join (State.erase σ₁ x) σ₂
  <span class="bp">|</span> none <span class="bp">=&gt;</span> State.join (State.erase σ₁ x) σ₂) <span class="bp">≼</span>
  σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk133" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk133"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> σ₂</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">h_1</span></span><div class="goal-conclusion">(<span class="k">if</span> v <span class="bp">=</span> v<span class="bp">✝</span> <span class="k">then</span> (x, v) :: State.join (State.erase σ₁ x) σ₂ <span class="k">else</span> State.join (State.erase σ₁ x) σ₂) <span class="bp">≼</span> σ₂</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk134" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> σ₂</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk134"><hr><span class="goal-name">h_2</span></label><div class="goal-conclusion">State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> σ₂</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk135" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk135"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> y w h <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> σ₂</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">h_1</span></span><div class="goal-conclusion">(<span class="k">if</span> v <span class="bp">=</span> v<span class="bp">✝</span> <span class="k">then</span> (x, v) :: State.join (State.erase σ₁ x) σ₂ <span class="k">else</span> State.join (State.erase σ₁ x) σ₂) <span class="bp">≼</span> σ₂</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk136" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> σ₂</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk136"><hr><span class="goal-name">h_2</span></label><div class="goal-conclusion">State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> σ₂</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk137" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk137"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> σ₂</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Option Val</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ₂ x <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">(x, v) :: State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> σ₂</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk138" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> σ₂</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Option Val</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ₂ x <span class="bp">=</span> some w</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk138"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> σ₂</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk139" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk139"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> σ₂</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Option Val</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ₂ x <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="k">if</span> v <span class="bp">=</span> w <span class="k">then</span> (x, v) :: State.join (State.erase σ₁ x) σ₂ <span class="k">else</span> State.join (State.erase σ₁ x) σ₂) <span class="bp">≼</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk13a" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk13a"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk13b" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk13b"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> σ₂</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Option Val</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ₂ x <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">(x, w) :: State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk13c" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk13c"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.cons_of_left</var><b>: </b><span>∀ {σ' σ : State} {x : Var} {v : Val}, σ' ≼ σ → State.find? σ x = some v → (x, v) :: σ' ≼ σ</span></span></div></blockquote></div></small></div>Substate.cons_of_left</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>State.join (State.erase σ₁ x) σ₂ ≼ σ₂</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>State.find? σ₂ x = some w</span></span></div></blockquote></div></small></div><span class="nv">h</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk13d" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk13d"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> h <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>List.length (State.erase σ₁ x) <span class="bp">&lt;</span> Nat.succ (List.length σ₁)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> σ₂</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">h_2</span></span><div class="goal-conclusion">State.join (State.erase σ₁ x) σ₂ <span class="bp">≼</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk13e" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk13e"><div class="alectryon-token"><span class="k">assumption</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
</div><div class="alectryon-token"><span class="k">termination_by</span></div><div class="alectryon-token"> _ σ₁ _ <span class="bp">=&gt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>length</var><b>: </b><span>{α : Type} → List α → Nat</span></span></div></blockquote></div></small></div>length</div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.join_right_of</var><b>: </b><span>∀ {σ₁ σ₂ : State}, σ₁ ≼ σ₂ → ∀ (σ₃ : State), State.join σ₃ σ₁ ≼ σ₂</span></span></div></blockquote></div></small></div>Substate.join_right_of</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>σ₁ ≼ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₃</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₃</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>State</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₃</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₃</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>join</var><b>: </b><span>State → State → State</span></span></div></blockquote></div></small></div>join</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> :=
  (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>join_right</var><b>: </b><span>∀ (σ₁ σ₂ : State), State.join σ₁ σ₂ ≼ σ₂</span></span></div></blockquote></div></small></div>join_right</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₃</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₃</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>trans</var><b>: </b><span>∀ {σ₁ σ₂ σ₃ : State}, σ₁ ≼ σ₂ → σ₂ ≼ σ₃ → σ₁ ≼ σ₃</span></span></div></blockquote></div></small></div><span class="na">trans</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>σ₁ ≼ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.eq_bot</var><b>: </b><span>∀ {σ : State}, σ ≼ [] → σ = []</span></span></div></blockquote></div></small></div>Substate.eq_bot</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>σ ≼ []</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>⊥</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="bp">⊥</span></div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>⊥</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="bp">⊥</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk13f" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk13f"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ <span class="bp">≼</span> []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ <span class="bp">=</span> []</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk140" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk140"><div class="alectryon-token"><span class="k">match</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token">
  <span class="bp">|</span> [] <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ <span class="bp">≼</span> []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ <span class="bp">=</span> []</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk141" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk141"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk142" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk142"><div class="alectryon-token"><span class="bp">|</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ <span class="bp">≼</span> []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ <span class="bp">=</span> []</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk143" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk143"><div class="alectryon-token"><span class="k">have</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.find?</var><b>: </b><span>State → Var → Option Val</span></span></div></blockquote></div></small></div>State.find<span class="bp">?</span></div><div class="alectryon-token"> ((</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">) </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span>{α : Type} → α → Option α</span></span></div></blockquote></div></small></div>some</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> :=</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(y, v) :: σ <span class="bp">≼</span> []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(y, v) :: σ <span class="bp">=</span> []</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk144" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk144"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(y, v) :: σ <span class="bp">≼</span> []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.find<span class="bp">?</span> ((y, v) :: σ) y <span class="bp">=</span> some v</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk145" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk145"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk146" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk146"><div class="alectryon-token"><span class="k">have</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>(y, v) :: σ ≼ []</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>this</var><b>: </b><span>State.find? ((y, v) :: σ) y = some v</span></span></div></blockquote></div></small></div><span class="k">this</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(y, v) :: σ <span class="bp">≼</span> []</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> [] y <span class="bp">=</span> some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(y, v) :: σ <span class="bp">=</span> []</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk147" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk147"><div class="alectryon-token"><span class="k">contradiction</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.erase_of_cons</var><b>: </b><span>∀ {σ' : State} {x : Var} {v : Val} {σ : List (Var × Val)}, σ' ≼ (x, v) :: σ → State.erase σ' x ≼ σ</span></span></div></blockquote></div></small></div>Substate.erase_of_cons</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>σ' ≼ (x, v) :: σ</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token"> <span class="bp">≼</span> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) :: </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>erase</var><b>: </b><span>State → Var → State</span></span></div></blockquote></div></small></div>erase</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk148" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk148"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (x, v) :: σ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.erase σ&#39; x <span class="bp">≼</span> σ</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk149" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk149"><div class="alectryon-token"><span class="k">intro</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>w</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">w</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hf'</var><b>: </b><span>State.find? (State.erase σ' x) y = some w</span></span></div></blockquote></div></small></div><span class="nv">hf&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (x, v) :: σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.erase σ&#39; x) y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk14a" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk14a"><div class="alectryon-token"><span class="k">by_cases</span></div><div class="alectryon-token"> hxy : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (x, v) :: σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.erase σ&#39; x) y <span class="bp">=</span> some w</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk14b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (x, v) :: σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.erase σ&#39; x) y <span class="bp">=</span> some w</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>x <span class="bp">=</span> y</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk14b"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk14c" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk14c"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (x, v) :: σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.erase σ&#39; x) y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk14d" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk14d"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>] </div><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hf'</var><b>: </b><span>State.find? (State.erase σ' x) y = some w</span></span></div></blockquote></div></small></div><span class="nv">hf&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (x, v) :: σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>x <span class="bp">=</span> y</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ&#39; y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk14e" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk14e"><div class="alectryon-token"><span class="k">have</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hf</var><b>: </b><span>State.find? ((x, v) :: σ) y = some w</span></span></div></blockquote></div></small></div><span class="nv">hf</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>σ' ≼ (x, v) :: σ</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hf'</var><b>: </b><span>State.find? σ' y = some w</span></span></div></blockquote></div></small></div><span class="nv">hf&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (x, v) :: σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>x <span class="bp">=</span> y</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ&#39; y <span class="bp">=</span> some w</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> ((x, v) :: σ) y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk14f" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk14f"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hxy</var><b>: </b><span>¬x = y</span></span></div></blockquote></div></small></div><span class="nv">hxy</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Ne.symm</var><b>: </b><span>∀ {α : Type} {a b : α}, a ≠ b → b ≠ a</span></span></div></blockquote></div></small></div>Ne.symm</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hxy</var><b>: </b><span>¬x = y</span></span></div></blockquote></div></small></div><span class="nv">hxy</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hf</var><b>: </b><span>State.find? ((x, v) :: σ) y = some w</span></span></div></blockquote></div></small></div><span class="nv">hf</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (x, v) :: σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>x <span class="bp">=</span> y</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ&#39; y <span class="bp">=</span> some w</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk150" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk150"><div class="alectryon-token"><span class="k">assumption</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.erase_update</var><b>: </b><span>∀ {σ' σ : State} {x : Var} {v : Val}, σ' ≼ σ → State.erase σ' x ≼ State.update σ x v</span></span></div></blockquote></div></small></div>Substate.erase_update</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>σ' ≼ σ</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>erase</var><b>: </b><span>State → Var → State</span></span></div></blockquote></div></small></div>erase</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>update</var><b>: </b><span>State → Var → Val → State</span></span></div></blockquote></div></small></div>update</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk151" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk151"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.erase σ&#39; x <span class="bp">≼</span> State.update σ x v</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk152" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk152"><div class="alectryon-token"><span class="k">intro</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>w</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">w</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hf'</var><b>: </b><span>State.find? (State.erase σ' x) y = some w</span></span></div></blockquote></div></small></div><span class="nv">hf&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.erase σ&#39; x) y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk153" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk153"><div class="alectryon-token"><span class="k">by_cases</span></div><div class="alectryon-token"> hxy : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.erase σ&#39; x) y <span class="bp">=</span> some w</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk154" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.erase σ&#39; x) y <span class="bp">=</span> some w</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>x <span class="bp">=</span> y</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk154"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk155" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk155"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.erase σ&#39; x) y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk156" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk156"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>] </div><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hf'</var><b>: </b><span>State.find? (State.erase σ' x) y = some w</span></span></div></blockquote></div></small></div><span class="nv">hf&#39;</span></div><div class="alectryon-token"> <span class="bp">|-</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>x <span class="bp">=</span> y</span></span></span><br><span><var>hf'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ&#39; y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk157" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk157"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>σ' ≼ σ</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hf'</var><b>: </b><span>State.find? σ' y = some w</span></span></div></blockquote></div></small></div><span class="nv">hf&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.update_of</var><b>: </b><span>∀ {σ' σ : State} {x : Var} {v : Val}, σ' ≼ σ → State.update σ' x v ≼ State.update σ x v</span></span></div></blockquote></div></small></div>Substate.update_of</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>σ' ≼ σ</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>update</var><b>: </b><span>State → Var → Val → State</span></span></div></blockquote></div></small></div>update</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>update</var><b>: </b><span>State → Var → Val → State</span></span></div></blockquote></div></small></div>update</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk158" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk158"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.update σ&#39; x v <span class="bp">≼</span> State.update σ x v</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk159" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk159"><div class="alectryon-token"><span class="k">intro</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>w</var><b>: </b><span>Val</span></span></div></blockquote></div></small></div><span class="nv">w</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hf</var><b>: </b><span>State.find? (State.update σ' x v) y = some w</span></span></div></blockquote></div></small></div><span class="nv">hf</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk15a" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk15a"><div class="alectryon-token"><span class="k">induction</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">generalizing</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hf</var><b>: </b><span>State.find? (State.update σ' x v) y = some w</span></span></div></blockquote></div></small></div><span class="nv">hf</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk15b" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk15b"><div class="alectryon-token"><span class="bp">|</span> nil  <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> []</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">nil</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update [] x v) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk15c" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk15c"><div class="alectryon-token"><span class="k">rw</span></div><div class="alectryon-token"> [</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> []</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">nil</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update [] x v) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk15d" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk15d"><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>σ' ≼ []</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eq_bot</var><b>: </b><span>∀ {σ : State}, σ ≼ [] → σ = []</span></span></div></blockquote></div></small></div>eq_bot</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> []</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.update [] x v) y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">nil</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update [] x v) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk15e" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk15e"><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> []</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.update [] x v) y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">nil</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update [] x v) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"></div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk15f" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk15f"><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hf</var><b>: </b><span>State.find? (State.update σ' x v) y = some w</span></span></div></blockquote></div></small></div><span class="nv">hf</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> []</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.update [] x v) y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">nil</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update [] x v) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk160" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk160"><div class="alectryon-token"><span class="k">assumption</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk161" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk161"><div class="alectryon-token"><span class="bp">|</span> cons zw&#39; σ ih <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>zw'</var><span class="hyp-type"><b>: </b><span>Var <span class="bp">×</span> Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> zw&#39; :: σ</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">cons</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update (zw&#39; :: σ) x v) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk162" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk162"><div class="alectryon-token"><span class="k">cases</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>zw'</var><b>: </b><span>Var × Val</span></span></div></blockquote></div></small></div><span class="nv">zw&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>fst✝</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>snd✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (fst<span class="bp">✝</span>, snd<span class="bp">✝</span>) :: σ</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">cons.mk</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update ((fst<span class="bp">✝</span>, snd<span class="bp">✝</span>) :: σ) x v) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk163" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk163"><div class="alectryon-token"><span class="k">rename_i</span></div><div class="alectryon-token"> z w&#39;</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">cons.mk</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update ((z, w&#39;) :: σ) x v) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk164" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk164"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">cons.mk</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> (<span class="k">if</span> x <span class="bp">=</span> z <span class="k">then</span> (x, v) :: σ <span class="k">else</span> (z, w&#39;) :: State.update σ x v) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk165" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk165"><div class="alectryon-token"><span class="k">have</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>erase</var><b>: </b><span>State → Var → State</span></span></div></blockquote></div></small></div>erase</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>z</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">z</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>σ' ≼ (z, w') :: σ</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>erase_of_cons</var><b>: </b><span>∀ {σ' : State} {x : Var} {v : Val} {σ : List (Var × Val)}, σ' ≼ (x, v) :: σ → State.erase σ' x ≼ σ</span></span></div></blockquote></div></small></div>erase_of_cons</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">cons.mk</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> (<span class="k">if</span> x <span class="bp">=</span> z <span class="k">then</span> (x, v) :: σ <span class="k">else</span> (z, w&#39;) :: State.update σ x v) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk166" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk166"><div class="alectryon-token"><span class="k">have</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>State.find? (State.update (State.erase σ' z) x v) y = some w → State.find? (State.update σ x v) y = some w</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>∀ {σ' : State}, σ' ≼ σ → State.find? (State.update σ' x v) y = some w → State.find? (State.update σ x v) y = some w</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>this</var><b>: </b><span>State.erase σ' z ≼ σ</span></span></div></blockquote></div></small></div><span class="nv">this</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> (State.update (State.erase σ&#39; z) x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">cons.mk</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> (<span class="k">if</span> x <span class="bp">=</span> z <span class="k">then</span> (x, v) :: σ <span class="k">else</span> (z, w&#39;) :: State.update σ x v) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk167" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk167"><div class="alectryon-token"><span class="k">revert</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>State.find? (State.update (State.erase σ' z) x v) y = some w → State.find? (State.update σ x v) y = some w</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hf</var><b>: </b><span>State.find? (State.update σ' x v) y = some w</span></span></div></blockquote></div></small></div><span class="nv">hf</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">cons.mk</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span>
  (State.find<span class="bp">?</span> (State.update (State.erase σ&#39; z) x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w) <span class="bp">→</span>
    State.find<span class="bp">?</span> (<span class="k">if</span> x <span class="bp">=</span> z <span class="k">then</span> (x, v) :: σ <span class="k">else</span> (z, w&#39;) :: State.update σ x v) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk168" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk168"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">cons.mk.inl</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span>
  (State.find<span class="bp">?</span> (State.update (State.erase σ&#39; z) x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w) <span class="bp">→</span>
    State.find<span class="bp">?</span> ((x, v) :: σ) y <span class="bp">=</span> some w</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk169" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk169"><hr><span class="goal-name">cons.mk.inr</span></label><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span>
  (State.find<span class="bp">?</span> (State.update (State.erase σ&#39; z) x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w) <span class="bp">→</span>
    State.find<span class="bp">?</span> ((z, w&#39;) :: State.update σ x v) y <span class="bp">=</span> some w</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk16a" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk16a"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">cons.mk</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span>
  (State.find<span class="bp">?</span> (State.update (State.erase σ&#39; z) x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w) <span class="bp">→</span>
    State.find<span class="bp">?</span> (<span class="k">if</span> x <span class="bp">=</span> z <span class="k">then</span> (x, v) :: σ <span class="k">else</span> (z, w&#39;) :: State.update σ x v) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk16b" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk16b"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">cons.mk.inl</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update σ&#39; z v) y <span class="bp">=</span> some w <span class="bp">→</span>
  (State.find<span class="bp">?</span> (State.update (State.erase σ&#39; z) z v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ z v) y <span class="bp">=</span> some w) <span class="bp">→</span>
    (<span class="k">if</span> y <span class="bp">=</span> z <span class="k">then</span> some v <span class="k">else</span> State.find<span class="bp">?</span> σ y) <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk16c" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk16c"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">cons.mk.inr</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span>
  (State.find<span class="bp">?</span> (State.update (State.erase σ&#39; z) x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w) <span class="bp">→</span>
    State.find<span class="bp">?</span> ((z, w&#39;) :: State.update σ x v) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk16d" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk16d"><div class="alectryon-token"><span class="k">by_cases</span></div><div class="alectryon-token"> hyz : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>z</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">z</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br><span><var>hyz</var><span class="hyp-type"><b>: </b><span>y <span class="bp">=</span> z</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">cons.mk.inr.inl</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span>
  (State.find<span class="bp">?</span> (State.update (State.erase σ&#39; z) x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w) <span class="bp">→</span>
    (<span class="k">if</span> y <span class="bp">=</span> z <span class="k">then</span> some w&#39; <span class="k">else</span> State.find<span class="bp">?</span> (State.update σ x v) y) <span class="bp">=</span> some w</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk16e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br><span><var>hyz</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>y <span class="bp">=</span> z</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk16e"><hr><span class="goal-name">cons.mk.inr.inr</span></label><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span>
  (State.find<span class="bp">?</span> (State.update (State.erase σ&#39; z) x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w) <span class="bp">→</span>
    (<span class="k">if</span> y <span class="bp">=</span> z <span class="k">then</span> some w&#39; <span class="k">else</span> State.find<span class="bp">?</span> (State.update σ x v) y) <span class="bp">=</span> some w</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk16f" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk16f"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">cons.mk.inr</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span>
  (State.find<span class="bp">?</span> (State.update (State.erase σ&#39; z) x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w) <span class="bp">→</span>
    (<span class="k">if</span> y <span class="bp">=</span> z <span class="k">then</span> some w&#39; <span class="k">else</span> State.find<span class="bp">?</span> (State.update σ x v) y) <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk170" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk170"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><span class="k">config</span></div><div class="alectryon-token"> := { contextual := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>true</var><b>: </b><span>Bool</span></span></div></blockquote></div></small></div><span class="k">true</span></div><div class="alectryon-token"> }) [<span class="bp">*</span>]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br><span><var>hyz</var><span class="hyp-type"><b>: </b><span>y <span class="bp">=</span> z</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">cons.mk.inr.inl</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> σ&#39; z <span class="bp">=</span> some w <span class="bp">→</span> w&#39; <span class="bp">=</span> w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk171" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk171"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br><span><var>hyz</var><span class="hyp-type"><b>: </b><span>y <span class="bp">=</span> z</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">cons.mk.inr.inl</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> σ&#39; z <span class="bp">=</span> some w <span class="bp">→</span> w&#39; <span class="bp">=</span> w</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk172" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br><span><var>hyz</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>y <span class="bp">=</span> z</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk172"><hr><span class="goal-name">cons.mk.inr.inr</span></label><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span>
  (State.find<span class="bp">?</span> (State.update (State.erase σ&#39; z) x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w) <span class="bp">→</span>
    State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk173" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk173"><div class="alectryon-token"><span class="k">intro</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>he'</var><b>: </b><span>State.find? σ' z = some w</span></span></div></blockquote></div></small></div><span class="nv">he&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br><span><var>hyz</var><span class="hyp-type"><b>: </b><span>y <span class="bp">=</span> z</span></span></span><br><span><var>he'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ&#39; z <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">w&#39; <span class="bp">=</span> w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk174" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk174"><div class="alectryon-token"><span class="k">have</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>he</var><b>: </b><span>State.find? ((z, w') :: σ) z = some w</span></span></div></blockquote></div></small></div><span class="nv">he</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>σ' ≼ (z, w') :: σ</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>he'</var><b>: </b><span>State.find? σ' z = some w</span></span></div></blockquote></div></small></div><span class="nv">he&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br><span><var>hyz</var><span class="hyp-type"><b>: </b><span>y <span class="bp">=</span> z</span></span></span><br><span><var>he'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ&#39; z <span class="bp">=</span> some w</span></span></span><br><span><var>he</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> ((z, w&#39;) :: σ) z <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">w&#39; <span class="bp">=</span> w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk175" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk175"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>] </div><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>he</var><b>: </b><span>State.find? ((z, w') :: σ) z = some w</span></span></div></blockquote></div></small></div><span class="nv">he</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br><span><var>hyz</var><span class="hyp-type"><b>: </b><span>y <span class="bp">=</span> z</span></span></span><br><span><var>he'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ&#39; z <span class="bp">=</span> some w</span></span></span><br><span><var>he</var><span class="hyp-type"><b>: </b><span>w&#39; <span class="bp">=</span> w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">w&#39; <span class="bp">=</span> w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk176" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk176"><div class="alectryon-token"><span class="k">assumption</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk177" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk177"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br><span><var>hyz</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>y <span class="bp">=</span> z</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">cons.mk.inr.inr</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span>
  (State.find<span class="bp">?</span> (State.update (State.erase σ&#39; z) x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w) <span class="bp">→</span>
    State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk178" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk178"><div class="alectryon-token"><span class="k">by_cases</span></div><div class="alectryon-token"> hxy : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">x</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>y</var><b>: </b><span>Var</span></span></div></blockquote></div></small></div><span class="nv">y</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br><span><var>hyz</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>y <span class="bp">=</span> z</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span>
  (State.find<span class="bp">?</span> (State.update (State.erase σ&#39; z) x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w) <span class="bp">→</span>
    State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk179" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br><span><var>hyz</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>y <span class="bp">=</span> z</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>x <span class="bp">=</span> y</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk179"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span>
  (State.find<span class="bp">?</span> (State.update (State.erase σ&#39; z) x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w) <span class="bp">→</span>
    State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk17a" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk17a"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br><span><var>hyz</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>y <span class="bp">=</span> z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span>
  (State.find<span class="bp">?</span> (State.update (State.erase σ&#39; z) x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w) <span class="bp">→</span>
    State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk17b" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk17b"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br><span><var>hyz</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>y <span class="bp">=</span> z</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> σ&#39; y <span class="bp">=</span> some w <span class="bp">→</span> (State.find<span class="bp">?</span> σ&#39; y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w) <span class="bp">→</span> State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk17c" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk17c"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br><span><var>hyz</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>y <span class="bp">=</span> z</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inl</span></span><div class="goal-conclusion">v <span class="bp">=</span> w <span class="bp">→</span> (v <span class="bp">=</span> w <span class="bp">→</span> v <span class="bp">=</span> w) <span class="bp">→</span> v <span class="bp">=</span> w</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk17d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br><span><var>hyz</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>y <span class="bp">=</span> z</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>x <span class="bp">=</span> y</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk17d"><hr><span class="goal-name">inr</span></label><div class="goal-conclusion">State.find<span class="bp">?</span> σ&#39; y <span class="bp">=</span> some w <span class="bp">→</span> (State.find<span class="bp">?</span> σ&#39; y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w) <span class="bp">→</span> State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk17e" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk17e"><div class="alectryon-token"><span class="k">intros</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br><span><var>hyz</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>y <span class="bp">=</span> z</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v <span class="bp">=</span> w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk17f" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk17f"><div class="alectryon-token"><span class="k">assumption</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk180" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk180"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ&#39; : State}, σ&#39; <span class="bp">≼</span> σ <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ&#39; x v) y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> (State.update σ x v) y <span class="bp">=</span> some w</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br><span><var>hyz</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>y <span class="bp">=</span> z</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>x <span class="bp">=</span> y</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">inr</span></span><div class="goal-conclusion">State.find<span class="bp">?</span> σ&#39; y <span class="bp">=</span> some w <span class="bp">→</span> (State.find<span class="bp">?</span> σ&#39; y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w) <span class="bp">→</span> State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
        </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk181" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk181"><div class="alectryon-token"><span class="k">intro</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>he'</var><b>: </b><span>State.find? σ' y = some w</span></span></div></blockquote></div></small></div><span class="nv">he&#39;</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>State.find? σ' y = some w → State.find? σ y = some w</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>List (Var <span class="bp">×</span> Val)</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> (z, w&#39;) :: σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>State.erase σ&#39; z <span class="bp">≼</span> σ</span></span></span><br><span><var>hyz</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>y <span class="bp">=</span> z</span></span></span><br><span><var>hxy</var><span class="hyp-type"><b>: </b><span><span class="bp">¬</span>x <span class="bp">=</span> y</span></span></span><br><span><var>he'</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ&#39; y <span class="bp">=</span> some w</span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ&#39; y <span class="bp">=</span> some w <span class="bp">→</span> State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.find<span class="bp">?</span> σ y <span class="bp">=</span> some w</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
        </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk182" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk182"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>State.find? σ' y = some w → State.find? σ y = some w</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>he'</var><b>: </b><span>State.find? σ' y = some w</span></span></div></blockquote></div></small></div><span class="nv">he&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.eval_constProp_of_sub</var><b>: </b><span>∀ {σ' σ : State} (e : Expr), σ' ≼ σ → eval σ (constProp e σ') = eval σ e</span></span></div></blockquote></div></small></div>Expr.eval_constProp_of_sub</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>σ' ≼ σ</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">) : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constProp</var><b>: </b><span>Expr → State → Expr</span></span></div></blockquote></div></small></div>constProp</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div><span class="na">eval</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div>eval</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk183" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk183"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eval σ (constProp e σ&#39;) <span class="bp">=</span> eval σ e</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk184" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk184"><div class="alectryon-token"><span class="k">induction</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eval σ (constProp e σ&#39;) <span class="bp">=</span> eval σ e</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk185" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk185"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">var</span></span><div class="goal-conclusion">eval σ
    (<span class="k">match</span> State.find<span class="bp">?</span> σ&#39; x <span class="k">with</span>
    <span class="bp">|</span> some v <span class="bp">=&gt;</span> val v
    <span class="bp">|</span> none <span class="bp">=&gt;</span> var x) <span class="bp">=</span>
  some (State.get σ x)</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk186" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk186"><div class="alectryon-token"><span class="bp">|</span> var x <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">var</span></span><div class="goal-conclusion">eval σ
    (<span class="k">match</span> State.find<span class="bp">?</span> σ&#39; x <span class="k">with</span>
    <span class="bp">|</span> some v <span class="bp">=&gt;</span> val v
    <span class="bp">|</span> none <span class="bp">=&gt;</span> var x) <span class="bp">=</span>
  some (State.get σ x)</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk187" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk187"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">var.h_1</span></span><div class="goal-conclusion">eval σ (val v<span class="bp">✝</span>) <span class="bp">=</span> some (State.get σ x)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk188" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk188"><hr><span class="goal-name">var.h_2</span></label><div class="goal-conclusion">eval σ (var x) <span class="bp">=</span> some (State.get σ x)</div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk189" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk189"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">var</span></span><div class="goal-conclusion">eval σ
    (<span class="k">match</span> State.find<span class="bp">?</span> σ&#39; x <span class="k">with</span>
    <span class="bp">|</span> some v <span class="bp">=&gt;</span> val v
    <span class="bp">|</span> none <span class="bp">=&gt;</span> var x) <span class="bp">=</span>
  some (State.get σ x)</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk18a" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk18a"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">var.h_1</span></span><div class="goal-conclusion">v<span class="bp">✝</span> <span class="bp">=</span> State.get σ x</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk18b" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk18b"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> he <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">var.h_1</span></span><div class="goal-conclusion">v<span class="bp">✝</span> <span class="bp">=</span> State.get σ x</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk18c" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk18c"><div class="alectryon-token"><span class="k">rw</span></div><div class="alectryon-token"> [</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>he</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ&#39; x <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v<span class="bp">✝</span> <span class="bp">=</span> State.get σ x</div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk18d" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk18d"><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State.get_of_find?</var><b>: </b><span>∀ {x : Var} {v : Val} {σ : State}, State.find? σ x = some v → State.get σ x = v</span></span></div></blockquote></div></small></div>State.get_of_find<span class="bp">?</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>σ' ≼ σ</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>he</var><b>: </b><span>State.find? σ' x = some v✝</span></span></div></blockquote></div></small></div><span class="nv">he</span></div><div class="alectryon-token">)</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ', σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>he</var><span class="hyp-type"><b>: </b><span>State.find<span class="bp">?</span> σ&#39; x <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v<span class="bp">✝</span> <span class="bp">=</span> v<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk18e" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk18e"><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.eval_constProp'</var><b>: </b><span>∀ {σ : State} {v : Option Val} {σ' : State} {e : Expr}, eval σ e = v → σ' ≼ σ → eval σ (constProp e σ') = v</span></span></div></blockquote></div></small></div>Expr.eval_constProp&#39;</div><div class="alectryon-token"> {</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Expr</div><div class="alectryon-token">} (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₁</var><b>: </b><span>eval σ e = v</span></span></div></blockquote></div></small></div><span class="nv">h₁</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div>eval</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Option Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>σ' ≼ σ</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">) : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constProp</var><b>: </b><span>Expr → State → Expr</span></span></div></blockquote></div></small></div>constProp</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval</var><b>: </b><span>State → Expr → Option Val</span></span></div></blockquote></div></small></div><span class="na">eval</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token"> <span class="bp">=</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>v</var><b>: </b><span>Option Val</span></span></div></blockquote></div></small></div><span class="nv">v</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk18f" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk18f"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Option Val</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>eval σ e <span class="bp">=</span> v</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eval σ (constProp e σ&#39;) <span class="bp">=</span> v</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk190" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk190"><div class="alectryon-token"><span class="k">have</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>eval_constProp_of_sub</var><b>: </b><span>∀ {σ' σ : State} (e : Expr), σ' ≼ σ → eval σ (constProp e σ') = eval σ e</span></span></div></blockquote></div></small></div>eval_constProp_of_sub</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="nv">e</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>σ' ≼ σ</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Option Val</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>eval σ e <span class="bp">=</span> v</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>eval σ (constProp e σ&#39;) <span class="bp">=</span> eval σ e</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eval σ (constProp e σ&#39;) <span class="bp">=</span> v</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk191" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk191"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₁</var><b>: </b><span>eval σ e = v</span></span></div></blockquote></div></small></div><span class="nv">h₁</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>this</var><b>: </b><span>eval σ (constProp e σ') = eval σ e</span></span></div></blockquote></div></small></div><span class="nv">this</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Option Val</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>eval σ e <span class="bp">=</span> v</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ&#39; <span class="bp">≼</span> σ</span></span></span><br><span><var>this</var><span class="hyp-type"><b>: </b><span>eval σ (constProp e σ&#39;) <span class="bp">=</span> v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eval σ (constProp e σ&#39;) <span class="bp">=</span> v</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk192" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk192"><div class="alectryon-token"><span class="k">assumption</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt.constProp_sub</var><b>: </b><span>∀ {σ₁ : State} {s : Stmt} {σ₂ σ₁' : State}, (σ₁, s) ⇓ σ₂ → σ₁' ≼ σ₁ → (constProp s σ₁').snd ≼ σ₂</span></span></div></blockquote></div></small></div>Stmt.constProp_sub</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₁</var><b>: </b><span>(σ₁, s) ⇓ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h₁</span></div><div class="alectryon-token"> : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>σ₁' ≼ σ₁</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁&#39;</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">) : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constProp</var><b>: </b><span>Stmt → State → Stmt × State</span></span></div></blockquote></div></small></div>constProp</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁&#39;</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>2</var><b>: </b><span>{α β : Type} → α × β → β</span></span></div></blockquote></div></small></div><span class="mi">2</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk193" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk193"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂, σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁, s) <span class="bp">⇓</span> σ₂</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ₁</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(constProp s σ₁&#39;)<span class="bp">.</span>snd <span class="bp">≼</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk194" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk194"><div class="alectryon-token"><span class="k">induction</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₁</var><b>: </b><span>(σ₁, s) ⇓ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">generalizing</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁&#39;</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂, σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁, s) <span class="bp">⇓</span> σ₂</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ₁</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(constProp s σ₁&#39;)<span class="bp">.</span>snd <span class="bp">≼</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk195" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk195"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂, σ✝, σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">skip</span></span><div class="goal-conclusion">σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk196" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk196"><div class="alectryon-token"><span class="bp">|</span> skip <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂, σ✝, σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">skip</span></span><div class="goal-conclusion">σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk197" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk197"><div class="alectryon-token"><span class="k">assumption</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk198" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk198"><div class="alectryon-token"><span class="bp">|</span> assign heq <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">assign</span></span><div class="goal-conclusion">(<span class="k">match</span> Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="k">with</span>
    <span class="bp">|</span> Expr.val v <span class="bp">=&gt;</span> (x<span class="bp">✝</span> ::= Expr.val v, State.update σ₁&#39; x<span class="bp">✝</span> v)
    <span class="bp">|</span> e&#39; <span class="bp">=&gt;</span> (x<span class="bp">✝</span> ::= e&#39;, State.erase σ₁&#39; x<span class="bp">✝</span>))<span class="bp">.</span>snd <span class="bp">≼</span>
  State.update σ<span class="bp">✝</span> x<span class="bp">✝</span> v<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk199" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk199"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">assign.h_1</span></span><div class="goal-conclusion">(x<span class="bp">✝¹</span> ::= Expr.val v<span class="bp">✝</span>, State.update σ₁&#39; x<span class="bp">✝¹</span> v<span class="bp">✝</span>)<span class="bp">.</span>snd <span class="bp">≼</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk19a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk19a"><hr><span class="goal-name">assign.h_2</span></label><div class="goal-conclusion">(x<span class="bp">✝³</span> ::= x<span class="bp">✝²</span>, State.erase σ₁&#39; x<span class="bp">✝³</span>)<span class="bp">.</span>snd <span class="bp">≼</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝³</span> v<span class="bp">✝</span></div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk19b" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk19b"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">assign</span></span><div class="goal-conclusion">(<span class="k">match</span> Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="k">with</span>
    <span class="bp">|</span> Expr.val v <span class="bp">=&gt;</span> (x<span class="bp">✝</span> ::= Expr.val v, State.update σ₁&#39; x<span class="bp">✝</span> v)
    <span class="bp">|</span> e&#39; <span class="bp">=&gt;</span> (x<span class="bp">✝</span> ::= e&#39;, State.erase σ₁&#39; x<span class="bp">✝</span>))<span class="bp">.</span>snd <span class="bp">≼</span>
  State.update σ<span class="bp">✝</span> x<span class="bp">✝</span> v<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk19c" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk19c"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">assign.h_1</span></span><div class="goal-conclusion">State.update σ₁&#39; x<span class="bp">✝¹</span> v<span class="bp">✝</span> <span class="bp">≼</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk19d" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk19d"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> h <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">assign.h_1</span></span><div class="goal-conclusion">State.update σ₁&#39; x<span class="bp">✝¹</span> v<span class="bp">✝</span> <span class="bp">≼</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk19e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h✝</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk19e"><hr><span class="goal-name">assign.h_2</span></label><div class="goal-conclusion">State.erase σ₁&#39; x<span class="bp">✝³</span> <span class="bp">≼</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝³</span> v<span class="bp">✝</span></div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk19f" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk19f"><div class="alectryon-token"><span class="k">have</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq'</var><b>: </b><span>Expr.eval σ✝ (Expr.constProp e✝ σ₁') = some v✝¹</span></span></div></blockquote></div></small></div><span class="nv">heq&#39;</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.eval_constProp'</var><b>: </b><span>∀ {σ : State} {v : Option Val} {σ' : State} {e : Expr},
  Expr.eval σ e = v → σ' ≼ σ → Expr.eval σ (Expr.constProp e σ') = v</span></span></div></blockquote></div></small></div>Expr.eval_constProp&#39;</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ✝ e✝ = some v✝¹</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>σ₁' ≼ σ✝</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> Expr.val v<span class="bp">✝</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.update σ₁&#39; x<span class="bp">✝¹</span> v<span class="bp">✝</span> <span class="bp">≼</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a0" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a0"><div class="alectryon-token"><span class="k">rw</span></div><div class="alectryon-token"> [</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> Expr.val v<span class="bp">✝</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.update σ₁&#39; x<span class="bp">✝¹</span> v<span class="bp">✝</span> <span class="bp">≼</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a1" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a1"><div class="alectryon-token"><span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.eval_simplify</var><b>: </b><span>∀ {σ : State} (e : Expr), Expr.eval σ (Expr.simplify e) = Expr.eval σ e</span></span></div></blockquote></div></small></div>Expr.eval_simplify</div><div class="alectryon-token">,</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> Expr.val v<span class="bp">✝</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> (Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;)) <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.update σ₁&#39; x<span class="bp">✝¹</span> v<span class="bp">✝</span> <span class="bp">≼</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a2" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a2"><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>Expr.simplify (Expr.constProp e✝ σ₁') = Expr.val v✝</span></span></div></blockquote></div></small></div><span class="nv">h</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> Expr.val v<span class="bp">✝</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> (Expr.val v<span class="bp">✝</span>) <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.update σ₁&#39; x<span class="bp">✝¹</span> v<span class="bp">✝</span> <span class="bp">≼</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a3" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a3"><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> Expr.val v<span class="bp">✝</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> (Expr.val v<span class="bp">✝</span>) <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.update σ₁&#39; x<span class="bp">✝¹</span> v<span class="bp">✝</span> <span class="bp">≼</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"></div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a4" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a4"><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq'</var><b>: </b><span>Expr.eval σ✝ (Expr.constProp e✝ σ₁') = some v✝¹</span></span></div></blockquote></div></small></div><span class="nv">heq&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> Expr.val v<span class="bp">✝</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> (Expr.val v<span class="bp">✝</span>) <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.update σ₁&#39; x<span class="bp">✝¹</span> v<span class="bp">✝</span> <span class="bp">≼</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a5" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a5"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq'</var><b>: </b><span>Expr.eval σ✝ (Expr.val v✝) = some v✝¹</span></span></div></blockquote></div></small></div><span class="nv">heq&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> Expr.val v<span class="bp">✝</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>v<span class="bp">✝</span> <span class="bp">=</span> v<span class="bp">✝¹</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.update σ₁&#39; x<span class="bp">✝¹</span> v<span class="bp">✝</span> <span class="bp">≼</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a6" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a6"><div class="alectryon-token"><span class="k">rw</span></div><div class="alectryon-token"> [</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> Expr.val v<span class="bp">✝</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>v<span class="bp">✝</span> <span class="bp">=</span> v<span class="bp">✝¹</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.update σ₁&#39; x<span class="bp">✝¹</span> v<span class="bp">✝</span> <span class="bp">≼</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a7" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a7"><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq'</var><b>: </b><span>v✝ = v✝¹</span></span></div></blockquote></div></small></div><span class="nv">heq&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> Expr.val v<span class="bp">✝</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>v<span class="bp">✝</span> <span class="bp">=</span> v<span class="bp">✝¹</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.update σ₁&#39; x<span class="bp">✝¹</span> v<span class="bp">✝¹</span> <span class="bp">≼</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a8" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a8"><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> Expr.val v<span class="bp">✝</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>v<span class="bp">✝</span> <span class="bp">=</span> v<span class="bp">✝¹</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">State.update σ₁&#39; x<span class="bp">✝¹</span> v<span class="bp">✝¹</span> <span class="bp">≼</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a9" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1a9"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.update_of</var><b>: </b><span>∀ {σ' σ : State} {x : Var} {v : Val}, σ' ≼ σ → State.update σ' x v ≼ State.update σ x v</span></span></div></blockquote></div></small></div>Substate.update_of</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>σ₁' ≼ σ✝</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1aa" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1aa"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> h _ _ <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h✝</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">assign.h_2</span></span><div class="goal-conclusion">State.erase σ₁&#39; x<span class="bp">✝³</span> <span class="bp">≼</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝³</span> v<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1ab" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1ab"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>σ₁' ≼ σ✝</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>erase_update</var><b>: </b><span>∀ {σ' σ : State} {x : Var} {v : Val}, σ' ≼ σ → State.erase σ' x ≼ State.update σ x v</span></span></div></blockquote></div></small></div>erase_update</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1ac" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1ac"><div class="alectryon-token"><span class="bp">|</span> whileTrue heq h₃ h₄ ih₃ ih₄ <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>evalTrue c<span class="bp">✝</span> σ₁<span class="bp">✝</span></span></span></span><br><span><var>h₃</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₄</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₃</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₁&#39; : State}, σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span> <span class="bp">→</span> (constProp b<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span>snd <span class="bp">≼</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₄</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₁&#39; : State}, σ₁&#39; <span class="bp">≼</span> σ₂<span class="bp">✝</span> <span class="bp">→</span> (constProp (while c<span class="bp">✝</span> b<span class="bp">✝</span>) σ₁&#39;)<span class="bp">.</span>snd <span class="bp">≼</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">[] <span class="bp">≼</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1ad" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1ad"><div class="alectryon-token"><span class="k">have</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₃</var><b>: </b><span>(constProp b✝ σ₁').snd ≼ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih₃</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₃</var><b>: </b><span>∀ {σ₁' : State}, σ₁' ≼ σ₁✝ → (constProp b✝ σ₁').snd ≼ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih₃</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>σ₁' ≼ σ₁✝</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>evalTrue c<span class="bp">✝</span> σ₁<span class="bp">✝</span></span></span></span><br><span><var>h₃</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₄</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₄</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₁&#39; : State}, σ₁&#39; <span class="bp">≼</span> σ₂<span class="bp">✝</span> <span class="bp">→</span> (constProp (while c<span class="bp">✝</span> b<span class="bp">✝</span>) σ₁&#39;)<span class="bp">.</span>snd <span class="bp">≼</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span></span></span></span><br><span><var>ih₃</var><span class="hyp-type"><b>: </b><span>(constProp b<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span>snd <span class="bp">≼</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">[] <span class="bp">≼</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1ae" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1ae"><div class="alectryon-token"><span class="k">have</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₄</var><b>: </b><span>(constProp (while c✝ b✝) (constProp b✝ σ₁').snd).snd ≼ σ₃✝</span></span></div></blockquote></div></small></div><span class="nv">ih₄</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₄</var><b>: </b><span>∀ {σ₁' : State}, σ₁' ≼ σ₂✝ → (constProp (while c✝ b✝) σ₁').snd ≼ σ₃✝</span></span></div></blockquote></div></small></div><span class="nv">ih₄</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₃</var><b>: </b><span>(constProp b✝ σ₁').snd ≼ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih₃</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>evalTrue c<span class="bp">✝</span> σ₁<span class="bp">✝</span></span></span></span><br><span><var>h₃</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₄</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span></span></span></span><br><span><var>ih₃</var><span class="hyp-type"><b>: </b><span>(constProp b<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span>snd <span class="bp">≼</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₄</var><span class="hyp-type"><b>: </b><span>(constProp (while c<span class="bp">✝</span> b<span class="bp">✝</span>) (constProp b<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span>snd)<span class="bp">.</span>snd <span class="bp">≼</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">[] <span class="bp">≼</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1af" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1af"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>evalTrue c✝ σ₁✝</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div><div class="alectryon-token">] </div><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₄</var><b>: </b><span>(constProp (while c✝ b✝) (constProp b✝ σ₁').snd).snd ≼ σ₃✝</span></span></div></blockquote></div></small></div><span class="nv">ih₄</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>evalTrue c<span class="bp">✝</span> σ₁<span class="bp">✝</span></span></span></span><br><span><var>h₃</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₄</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span></span></span></span><br><span><var>ih₃</var><span class="hyp-type"><b>: </b><span>(constProp b<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span>snd <span class="bp">≼</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₄</var><span class="hyp-type"><b>: </b><span>[] <span class="bp">≼</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">[] <span class="bp">≼</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b0" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b0"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₄</var><b>: </b><span>[] ≼ σ₃✝</span></span></div></blockquote></div></small></div><span class="nv">ih₄</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b1" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b1"><div class="alectryon-token"><span class="bp">|</span> whileFalse heq <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>evalFalse c<span class="bp">✝</span> σ<span class="bp">✝</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileFalse</span></span><div class="goal-conclusion">[] <span class="bp">≼</span> σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b2" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b2"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.bot</var><b>: </b><span>∀ (σ : State), [] ≼ σ</span></span></div></blockquote></div></small></div>Substate.bot</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b3" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b3"><div class="alectryon-token"><span class="bp">|</span> ifTrue heq h ih <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>evalTrue c<span class="bp">✝</span> σ₁<span class="bp">✝</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₁&#39; : State}, σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span> <span class="bp">→</span> (constProp t<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span>snd <span class="bp">≼</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifTrue</span></span><div class="goal-conclusion">State.join (constProp t<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span><span class="mi">2</span> (constProp e<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span><span class="mi">2</span> <span class="bp">≼</span> σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b4" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b4"><div class="alectryon-token"><span class="k">have</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>(constProp t✝ σ₁').snd ≼ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>∀ {σ₁' : State}, σ₁' ≼ σ₁✝ → (constProp t✝ σ₁').snd ≼ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>σ₁' ≼ σ₁✝</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>evalTrue c<span class="bp">✝</span> σ₁<span class="bp">✝</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(constProp t<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span>snd <span class="bp">≼</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifTrue</span></span><div class="goal-conclusion">State.join (constProp t<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span><span class="mi">2</span> (constProp e<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span><span class="mi">2</span> <span class="bp">≼</span> σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b5" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b5"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>(constProp t✝ σ₁').snd ≼ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>join_left_of</var><b>: </b><span>∀ {σ₁ σ₂ : State}, σ₁ ≼ σ₂ → ∀ (σ₃ : State), State.join σ₁ σ₃ ≼ σ₂</span></span></div></blockquote></div></small></div>join_left_of</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b6" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b6"><div class="alectryon-token"><span class="bp">|</span> ifFalse heq h ih <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>evalFalse c<span class="bp">✝</span> σ₁<span class="bp">✝</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₁&#39; : State}, σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span> <span class="bp">→</span> (constProp e<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span>snd <span class="bp">≼</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse</span></span><div class="goal-conclusion">State.join (constProp t<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span><span class="mi">2</span> (constProp e<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span><span class="mi">2</span> <span class="bp">≼</span> σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b7" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b7"><div class="alectryon-token"><span class="k">have</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>(constProp e✝ σ₁').snd ≼ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>∀ {σ₁' : State}, σ₁' ≼ σ₁✝ → (constProp e✝ σ₁').snd ≼ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>σ₁' ≼ σ₁✝</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>evalFalse c<span class="bp">✝</span> σ₁<span class="bp">✝</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span>(constProp e<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span>snd <span class="bp">≼</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse</span></span><div class="goal-conclusion">State.join (constProp t<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span><span class="mi">2</span> (constProp e<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span><span class="mi">2</span> <span class="bp">≼</span> σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b8" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b8"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>(constProp e✝ σ₁').snd ≼ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>join_right_of</var><b>: </b><span>∀ {σ₁ σ₂ : State}, σ₁ ≼ σ₂ → ∀ (σ₃ : State), State.join σ₃ σ₁ ≼ σ₂</span></span></div></blockquote></div></small></div>join_right_of</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b9" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1b9"><div class="alectryon-token"><span class="bp">|</span> seq h₃ h₄ ih₃ ih₄ <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂, σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s₁✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s₂✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₃✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₃</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, s₁<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₄</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, s₂<span class="bp">✝</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>ih₃</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₁&#39; : State}, σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span> <span class="bp">→</span> (constProp s₁<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span>snd <span class="bp">≼</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₄</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₁&#39; : State}, σ₁&#39; <span class="bp">≼</span> σ₂<span class="bp">✝</span> <span class="bp">→</span> (constProp s₂<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span>snd <span class="bp">≼</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">seq</span></span><div class="goal-conclusion">(constProp s₂<span class="bp">✝</span> (constProp s₁<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span><span class="mi">2</span>)<span class="bp">.</span><span class="mi">2</span> <span class="bp">≼</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1ba" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1ba"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₄</var><b>: </b><span>∀ {σ₁' : State}, σ₁' ≼ σ₂✝ → (constProp s₂✝ σ₁').snd ≼ σ₃✝</span></span></div></blockquote></div></small></div><span class="nv">ih₄</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₃</var><b>: </b><span>∀ {σ₁' : State}, σ₁' ≼ σ₁✝ → (constProp s₁✝ σ₁').snd ≼ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih₃</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>σ₁' ≼ σ₁✝</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div><div class="alectryon-token">)</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt.constProp_correct</var><b>: </b><span>∀ {σ₁ : State} {s : Stmt} {σ₂ σ₁' : State}, (σ₁, s) ⇓ σ₂ → σ₁' ≼ σ₁ → (σ₁, (constProp s σ₁').fst) ⇓ σ₂</span></span></div></blockquote></div></small></div>Stmt.constProp_correct</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₁</var><b>: </b><span>(σ₁, s) ⇓ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h₁</span></div><div class="alectryon-token"> : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>σ₁' ≼ σ₁</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁&#39;</span></div><div class="alectryon-token"> <span class="bp">≼</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">) : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁</span></div><div class="alectryon-token">, (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constProp</var><b>: </b><span>Stmt → State → Stmt × State</span></span></div></blockquote></div></small></div>constProp</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁&#39;</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>1</var><b>: </b><span>{α β : Type} → α × β → α</span></span></div></blockquote></div></small></div><span class="mi">1</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₂</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₂</span></div><div class="alectryon-token"> := </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1bb" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1bb"><div class="alectryon-token"><span class="kd">by</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂, σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁, s) <span class="bp">⇓</span> σ₂</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ₁</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ₁, (constProp s σ₁&#39;)<span class="bp">.</span>fst) <span class="bp">⇓</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1bc" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1bc"><div class="alectryon-token"><span class="k">induction</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₁</var><b>: </b><span>(σ₁, s) ⇓ σ₂</span></span></div></blockquote></div></small></div><span class="nv">h₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">generalizing</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ₁'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ₁&#39;</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">with</span></div><div class="alectryon-token"></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂, σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁, s) <span class="bp">⇓</span> σ₂</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ₁</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ₁, (constProp s σ₁&#39;)<span class="bp">.</span>fst) <span class="bp">⇓</span> σ₂</div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1bd" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1bd"><div class="alectryon-token"><span class="k">simp_all</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂, σ✝, σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">skip</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1be" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1be"><div class="alectryon-token"><span class="bp">|</span> skip <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂, σ✝, σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">skip</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, skip) <span class="bp">⇓</span> σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1bf" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1bf"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.skip</var><b>: </b><span>∀ {σ : State}, (σ, skip) ⇓ σ</span></span></div></blockquote></div></small></div>Bigstep.skip</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c0" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c0"><div class="alectryon-token"><span class="bp">|</span> assign heq <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">assign</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>,
  (<span class="k">match</span> Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="k">with</span>
    <span class="bp">|</span> Expr.val v <span class="bp">=&gt;</span> (x<span class="bp">✝</span> ::= Expr.val v, State.update σ₁&#39; x<span class="bp">✝</span> v)
    <span class="bp">|</span> e&#39; <span class="bp">=&gt;</span> (x<span class="bp">✝</span> ::= e&#39;, State.erase σ₁&#39; x<span class="bp">✝</span>))<span class="bp">.</span>fst) <span class="bp">⇓</span>
  State.update σ<span class="bp">✝</span> x<span class="bp">✝</span> v<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c1" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c1"><div class="alectryon-token"><span class="k">split</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">assign.h_1</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, (x<span class="bp">✝¹</span> ::= Expr.val v<span class="bp">✝</span>, State.update σ₁&#39; x<span class="bp">✝¹</span> v<span class="bp">✝</span>)<span class="bp">.</span>fst) <span class="bp">⇓</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c2"><hr><span class="goal-name">assign.h_2</span></label><div class="goal-conclusion">(σ<span class="bp">✝</span>, (x<span class="bp">✝³</span> ::= x<span class="bp">✝²</span>, State.erase σ₁&#39; x<span class="bp">✝³</span>)<span class="bp">.</span>fst) <span class="bp">⇓</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝³</span> v<span class="bp">✝</span></div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c3" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c3"><div class="alectryon-token"><span class="k">&lt;;&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">assign</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>,
  (<span class="k">match</span> Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="k">with</span>
    <span class="bp">|</span> Expr.val v <span class="bp">=&gt;</span> (x<span class="bp">✝</span> ::= Expr.val v, State.update σ₁&#39; x<span class="bp">✝</span> v)
    <span class="bp">|</span> e&#39; <span class="bp">=&gt;</span> (x<span class="bp">✝</span> ::= e&#39;, State.erase σ₁&#39; x<span class="bp">✝</span>))<span class="bp">.</span>fst) <span class="bp">⇓</span>
  State.update σ<span class="bp">✝</span> x<span class="bp">✝</span> v<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c4" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c4"><div class="alectryon-token"><span class="k">simp</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">assign.h_1</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, x<span class="bp">✝¹</span> ::= Expr.val v<span class="bp">✝</span>) <span class="bp">⇓</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c5" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c5"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> h <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">assign.h_1</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, x<span class="bp">✝¹</span> ::= Expr.val v<span class="bp">✝</span>) <span class="bp">⇓</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><label class="goal-separator" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c6"><hr><span class="goal-name">assign.h_2</span></label><div class="goal-conclusion">(σ<span class="bp">✝</span>, x<span class="bp">✝³</span> ::= x<span class="bp">✝²</span>) <span class="bp">⇓</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝³</span> v<span class="bp">✝</span></div></blockquote></div></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c7" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c7"><div class="alectryon-token"><span class="k">have</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq'</var><b>: </b><span>Expr.eval σ✝ (Expr.constProp e✝ σ₁') = some v✝¹</span></span></div></blockquote></div></small></div><span class="nv">heq&#39;</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.eval_constProp'</var><b>: </b><span>∀ {σ : State} {v : Option Val} {σ' : State} {e : Expr},
  Expr.eval σ e = v → σ' ≼ σ → Expr.eval σ (Expr.constProp e σ') = v</span></span></div></blockquote></div></small></div>Expr.eval_constProp&#39;</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ✝ e✝ = some v✝¹</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>σ₁' ≼ σ✝</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> Expr.val v<span class="bp">✝</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, x<span class="bp">✝¹</span> ::= Expr.val v<span class="bp">✝</span>) <span class="bp">⇓</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c8" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c8"><div class="alectryon-token"><span class="k">rw</span></div><div class="alectryon-token"> [</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> Expr.val v<span class="bp">✝</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, x<span class="bp">✝¹</span> ::= Expr.val v<span class="bp">✝</span>) <span class="bp">⇓</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c9" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1c9"><div class="alectryon-token"><span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.eval_simplify</var><b>: </b><span>∀ {σ : State} (e : Expr), Expr.eval σ (Expr.simplify e) = Expr.eval σ e</span></span></div></blockquote></div></small></div>Expr.eval_simplify</div><div class="alectryon-token">,</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> Expr.val v<span class="bp">✝</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> (Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;)) <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, x<span class="bp">✝¹</span> ::= Expr.val v<span class="bp">✝</span>) <span class="bp">⇓</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1ca" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1ca"><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>Expr.simplify (Expr.constProp e✝ σ₁') = Expr.val v✝</span></span></div></blockquote></div></small></div><span class="nv">h</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> Expr.val v<span class="bp">✝</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> (Expr.val v<span class="bp">✝</span>) <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, x<span class="bp">✝¹</span> ::= Expr.val v<span class="bp">✝</span>) <span class="bp">⇓</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1cb" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1cb"><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> Expr.val v<span class="bp">✝</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> (Expr.val v<span class="bp">✝</span>) <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, x<span class="bp">✝¹</span> ::= Expr.val v<span class="bp">✝</span>) <span class="bp">⇓</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"></div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1cc" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1cc"><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq'</var><b>: </b><span>Expr.eval σ✝ (Expr.constProp e✝ σ₁') = some v✝¹</span></span></div></blockquote></div></small></div><span class="nv">heq&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> Expr.val v<span class="bp">✝</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> (Expr.val v<span class="bp">✝</span>) <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, x<span class="bp">✝¹</span> ::= Expr.val v<span class="bp">✝</span>) <span class="bp">⇓</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1cd" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1cd"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq'</var><b>: </b><span>Expr.eval σ✝ (Expr.val v✝) = some v✝¹</span></span></div></blockquote></div></small></div><span class="nv">heq&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝¹</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> Expr.val v<span class="bp">✝</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>v<span class="bp">✝</span> <span class="bp">=</span> v<span class="bp">✝¹</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, x<span class="bp">✝¹</span> ::= Expr.val v<span class="bp">✝</span>) <span class="bp">⇓</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝¹</span> v<span class="bp">✝¹</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1ce" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1ce"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.assign</var><b>: </b><span>∀ {v : Val} {σ : State} {x : Var} {e : Expr}, Expr.eval σ e = some v → (σ, x ::= e) ⇓ State.update σ x v</span></span></div></blockquote></div></small></div>Bigstep.assign</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝¹</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝¹</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> Expr.val v<span class="bp">✝</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>v<span class="bp">✝</span> <span class="bp">=</span> v<span class="bp">✝¹</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">a</span></span><div class="goal-conclusion">Expr.eval σ<span class="bp">✝</span> (Expr.val v<span class="bp">✝</span>) <span class="bp">=</span> some v<span class="bp">✝¹</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"><span class="bp">;</span></div><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1cf" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1cf"><div class="alectryon-token"><span class="k">simp</span></div><div class="alectryon-token"> [<span class="bp">*</span>]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d0" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d0"><div class="alectryon-token"><span class="k">next</span></div><div class="alectryon-token"> h _ _ <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">assign.h_2</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, x<span class="bp">✝³</span> ::= x<span class="bp">✝²</span>) <span class="bp">⇓</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝³</span> v<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d1" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d1"><div class="alectryon-token"><span class="k">have</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq'</var><b>: </b><span>Expr.eval σ✝ (Expr.constProp e✝ σ₁') = some v✝</span></span></div></blockquote></div></small></div><span class="nv">heq&#39;</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.eval_constProp'</var><b>: </b><span>∀ {σ : State} {v : Option Val} {σ' : State} {e : Expr},
  Expr.eval σ e = v → σ' ≼ σ → Expr.eval σ (Expr.constProp e σ') = v</span></span></div></blockquote></div></small></div>Expr.eval_constProp&#39;</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ✝ e✝ = some v✝</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>σ₁' ≼ σ✝</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, x<span class="bp">✝³</span> ::= x<span class="bp">✝²</span>) <span class="bp">⇓</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝³</span> v<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d2" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d2"><div class="alectryon-token"><span class="k">rw</span></div><div class="alectryon-token"> [</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, x<span class="bp">✝³</span> ::= x<span class="bp">✝²</span>) <span class="bp">⇓</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝³</span> v<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d3" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d3"><div class="alectryon-token"><span class="bp">←</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.eval_simplify</var><b>: </b><span>∀ {σ : State} (e : Expr), Expr.eval σ (Expr.simplify e) = Expr.eval σ e</span></span></div></blockquote></div></small></div>Expr.eval_simplify</div><div class="alectryon-token">,</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> (Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;)) <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, x<span class="bp">✝³</span> ::= x<span class="bp">✝²</span>) <span class="bp">⇓</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝³</span> v<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d4" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d4"><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>Expr.simplify (Expr.constProp e✝ σ₁') = x✝²</span></span></div></blockquote></div></small></div><span class="nv">h</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> x<span class="bp">✝²</span> <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, x<span class="bp">✝³</span> ::= x<span class="bp">✝²</span>) <span class="bp">⇓</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝³</span> v<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d5" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d5"><div class="alectryon-token">]</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> x<span class="bp">✝²</span> <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, x<span class="bp">✝³</span> ::= x<span class="bp">✝²</span>) <span class="bp">⇓</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝³</span> v<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"></div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d6" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d6"><div class="alectryon-token"><span class="k">at</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq'</var><b>: </b><span>Expr.eval σ✝ (Expr.constProp e✝ σ₁') = some v✝</span></span></div></blockquote></div></small></div><span class="nv">heq&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>v✝</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>x✝³</var><span class="hyp-type"><b>: </b><span>Var</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> e<span class="bp">✝</span> <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br><span><var>x✝²</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Expr.simplify (Expr.constProp e<span class="bp">✝</span> σ₁&#39;) <span class="bp">=</span> x<span class="bp">✝²</span></span></span></span><br><span><var>heq'</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> x<span class="bp">✝²</span> <span class="bp">=</span> some v<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, x<span class="bp">✝³</span> ::= x<span class="bp">✝²</span>) <span class="bp">⇓</span> State.update σ<span class="bp">✝</span> x<span class="bp">✝³</span> v<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
      </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d7" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d7"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.assign</var><b>: </b><span>∀ {v : Val} {σ : State} {x : Var} {e : Expr}, Expr.eval σ e = some v → (σ, x ::= e) ⇓ State.update σ x v</span></span></div></blockquote></div></small></div>Bigstep.assign</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq'</var><b>: </b><span>Expr.eval σ✝ x✝² = some v✝</span></span></div></blockquote></div></small></div><span class="nv">heq&#39;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d8" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d8"><div class="alectryon-token"><span class="bp">|</span> seq h₁ h₂ ih₁ ih₂ <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂, σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s₁✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s₂✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₃✝, σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, s₁<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₁&#39; : State}, σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span> <span class="bp">→</span> (σ₁<span class="bp">✝</span>, (constProp s₁<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span>fst) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₁&#39; : State}, σ₁&#39; <span class="bp">≼</span> σ₂<span class="bp">✝</span> <span class="bp">→</span> (σ₂<span class="bp">✝</span>, (constProp s₂<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span>fst) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">seq</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, (constProp s₁<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span><span class="mi">1</span><span class="bp">;;</span> (constProp s₂<span class="bp">✝</span> (constProp s₁<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span><span class="mi">2</span>)<span class="bp">.</span><span class="mi">1</span>) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d9" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1d9"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.seq</var><b>: </b><span>∀ {σ₁ : State} {s₁ : Stmt} {σ₂ : State} {s₂ : Stmt} {σ₃ : State}, (σ₁, s₁) ⇓ σ₂ → (σ₂, s₂) ⇓ σ₃ → (σ₁, s₁;; s₂) ⇓ σ₃</span></span></div></blockquote></div></small></div>Bigstep.seq</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₁</var><b>: </b><span>∀ {σ₁' : State}, σ₁' ≼ σ₁✝ → (σ₁✝, (constProp s₁✝ σ₁').fst) ⇓ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>σ₁' ≼ σ₁✝</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₂</var><b>: </b><span>∀ {σ₁' : State}, σ₁' ≼ σ₂✝ → (σ₂✝, (constProp s₂✝ σ₁').fst) ⇓ σ₃✝</span></span></div></blockquote></div></small></div><span class="nv">ih₂</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constProp_sub</var><b>: </b><span>∀ {σ₁ : State} {s : Stmt} {σ₂ σ₁' : State}, (σ₁, s) ⇓ σ₂ → σ₁' ≼ σ₁ → (constProp s σ₁').snd ≼ σ₂</span></span></div></blockquote></div></small></div>constProp_sub</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₁</var><b>: </b><span>(σ₁✝, s₁✝) ⇓ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">h₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>σ₁' ≼ σ₁✝</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div><div class="alectryon-token">))</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1da" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1da"><div class="alectryon-token"><span class="bp">|</span> whileTrue heq h₁ h₂ ih₁ ih₂ <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝, σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₁&#39; : State}, σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span> <span class="bp">→</span> (σ₁<span class="bp">✝</span>, (constProp b<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span>fst) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₁&#39; : State}, σ₁&#39; <span class="bp">≼</span> σ₂<span class="bp">✝</span> <span class="bp">→</span> (σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> (constProp b<span class="bp">✝</span> [])<span class="bp">.</span>fst) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, while c<span class="bp">✝</span> (constProp b<span class="bp">✝</span> [])<span class="bp">.</span>fst) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1db" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1db"><div class="alectryon-token"><span class="k">have</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₁</var><b>: </b><span>(σ₁✝, (constProp b✝ []).fst) ⇓ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih₁</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₁</var><b>: </b><span>∀ {σ₁' : State}, σ₁' ≼ σ₁✝ → (σ₁✝, (constProp b✝ σ₁').fst) ⇓ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih₁</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.bot</var><b>: </b><span>∀ (σ : State), [] ≼ σ</span></span></div></blockquote></div></small></div>Substate.bot</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>State</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">)</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝, σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₁&#39; : State}, σ₁&#39; <span class="bp">≼</span> σ₂<span class="bp">✝</span> <span class="bp">→</span> (σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> (constProp b<span class="bp">✝</span> [])<span class="bp">.</span>fst) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, (constProp b<span class="bp">✝</span> [])<span class="bp">.</span>fst) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, while c<span class="bp">✝</span> (constProp b<span class="bp">✝</span> [])<span class="bp">.</span>fst) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1dc" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1dc"><div class="alectryon-token"><span class="k">have</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₂</var><b>: </b><span>(σ₂✝, while c✝ (constProp b✝ []).fst) ⇓ σ₃✝</span></span></div></blockquote></div></small></div><span class="nv">ih₂</span></div><div class="alectryon-token"> := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₂</var><b>: </b><span>∀ {σ₁' : State}, σ₁' ≼ σ₂✝ → (σ₂✝, while c✝ (constProp b✝ []).fst) ⇓ σ₃✝</span></span></div></blockquote></div></small></div><span class="nv">ih₂</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.bot</var><b>: </b><span>∀ (σ : State), [] ≼ σ</span></span></div></blockquote></div></small></div>Substate.bot</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>State</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">)</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝, σ₃✝, σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, b<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span></span></span></span><br><span><var>ih₁</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, (constProp b<span class="bp">✝</span> [])<span class="bp">.</span>fst) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih₂</var><span class="hyp-type"><b>: </b><span>(σ₂<span class="bp">✝</span>, while c<span class="bp">✝</span> (constProp b<span class="bp">✝</span> [])<span class="bp">.</span>fst) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, while c<span class="bp">✝</span> (constProp b<span class="bp">✝</span> [])<span class="bp">.</span>fst) <span class="bp">⇓</span> σ₃<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1dd" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1dd"><div class="alectryon-token"><span class="k">exact</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.whileTrue</var><b>: </b><span>∀ {c : Expr} {σ₁ : State} {b : Stmt} {σ₂ σ₃ : State},
  evalTrue c σ₁ → (σ₁, b) ⇓ σ₂ → (σ₂, while c b) ⇓ σ₃ → (σ₁, while c b) ⇓ σ₃</span></span></div></blockquote></div></small></div>Bigstep.whileTrue</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ₁✝ c✝ = some (Val.bool true)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₁</var><b>: </b><span>(σ₁✝, (constProp b✝ []).fst) ⇓ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih₁</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih₂</var><b>: </b><span>(σ₂✝, while c✝ (constProp b✝ []).fst) ⇓ σ₃✝</span></span></div></blockquote></div></small></div><span class="nv">ih₂</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1de" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1de"><div class="alectryon-token"><span class="bp">|</span> whileFalse heq <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>b✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">whileFalse</span></span><div class="goal-conclusion">(σ<span class="bp">✝</span>, while c<span class="bp">✝</span> (constProp b<span class="bp">✝</span> [])<span class="bp">.</span>fst) <span class="bp">⇓</span> σ<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1df" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1df"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.whileFalse</var><b>: </b><span>∀ {c : Expr} {σ : State} {b : Stmt}, evalFalse c σ → (σ, while c b) ⇓ σ</span></span></div></blockquote></div></small></div>Bigstep.whileFalse</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ✝ c✝ = some (Val.bool false)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1e0" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1e0"><div class="alectryon-token"><span class="bp">|</span> ifTrue heq h ih <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool true)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, t<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₁&#39; : State}, σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span> <span class="bp">→</span> (σ₁<span class="bp">✝</span>, (constProp t<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span>fst) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifTrue</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, ite (Expr.constProp c<span class="bp">✝</span> σ₁&#39;) (constProp t<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span><span class="mi">1</span> (constProp e<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span><span class="mi">1</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1e1" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1e1"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.ifTrue</var><b>: </b><span>∀ {c : Expr} {σ₁ : State} {t : Stmt} {σ₂ : State} {e : Stmt}, evalTrue c σ₁ → (σ₁, t) ⇓ σ₂ → (σ₁, ite c t e) ⇓ σ₂</span></span></div></blockquote></div></small></div>Bigstep.ifTrue</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.eval_constProp'</var><b>: </b><span>∀ {σ : State} {v : Option Val} {σ' : State} {e : Expr},
  Expr.eval σ e = v → σ' ≼ σ → Expr.eval σ (Expr.constProp e σ') = v</span></span></div></blockquote></div></small></div>Expr.eval_constProp&#39;</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ₁✝ c✝ = some (Val.bool true)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>σ₁' ≼ σ₁✝</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>∀ {σ₁' : State}, σ₁' ≼ σ₁✝ → (σ₁✝, (constProp t✝ σ₁').fst) ⇓ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>σ₁' ≼ σ₁✝</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div><div class="alectryon-token">)</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
  </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1e2" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1e2"><div class="alectryon-token"><span class="bp">|</span> ifFalse heq h ih <span class="bp">=&gt;</span></div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ₁</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c✝</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ₁✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>e✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₂✝</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>t✝</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ₁'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Expr.eval σ₁<span class="bp">✝</span> c<span class="bp">✝</span> <span class="bp">=</span> some (Val.bool false)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(σ₁<span class="bp">✝</span>, e<span class="bp">✝</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>ih</var><span class="hyp-type"><b>: </b><span><span class="bp">∀</span> {σ₁&#39; : State}, σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span> <span class="bp">→</span> (σ₁<span class="bp">✝</span>, (constProp e<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span>fst) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></span></span></span><br><span><var>h₂</var><span class="hyp-type"><b>: </b><span>σ₁&#39; <span class="bp">≼</span> σ₁<span class="bp">✝</span></span></span></span><br></div><span class="goal-separator"><hr><span class="goal-name">ifFalse</span></span><div class="goal-conclusion">(σ₁<span class="bp">✝</span>, ite (Expr.constProp c<span class="bp">✝</span> σ₁&#39;) (constProp t<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span><span class="mi">1</span> (constProp e<span class="bp">✝</span> σ₁&#39;)<span class="bp">.</span><span class="mi">1</span>) <span class="bp">⇓</span> σ₂<span class="bp">✝</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">
    </div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1e3" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1e3"><div class="alectryon-token"><span class="k">apply</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bigstep.ifFalse</var><b>: </b><span>∀ {c : Expr} {σ₁ : State} {e : Stmt} {σ₂ : State} {t : Stmt}, evalFalse c σ₁ → (σ₁, e) ⇓ σ₂ → (σ₁, ite c t e) ⇓ σ₂</span></span></div></blockquote></div></small></div>Bigstep.ifFalse</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr.eval_constProp'</var><b>: </b><span>∀ {σ : State} {v : Option Val} {σ' : State} {e : Expr},
  Expr.eval σ e = v → σ' ≼ σ → Expr.eval σ (Expr.constProp e σ') = v</span></span></div></blockquote></div></small></div>Expr.eval_constProp&#39;</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>heq</var><b>: </b><span>Expr.eval σ₁✝ c✝ = some (Val.bool false)</span></span></div></blockquote></div></small></div><span class="nv">heq</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>σ₁' ≼ σ₁✝</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div><div class="alectryon-token">) (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ih</var><b>: </b><span>∀ {σ₁' : State}, σ₁' ≼ σ₁✝ → (σ₁✝, (constProp e✝ σ₁').fst) ⇓ σ₂✝</span></span></div></blockquote></div></small></div><span class="nv">ih</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h₂</var><b>: </b><span>σ₁' ≼ σ₁✝</span></span></div></blockquote></div></small></div><span class="nv">h₂</span></div><div class="alectryon-token">)</div></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt.constPropagation</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div>Stmt.constPropagation</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"> : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Stmt</div><div class="alectryon-token">) : </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div>Stmt</div><div class="alectryon-token"> :=
  (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constProp</var><b>: </b><span>Stmt → State → Stmt × State</span></span></div></blockquote></div></small></div>constProp</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>⊥</var><b>: </b><span>List (Var × Val)</span></span></div></blockquote></div></small></div><span class="bp">⊥</span></div><div class="alectryon-token">)<span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>1</var><b>: </b><span>{α β : Type} → α × β → α</span></span></div></blockquote></div></small></div><span class="mi">1</span></div><div class="alectryon-token">

</div><div class="alectryon-token"><span class="kd">theorem</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Stmt.constPropagation_correct</var><b>: </b><span>∀ {σ : State} {s : Stmt} {σ' : State}, (σ, s) ⇓ σ' → (σ, constPropagation s) ⇓ σ'</span></span></div></blockquote></div></small></div>Stmt.constPropagation_correct</div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>(σ, s) ⇓ σ'</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token">) : (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ</span></div><div class="alectryon-token">, </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div><span class="nv">s</span></div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constPropagation</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div>constPropagation</div><div class="alectryon-token">) <span class="bp">⇓</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>σ'</var><b>: </b><span>State</span></span></div></blockquote></div></small></div><span class="nv">σ&#39;</span></div><div class="alectryon-token"> :=
  </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constProp_correct</var><b>: </b><span>∀ {σ₁ : State} {s : Stmt} {σ₂ σ₁' : State}, (σ₁, s) ⇓ σ₂ → σ₁' ≼ σ₁ → (σ₁, (constProp s σ₁').fst) ⇓ σ₂</span></span></div></blockquote></div></small></div>constProp_correct</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span>(σ, s) ⇓ σ'</span></span></div></blockquote></div></small></div><span class="nv">h</span></div><div class="alectryon-token"> (</div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Substate.bot</var><b>: </b><span>∀ (σ : State), [] ≼ σ</span></span></div></blockquote></div></small></div>Substate.bot</div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span>State</span></span></div></blockquote></div></small></div>_</div><div class="alectryon-token">)

</div><div class="alectryon-token"><span class="kd">def</span></div><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>example4</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>example4</div><div class="alectryon-token"> := <span class="bp">`</span>[Stmt<span class="bp">|</span>
  x := </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>2</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">2</span></div><div class="alectryon-token"><span class="bp">;</span>
  </div><div class="alectryon-token"><span class="k">if</span></div><div class="alectryon-token"> (x <span class="bp">&lt;</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>3</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">3</span></div><div class="alectryon-token">) {
    x := x <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>1</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">1</span></div><div class="alectryon-token"><span class="bp">;</span>
    y := y <span class="bp">+</span> x<span class="bp">;</span>
  } </div><div class="alectryon-token"><span class="k">else</span></div><div class="alectryon-token"> {
    y := y <span class="bp">+</span> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>3</var><b>: </b><span>Expr</span></span></div></blockquote></div></small></div><span class="mi">3</span></div><div class="alectryon-token"><span class="bp">;</span>
  }
]

</div></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1e4" style="display: none" type="checkbox"><label class="alectryon-input" for="vc8fhr9r6ffcw8n086r918ydgpz6cfxw-while-lean-chk1e4"><div class="alectryon-token"><span class="k">#eval</span></div></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">Stmt.seq
  (Stmt.assign <span class="s2">&quot;x&quot;</span> (Expr.val (Val.int <span class="mi">2</span>)))
  (Stmt.seq
    (Stmt.assign <span class="s2">&quot;x&quot;</span> (Expr.val (Val.int <span class="mi">3</span>)))
    (Stmt.assign <span class="s2">&quot;y&quot;</span> (Expr.bin (Expr.var <span class="s2">&quot;y&quot;</span>) (BinOp.add) (Expr.val (Val.int <span class="mi">3</span>)))))
</blockquote></div></div></small></span><span class="alectryon-wsp"><div class="alectryon-token"> </div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>example4</var><b>: </b><span>Stmt</span></span></div></blockquote></div></small></div>example4</div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>constPropagation</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div>constPropagation</div><div class="alectryon-token"><span class="bp">.</span></div><div class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simplify</var><b>: </b><span>Stmt → Stmt</span></span></div></blockquote></div></small></div>simplify</div><div class="alectryon-token">

<span class="k">#exit</span>
<span class="c1">-- TODO: add simp theorems for monadic code</span>
<span class="kd">theorem</span> Stmt.eval_correct {s : Stmt} (h : (s.eval fuel)<span class="bp">.</span>run σ <span class="bp">=</span> (<span class="bp">.</span>ok unit, σ&#39;)) : (σ, s) <span class="bp">⇓</span> σ&#39; := <span class="kd">by</span>
  induction fuel generalizing s σ σ&#39; <span class="k">with</span> simp at h
  <span class="bp">|</span> zero <span class="bp">=&gt;</span> injection h<span class="bp">;</span> contradiction
  <span class="bp">|</span> succ fuel ih <span class="bp">=&gt;</span>
    split at h
    next <span class="bp">=&gt;</span> injection h <span class="k">with</span> _ h<span class="bp">;</span> rw [h]<span class="bp">;</span> exact Bigstep.skip
    next <span class="bp">=&gt;</span> done</div></span></pre>
</div>
</div></body>
</html>
